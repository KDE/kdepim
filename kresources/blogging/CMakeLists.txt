kde4_header()

include_directories( ${CMAKE_SOURCE_DIR}/kresources/lib ${CMAKE_SOURCE_DIR}/kresources/blogging/libkblog/ ${KDE4_INCLUDE_DIR} ${QT_INCLUDES} ${CMAKE_CURRENT_SOURCE_DIR} ${CMAKE_CURRENT_BINARY_DIR}  )


########### next target ###############

set(kcal_blogging_LIB_SRCS 
   API_Blog.cpp 
   API_Blogger.cpp 
   xmlrpcjob.cpp 
   bloggingglobals.cpp 
   bloggingcalendaradaptor.cpp 
   kcal_resourceblogging.cpp 
   kcal_resourcebloggingconfig.cpp 
   kcal_resourceblogging_plugin.cpp )

kde4_automoc(${kcal_blogging_LIB_SRCS})

kde4_add_library(kcal_blogging SHARED ${kcal_blogging_LIB_SRCS})

target_link_libraries(kcal_blogging  ${QT_AND_KDECORE_LIBS} kgroupwarebase kcal kdepim kcal_blogging )

set_target_properties(kcal_blogging PROPERTIES VERSION 1.0.0 SOVERSION 1 )
install_targets(${LIB_INSTALL_DIR} kcal_blogging )


########### next target ###############

set(kcal_blogging_PART_SRCS dummy.cpp )

kde4_automoc(${kcal_blogging_PART_SRCS})

file(WRITE dummy.cpp "//autogenerated file by cmake\n")
kde4_add_plugin(kcal_blogging ${kcal_blogging_PART_SRCS})

kde4_install_libtool_file( ${PLUGIN_INSTALL_DIR} kcal_blogging )

target_link_libraries(kcal_blogging  ${QT_AND_KDECORE_LIBS} )

install_targets(${LIB_INSTALL_DIR}/kde4 kcal_blogging )


########### install files ###############

install_files( ${SERVICES_INSTALL_DIR}/kresources/kcal FILES blogging.desktop )

kde4_footer()



#original Makefile.am contents follow:

#INCLUDES = -I$(top_srcdir) -I$(top_srcdir)/kresources/lib -I../lib -I$(top_srcdir)/kresources/blogging/libkblog/ $(all_includes)
#
#lib_LTLIBRARIES = libkcal_blogging.la
#kde_module_LTLIBRARIES = kcal_blogging.la
#
#libkcal_blogging_la_SOURCES = API_Blog.cpp API_Blogger.cpp xmlrpcjob.cpp \
#  bloggingglobals.cpp \
#  bloggingcalendaradaptor.cpp \
#  kcal_resourceblogging.cpp kcal_resourcebloggingconfig.cpp
#libkcal_blogging_la_LDFLAGS = $(KDE_RPATH) $(all_libraries) \
#  -version-info 1:0:0 -no-undefined
#libkcal_blogging_la_LIBADD = \
#  ../lib/libkgroupwarebase.la \
#  $(top_builddir)/libkcal/libkcal.la $(top_builddir)/libkdepim/libkdepim.la 
#
#
#kcal_blogging_la_SOURCES = kcal_resourceblogging_plugin.cpp
#kcal_blogging_la_LDFLAGS = $(all_libraries) -module -no-undefined $(KDE_PLUGIN)
#kcal_blogging_la_LIBADD = libkcal_blogging.la
#
#kcal_servicedir = $(kde_servicesdir)/kresources/kcal
#kcal_service_DATA = blogging.desktop
#
#METASOURCES = AUTO
#
#messages: rc.cpp
#	$(XGETTEXT) *.cpp -o $(podir)/kres_blogging.pot
