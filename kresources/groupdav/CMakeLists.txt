
include_directories(
	${CMAKE_SOURCE_DIR}/kresources/lib
	${CMAKE_BINARY_DIR}/kresources/lib
	
)


set(libkgroupdav_SRCS groupdavglobals.cpp)

########### next target ###############

set(kcal_groupdav_LIB_SRCS groupdavcalendaradaptor.cpp kcal_resourcegroupdav.cpp ${libkgroupdav_SRCS})

kde4_automoc(${kcal_groupdav_LIB_SRCS})

kde4_add_library(kcal_groupdav SHARED ${kcal_groupdav_LIB_SRCS})

target_link_libraries(kcal_groupdav  ${KDE4_KDECORE_LIBS} kgroupwaredav ${KDE4_KCAL_LIBS} kdepim)

set_target_properties(kcal_groupdav PROPERTIES VERSION 1.0.0 SOVERSION 1 )
install(TARGETS kcal_groupdav  DESTINATION ${LIB_INSTALL_DIR})


########### next target ###############

set(kabc_groupdav_LIB_SRCS kabc_resourcegroupdav.cpp groupdavaddressbookadaptor.cpp ${libkgroupdav_SRCS})

kde4_automoc(${kabc_groupdav_LIB_SRCS})

kde4_add_library(kabc_groupdav SHARED ${kabc_groupdav_LIB_SRCS})

target_link_libraries(kabc_groupdav  ${KDE4_KDECORE_LIBS} kgroupwaredav ${KDE4_KCAL_LIBS} kdepim ${KDE4_KABC_LIBS})

set_target_properties(kabc_groupdav PROPERTIES VERSION 1.0.0 SOVERSION 1 )
install(TARGETS kabc_groupdav  DESTINATION ${LIB_INSTALL_DIR})


########### next target ###############


########### next target ###############

set(kcal_groupdav_PART_SRCS kcal_resourcegroupdav_plugin.cpp)

kde4_automoc(${kcal_groupdav_PART_SRCS})

kde4_add_plugin(kcal_groupdav ${kcal_groupdav_PART_SRCS})



target_link_libraries(kcal_groupdav  ${KDE4_KDECORE_LIBS} )

install(TARGETS kcal_groupdav  DESTINATION ${PLUGIN_INSTALL_DIR})


########### next target ###############

set(kabc_groupdav_PART_SRCS kabc_resourcegroupdav_plugin.cpp )

kde4_automoc(${kabc_groupdav_PART_SRCS})

kde4_add_plugin(kabc_groupdav ${kabc_groupdav_PART_SRCS})



target_link_libraries(kabc_groupdav  ${KDE4_KDECORE_LIBS} )

install(TARGETS kabc_groupdav  DESTINATION ${PLUGIN_INSTALL_DIR})


########### install files ###############

install( FILES kabc_groupdav.desktop  DESTINATION ${SERVICES_INSTALL_DIR}/kresources/kabc)
install( FILES kcal_groupdav.desktop  DESTINATION ${SERVICES_INSTALL_DIR}/kresources/kcal)

install(FILES uninstall.desktop DESTINATION ${SERVICES_INSTALL_DIR}/kresources/kabc/ RENAME kabc_opengroupware.desktop)
install(FILES uninstall.desktop DESTINATION ${SERVICES_INSTALL_DIR}/kresources/kcal/ RENAME kcal_opengroupware.desktop)


