
include_directories( ${CMAKE_SOURCE_DIR}/libical/src/libical ${CMAKE_SOURCE_DIR}/libical/src/libicalss ${CMAKE_SOURCE_DIR}/ ${CMAKE_SOURCE_DIR}/knotes ${CMAKE_SOURCE_DIR}/kaddressbook/common  )


########### next target ###############


########### next target ###############

set(libegwcommon_SRCS 
	xmlrpciface.cpp 
	synchronizer.cpp 
	debugdialog.cpp
	)


set(kabc_xmlrpc_LIB_SRCS kabc_resourcexmlrpc.cpp kabc_resourcexmlrpcconfig.cpp ${libkabcommon_SRCS} ${libegwcommon_SRCS})

kde4_add_kcfg_files(kabc_xmlrpc_LIB_SRCS ${CMAKE_SOURCE_DIR}/kaddressbook/common/kabprefs_base.kcfgc )


kde4_automoc(${kabc_xmlrpc_LIB_SRCS})

kde4_add_kcfg_files(kabc_xmlrpc_LIB_SRCS kabc_egroupwareprefs.kcfgc )

kde4_add_library(kabc_xmlrpc SHARED ${kabc_xmlrpc_LIB_SRCS})

target_link_libraries(kabc_xmlrpc  ${KDE4_KIO_LIBS} kabc kdepim )

set_target_properties(kabc_xmlrpc PROPERTIES VERSION 1.0.0 SOVERSION 1 )
install_targets(${LIB_INSTALL_DIR} kabc_xmlrpc )


########### next target ###############

set(kcal_xmlrpc_LIB_SRCS ${libegwcommon_SRCS} 
   kcal_resourcexmlrpc.cpp 
   kcal_resourcexmlrpcconfig.cpp 
   todostatemapper.cpp )

kde4_add_kcfg_files(kcal_xmlrpc_LIB_SRCS ${CMAKE_SOURCE_DIR}/kaddressbook/common/kabprefs_base.kcfgc )

kde4_automoc(${kcal_xmlrpc_LIB_SRCS})

kde4_add_kcfg_files(kcal_xmlrpc_LIB_SRCS kcal_egroupwareprefs.kcfgc )

kde4_add_library(kcal_xmlrpc SHARED ${kcal_xmlrpc_LIB_SRCS})

target_link_libraries(kcal_xmlrpc  ${KDE4_KDECORE_LIBS} kcal kdepim )

set_target_properties(kcal_xmlrpc PROPERTIES VERSION 1.0.0 SOVERSION 1 )
install_targets(${LIB_INSTALL_DIR} kcal_xmlrpc )


########### next target ###############

set(knotes_xmlrpc_LIB_SRCS knotes_resourcexmlrpc.cpp knotes_resourcexmlrpcconfig.cpp  ${libegwcommon_SRCS} 
${libknotesresources_SRCS})

kde4_automoc(${knotes_xmlrpc_LIB_SRCS})

kde4_add_kcfg_files(knotes_xmlrpc_LIB_SRCS knotes_egroupwareprefs.kcfgc )

kde4_add_library(knotes_xmlrpc SHARED ${knotes_xmlrpc_LIB_SRCS})
set_target_properties(knotes_xmlrpc PROPERTIES VERSION 1.0.0 SOVERSION 1 )

target_link_libraries(knotes_xmlrpc  ${KDE4_KDECORE_LIBS} kcal kdeprint kdepim )


install_targets(${LIB_INSTALL_DIR} knotes_xmlrpc )


########### next target ###############

set(kabc_xmlrpc_plugin_PART_SRCS kabc_resourcexmlrpcplugin.cpp )

kde4_automoc(${kabc_xmlrpc_plugin_PART_SRCS})

kde4_add_plugin(kabc_xmlrpc_plugin ${kabc_xmlrpc_plugin_PART_SRCS})
set_target_properties(kabc_xmlrpc_plugin PROPERTIES OUTPUT_NAME kabc_xmlrpc)

kde4_install_libtool_file( ${PLUGIN_INSTALL_DIR} kabc_xmlrpc_plugin )

target_link_libraries(kabc_xmlrpc_plugin  ${KDE4_KDECORE_LIBS} kabc_xmlrpc)

install_targets(${PLUGIN_INSTALL_DIR} kabc_xmlrpc_plugin )


########### next target ###############

set(kcal_xmlrpc_plugin_PART_SRCS kcal_resourcexmlrpcplugin.cpp )

kde4_automoc(${kcal_xmlrpc_plugin_PART_SRCS})

kde4_add_plugin(kcal_xmlrpc_plugin ${kcal_xmlrpc_plugin_PART_SRCS})
set_target_properties(kcal_xmlrpc_plugin PROPERTIES OUTPUT_NAME kcal_xmlrpc)

kde4_install_libtool_file( ${PLUGIN_INSTALL_DIR} kcal_xmlrpc_plugin )

target_link_libraries(kcal_xmlrpc_plugin ${KDE4_KDECORE_LIBS} kcal_xmlrpc)

install_targets(${PLUGIN_INSTALL_DIR} kcal_xmlrpc_plugin )


########### next target ###############

set(knotes_xmlrpc_plugin_PART_SRCS knotes_resourcexmlrpcplugin.cpp )

kde4_automoc(${knotes_xmlrpc_plugin_PART_SRCS})

kde4_add_plugin(knotes_xmlrpc_plugin ${knotes_xmlrpc_plugin_PART_SRCS})
set_target_properties(knotes_xmlrpc_plugin PROPERTIES OUTPUT_NAME knotes_xmlrpc)

kde4_install_libtool_file( ${PLUGIN_INSTALL_DIR} knotes_xmlrpc_plugin )

target_link_libraries(knotes_xmlrpc_plugin ${KDE4_KDECORE_LIBS} knotes_xmlrpc )

install_targets(${PLUGIN_INSTALL_DIR} knotes_xmlrpc_plugin )


########### install files ###############

install_files( ${SERVICES_INSTALL_DIR}/kresources/knotes FILES knotes_xmlrpc.desktop )
install_files( ${SERVICES_INSTALL_DIR}/kresources/kabc FILES kabc_xmlrpc.desktop )
install_files( /include/kabc FILES kabc_resourcexmlrpc.h kcal_resourcexmlrpc.h )
install_files( ${SERVICES_INSTALL_DIR}/kresources/kcal FILES kcal_xmlrpc.desktop )




#original Makefile.am contents follow:

#INCLUDES = -I$(top_srcdir)/libical/src/libical \
#           -I$(top_srcdir)/libical/src/libicalss \
#           -I$(top_builddir)/libical/src/libical \
#           -I$(top_builddir)/libical/src/libicalss \
#           -I$(srcdir)/versit -I$(top_srcdir)/ \
#           -I$(top_srcdir)/knotes \
#           -I$(top_builddir)/kaddressbook \
#           -I$(top_builddir)/kaddressbook/common \
#           -I$(top_srcdir)/kaddressbook/common \
#           -I$(top_builddir)/kresources/egroupware \
#           $(all_includes)
#
#noinst_HEADERS = kabc_resourcexmlrpcconfig.h kcal_resourcexmlrpcconfig.h \
#                 knotes_resourcexmlrpcconfig.h
#
#noinst_LTLIBRARIES = libegwcommon.la
#libegwcommon_la_SOURCES = xmlrpciface.cpp synchronizer.cpp debugdialog.cpp
#
#lib_LTLIBRARIES = libkabc_xmlrpc.la libkcal_xmlrpc.la libknotes_xmlrpc.la
#libkabc_xmlrpc_la_SOURCES = kabc_resourcexmlrpc.cpp kabc_resourcexmlrpcconfig.cpp  \
#                            kabc_egroupwareprefs.kcfgc
#libkabc_xmlrpc_la_LDFLAGS = $(KDE_RPATH) $(all_libraries) -version-info 1:0:0 -no-undefined
#libkabc_xmlrpc_la_LIBADD = $(LIB_KIO) -lkabc $(top_builddir)/libkdepim/libkdepim.la \
#                           $(top_builddir)/kaddressbook/common/libkabcommon.la \
#                           libegwcommon.la
#
#libkcal_xmlrpc_la_SOURCES = kcal_resourcexmlrpc.cpp kcal_resourcexmlrpcconfig.cpp \
#                            todostatemapper.cpp kcal_egroupwareprefs.kcfgc
#libkcal_xmlrpc_la_LDFLAGS = $(KDE_RPATH) $(all_libraries) -version-info 1:0:0 -no-undefined
#libkcal_xmlrpc_la_LIBADD = $(top_builddir)/libkcal/libkcal.la \
#                           $(top_builddir)/libkdepim/libkdepim.la \
#                           libegwcommon.la
#
#libknotes_xmlrpc_la_SOURCES = knotes_resourcexmlrpc.cpp knotes_resourcexmlrpcconfig.cpp \
#                              knotes_egroupwareprefs.kcfgc
#libknotes_xmlrpc_la_LDFLAGS = $(KDE_RPATH) $(all_libraries) -version-info 1:0:0 -no-undefined
#libknotes_xmlrpc_la_LIBADD = $(top_builddir)/libkcal/libkcal.la -lkdeprint \
#                             $(top_builddir)/knotes/libknotesresources.la \
#                             $(top_builddir)/libkdepim/libkdepim.la \
#                             libegwcommon.la
#
#kabcincludedir = $(includedir)/kabc
#kabcinclude_HEADERS = kabc_resourcexmlrpc.h kcal_resourcexmlrpc.h
#
#kde_module_LTLIBRARIES = kabc_xmlrpc.la kcal_xmlrpc.la knotes_xmlrpc.la
#
#kabc_xmlrpc_la_SOURCES = kabc_resourcexmlrpcplugin.cpp
#kabc_xmlrpc_la_LDFLAGS = $(all_libraries) -module $(KDE_PLUGIN)
#kabc_xmlrpc_la_LIBADD	= libkabc_xmlrpc.la
#
#kcal_xmlrpc_la_SOURCES = kcal_resourcexmlrpcplugin.cpp
#kcal_xmlrpc_la_LDFLAGS = $(all_libraries) -module $(KDE_PLUGIN)
#kcal_xmlrpc_la_LIBADD = libkcal_xmlrpc.la
#
#knotes_xmlrpc_la_SOURCES = knotes_resourcexmlrpcplugin.cpp
#knotes_xmlrpc_la_LDFLAGS = $(all_libraries) -module $(KDE_PLUGIN)
#knotes_xmlrpc_la_LIBADD = libknotes_xmlrpc.la
#
#kabc_servicedir = $(kde_servicesdir)/kresources/kabc
#kabc_service_DATA = kabc_xmlrpc.desktop
#
#kcal_servicedir = $(kde_servicesdir)/kresources/kcal
#kcal_service_DATA = kcal_xmlrpc.desktop
#
#knotes_servicedir = $(kde_servicesdir)/kresources/knotes
#knotes_service_DATA = knotes_xmlrpc.desktop
#
#METASOURCES = AUTO
#
#messages: rc.cpp
#	$(XGETTEXT) *.cpp -o $(podir)/kres_xmlrpc.pot
