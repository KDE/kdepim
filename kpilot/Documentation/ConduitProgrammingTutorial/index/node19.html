<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 2K.1beta (1.48)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>The PilotDatabase classes for working with databases</TITLE>
<META NAME="description" CONTENT="The PilotDatabase classes for working with databases">
<META NAME="keywords" CONTENT="index">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Generator" CONTENT="LaTeX2HTML v2K.1beta">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="index.css">

<LINK REL="next" HREF="node20.html">
<LINK REL="previous" HREF="node18.html">
<LINK REL="up" HREF="node16.html">
<LINK REL="next" HREF="node20.html">
</HEAD>

<BODY >
<!--Navigation Panel-->
<A NAME="tex2html300"
  HREF="node20.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html296"
  HREF="node16.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html290"
  HREF="node18.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html298"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html301"
  HREF="node20.html">The PilotRecord classes for</A>
<B> Up:</B> <A NAME="tex2html297"
  HREF="node16.html">How the conduits work</A>
<B> Previous:</B> <A NAME="tex2html291"
  HREF="node18.html">The KPilotDeviceLink class for</A>
 &nbsp <B>  <A NAME="tex2html299"
  HREF="node1.html">Contents</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H2><A NAME="SECTION00053000000000000000">
The <FONT SIZE="-1"><EM><TT>PilotDatabase</TT></EM></FONT> classes for working with databases</A>
</H2>
KPilot's class library knows two types of databases: local databases from 
a .pdb file on your PC's harddisk, and serial databases on a PalmOS device 
connected through a serial or USB cable. To work with a database, you just 
create an instance of either a <FONT SIZE="-1"><EM><TT>PilotLocalDatabase</TT></EM></FONT> or a 
<FONT SIZE="-1"><EM><TT>PilotSerialDatabase</TT></EM></FONT>, both of which are derived from 
<FONT SIZE="-1"><EM><TT>PilotDatabase</TT></EM></FONT>. This base class has the following important members:

<P>

<UL>
<LI><FONT SIZE="-1"><TT>virtual int recordCount()</TT></FONT> ... returns the number of records 
in the database
</LI>
<LI><FONT SIZE="-1"><TT>virtual QValueList&lt;recordid_t&gt; idList()</TT></FONT> ... Returns a list 
of all record ids in the database.
</LI>
<LI><FONT SIZE="-1"><TT>virtual PilotRecord* readRecordById(recordid_t id)</TT></FONT> ... Reads 
a record from database by id.
</LI>
<LI><FONT SIZE="-1"><TT>virtual PilotRecord* readRecordByIndex(int index)</TT></FONT> ... Reads a 
record from database.
</LI>
<LI><FONT SIZE="-1"><TT>virtual PilotRecord* readNextRecInCategory(int category)</TT></FONT> ... 
Reads the next record from database in category 'category'
</LI>
<LI><FONT SIZE="-1"><TT>virtual PilotRecord* readNextModifiedRec()</TT></FONT> ... Reads the next 
record from database that has the dirty flag set.
</LI>
<LI><FONT SIZE="-1"><TT>virtual recordid_t writeRecord(PilotRecord* newRecord)</TT></FONT> ... Writes 
a new record to database (if 'id' == 0 for a serial database, one will be 
assigned to newRecord)
</LI>
<LI><FONT SIZE="-1"><TT>virtual int resetSyncFlags()</TT></FONT> ... Resets all records in the 
database to not dirty.
</LI>
<LI><FONT SIZE="-1"><TT>virtual int resetDBIndex()</TT></FONT> ... Resets next record index to beginning
</LI>
<LI><FONT SIZE="-1"><TT>virtual int cleanup()</TT></FONT> ... Purges all Archived/Deleted records 
from Palm Pilot database
</LI>
<LI><FONT SIZE="-1"><TT>bool isDBOpen()</TT></FONT> ... Returns false if the database could not be 
opened, e.g. no connection to the handheld or file could not be created.
</LI>
<LI><FONT SIZE="-1"><TT>virtual QString dbPathName()</TT></FONT> ... Returns some sensible human-readable 
identifier for the database. Serial databases get Pilot:, local databases 
return the full path.
</LI>
<LI><FONT SIZE="-1"><TT>virtual int readAppBlock(unsigned char* buffer, int maxLen)</TT></FONT> ... 
Reads the application block info, returns size.
</LI>
<LI><FONT SIZE="-1"><TT>virtual int writeAppBlock(unsigned char* buffer, int len)</TT></FONT> ... 
Writes the application block info.
</LI>
<LI><FONT SIZE="-1"><TT>static void listAppInfo(const struct CategoryAppInfo *)</TT></FONT> ... Primarily 
meant for debugging, dumps an appinfo block to stdoutv
</LI>
</UL>

<P>
The constructors of <FONT SIZE="-1"><EM><TT>PilotLocalDatabase</TT></EM></FONT> and <FONT SIZE="-1"><EM><TT>PilotSerialDatabase</TT></EM></FONT> are:

<UL>
<LI><FONT SIZE="-1"><TT>PilotSerialDatabase(int linksocket, const char* dbName)</TT></FONT> ... linksocket
</LI>
<LI><FONT SIZE="-1"><TT>PilotLocalDatabase( const QString&amp; path, const QString&amp; name)</TT></FONT>
</LI>
<LI><FONT SIZE="-1"><TT>PilotLocalDatabase(const QString &amp;name)</TT></FONT> ... open database by name only
(no explicit path). The path <FONT SIZE="-1"><TT>$KDEHOME/share/apps/kpilot/DBBackup/PalmUserName/</TT></FONT> 
is set by KPilot automatically.
</LI>
</UL>

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html300"
  HREF="node20.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html296"
  HREF="node16.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html290"
  HREF="node18.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html298"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html301"
  HREF="node20.html">The PilotRecord classes for</A>
<B> Up:</B> <A NAME="tex2html297"
  HREF="node16.html">How the conduits work</A>
<B> Previous:</B> <A NAME="tex2html291"
  HREF="node18.html">The KPilotDeviceLink class for</A>
 &nbsp <B>  <A NAME="tex2html299"
  HREF="node1.html">Contents</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
Reinhold Kainhofer
2003-01-13
</ADDRESS>
</BODY>
</HTML>
