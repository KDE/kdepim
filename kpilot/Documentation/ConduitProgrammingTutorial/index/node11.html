<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 2K.1beta (1.48)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>The conduit factory</TITLE>
<META NAME="description" CONTENT="The conduit factory">
<META NAME="keywords" CONTENT="index">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Generator" CONTENT="LaTeX2HTML v2K.1beta">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="index.css">

<LINK REL="next" HREF="node12.html">
<LINK REL="previous" HREF="node10.html">
<LINK REL="up" HREF="node7.html">
<LINK REL="next" HREF="node12.html">
</HEAD>

<BODY >
<!--Navigation Panel-->
<A NAME="tex2html202"
  HREF="node12.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html198"
  HREF="node7.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html192"
  HREF="node10.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html200"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html203"
  HREF="node12.html">Debugging conduits</A>
<B> Up:</B> <A NAME="tex2html199"
  HREF="node7.html">The general conduit framework</A>
<B> Previous:</B> <A NAME="tex2html193"
  HREF="node10.html">Makefile.am and KDE build</A>
 &nbsp <B>  <A NAME="tex2html201"
  HREF="node1.html">Contents</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H2><A NAME="SECTION00034000000000000000">
The conduit factory</A>
</H2>

<P>
In KDE's dynamic library system, the library factory plays a crucial rule. The <FONT SIZE="-1"><TT>init_libraryname()</TT></FONT> function 
always returns a pointer to a <FONT SIZE="-1"><EM><TT>KLibFactory</TT></EM></FONT> instance. Whenever a program needs a special action by 
the conduit, it calls the <FONT SIZE="-1"><TT>createObject</TT></FONT> of the <FONT SIZE="-1"><EM><TT>KLibFactory</TT></EM></FONT> to get an appropriate object.
Furthermore, the conduit factory initializes the about dialog of the conduit. 

<P>
The factories of all conduits are very similar, so you best just copy the .h and .cc file of an existing conduit 
for your conduit. All you need to do is to change the copyright notices for the about dialog, and 
change the class names of the <FONT SIZE="-1"><EM><TT>ConduitAction</TT></EM></FONT> and <FONT SIZE="-1"><EM><TT>ConduitSetup</TT></EM></FONT> to your own class names. Also, 
the factory is a good place to define the strings for the config settings' entries to the config file.
If you define them like:
<PRE>
class MALConduitFactory : public KLibFactory
{
...
public:
    static const char *configSetting1() {return fConfigSetting1;};
private:
    static const char *fConfigSetting1;
} ;
</PRE>
and in the .cc file
<PRE>
const char*MALConduitFactory::fConfigSetting1="NameOfSetting";
</PRE>
you can use them as <FONT SIZE="-1"><TT>MALConduitFactory::configSetting1()</TT></FONT> in 
both the configuration dialog and the sync routine without running the risk of misspelling
them.

<P>
Everything else in the factory can stay as it is.

<P>
Here is an example of the malsync's factory:
<A NAME="tex2html12"
  HREF="mal-factory.h">Source code of mal-factory.h</A>
<A NAME="tex2html13"
  HREF="mal-factory.cc">Source code of mal-factory.cc</A>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html202"
  HREF="node12.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html198"
  HREF="node7.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html192"
  HREF="node10.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html200"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html203"
  HREF="node12.html">Debugging conduits</A>
<B> Up:</B> <A NAME="tex2html199"
  HREF="node7.html">The general conduit framework</A>
<B> Previous:</B> <A NAME="tex2html193"
  HREF="node10.html">Makefile.am and KDE build</A>
 &nbsp <B>  <A NAME="tex2html201"
  HREF="node1.html">Contents</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
Reinhold Kainhofer
2003-01-13
</ADDRESS>
</BODY>
</HTML>
