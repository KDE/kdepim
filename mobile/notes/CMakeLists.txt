project(notes-mobile)

include_directories(
  
  ${AKONADI_INCLUDE_DIR}
  ${Boost_INCLUDE_DIR}
)



set(notes_mobile_SRCS
  notelistproxy.cpp
  notesexporthandler.cpp
  notesfilterproxymodel.cpp
  notesimporthandler.cpp
  mainview.cpp
  main.cpp
  searchwidget.cpp
)

ki18n_wrap_ui(notes_mobile_SRCS searchwidget.ui)

if(RUNTIME_PLUGINS_STATIC)
  add_definitions(-DMAIL_SERIALIZER_PLUGIN_STATIC)
endif()

file(GLOB ICONS_SRCS "${CMAKE_CURRENT_SOURCE_DIR}/hi*-apps-notes-mobile.png")
ecm_add_app_icon(notes_mobile_SRCS ICONS ${ICONS_SRCS})

add_executable(notes-mobile ${notes_mobile_SRCS})

target_link_libraries(notes-mobile
  Qt5::Declarative
  KF5::AkonadiMime
  KF5::Mime
  KF5::Mbox
  kdepimmobileui
  kdepim
  KF5::AkonadiNotes
  akonadi_next
)

if(RUNTIME_PLUGINS_STATIC)
  target_link_libraries(notes-mobile akonadi_serializer_mail)
endif()

install(TARGETS notes-mobile ${KDE_INSTALL_TARGETS_DEFAULT_ARGS})
install(PROGRAMS notes-mobile.desktop DESTINATION ${KDE_INSTALL_APPDIR})
install(FILES
  BulkActionComponent.qml
  notes.qml
  NoteActions.qml
  NoteView.qml
  NotesListView.qml
  notes-mobile-background.png
  DESTINATION ${KDE_INSTALL_DATADIR}/notes-mobile
)

ecm_install_icons(ICONS hi48-apps-notes-mobile.png  hi64-apps-notes-mobile.png  hi80-apps-notes-mobile-harmattan.png DESTINATION ${KDE_INSTALL_ICONDIR})
