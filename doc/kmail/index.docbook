<?xml version="1.0" ?>
<!DOCTYPE book PUBLIC "-//KDE//DTD DocBook XML V4.1-Based Variant V1.0//EN" "dtd/kdex.dtd" [
  <!ENTITY kappname "&kmail;">
  <!ENTITY % addindex "IGNORE">
  <!ENTITY % English "INCLUDE" > <!-- change language only here -->
]>

<book lang="&language;">
<bookinfo>
<title>The &kmail; Handbook</title>

<!-- note from daniel.naber@t-online.de, 2001-05-05: I'm working on this
"by hand" (using nedit) so please don't mix up the formatting too much. -->

<!-- TODO: 
* is it "message", "mail" or "email" ??? 
* what is section / tab / ... ?
* better markup instead of 'quote'
-->

<authorgroup>
<author>
<firstname>Daniel</firstname>
<surname>Naber</surname>
<affiliation><address>
<email>daniel.naber@t-online.de</email>
</address></affiliation>
</author>

<author>
<firstname>David</firstname>
<surname>Rugge</surname>
<affiliation><address>
<email>davidrugge@mindspring.com</email>
</address></affiliation>
</author>

<!-- TRANS:ROLES_OF_TRANSLATORS -->  

</authorgroup>

<date>2001-07-21</date>
<releaseinfo>1.03.00</releaseinfo>

<copyright>
<year>1999</year>
<year>2000</year>
<year>2001</year>
<holder>David Rugge</holder>
</copyright>

<abstract>
	
<para>&kmail; is &kde;'s powerful and user friendly email client.</para>

</abstract>

<keywordset>
<keyword>KDE</keyword>
<keyword>Mail</keyword>
<keyword>email</keyword>
<keyword>Client</keyword>
<keyword>POP3</keyword>
<keyword>IMAP</keyword>
<keyword>PGP</keyword>
<keyword>GnuPG</keyword>
<keyword>GPG</keyword>
</keywordset>
</bookinfo>

<chapter id="intro">
<title>Introduction</title>

<para>The &kmail; Team welcomes you to &kmail;, a user-friendly mailer for the
K Desktop Environment. Our goal is to make a mailer that is beautiful
and intuitive without sacrificing power. </para>

<para>If you have never set up an email client on a &UNIX; system before, we
suggest that you read through the <link linkend="getting-started">Getting
Started</link> section first so that your setup goes smoothly.</para>

<para>Since most people don't read documentation anyway, here is a collection of the
most helpful tips:</para>

<itemizedlist>
<listitem>
<para>You don't have to use your mouse to use &kmail;. Everything should
be possible with keys. &kmail; supports all the standard keys like
<keycap>Tab</keycap> (switch between panes). The trick is: <keycap>Left
Arrow</keycap>/<keycap>Right Arrow</keycap> always jumps to the
previous/next message, but when you hold down &Ctrl;, you can use
<keycap>Left Arrow</keycap>/<keycap>Right Arrow</keycap> to navigate in
the Folders pane and <keycap>up arrow</keycap>/<keycap>down
arrow</keycap> to navigate in the Headers pane. Use
<keycombo
action="simul">&Ctrl;<keycap>Space</keycap></keycombo> to select the folder
you navigated to.</para>
</listitem>
<listitem>
<para>In the <guilabel>Composer</guilabel> you can select text and
drag it around with the mouse.</para>
</listitem>
<listitem>
<para>Although &kmail; can be considered reliable you should keep 
backups of your messages, &ie; just copy the files in <filename class="directory">~/Mail</filename>
to a safe place.</para>
</listitem>
<!-- TODO: add other tips for "invisible" features here -->

</itemizedlist>

<para>&kmail;'s homepage is at <ulink
url="http://kmail.kde.org">http://kmail.kde.org</ulink>, an archive of the
developer's mailing list is at <ulink
url="http://lists.kde.org/?l=kde-kmail&amp;r=1&amp;w=2">lists.kde.org</ulink>.</para>

<para>Please report bugs in &kmail; using
<menuchoice><guimenu>Help</guimenu><guimenuitem>Report
bug...</guimenuitem></menuchoice>.</para>

<para>We hope you will enjoy &kmail;!</para>

</chapter>

<chapter id="getting-started">
<title>Getting Started</title>

<para>This is a short introduction to &kmail; and its usage so you can start
working with it right away. For more in-depth information see the <link
linkend="using-kmail">Using &kmail;</link> section. Note that &kmail;'s
installation is described in <link linkend="installation">the appendix</link>.</para>

<para>Invoking &kmail; for the first time creates a directory called <filename
class="directory">Mail</filename> containing the initial files
(<filename>inbox</filename>, <filename>outbox</filename>,
<filename>sent-mail</filename>, <filename>trash</filename> and <filename>drafts</filename>) in your home
directory. Use <menuchoice> <guimenu>Settings</guimenu>
<guimenuitem>Configure &kmail;...</guimenuitem> </menuchoice> to enter some initial
information so &kmail; will be able to properly retrieve and send your
messages.</para>

<para>The Configure window consists of seven sections:
<guilabel>Identity</guilabel>, <guilabel>Network</guilabel>,
<guilabel>Appearance</guilabel>, <guilabel>Composer</guilabel>, <guilabel>Mime
Headers</guilabel>, <guilabel>Security</guilabel>, and
<guilabel>Miscellaneous</guilabel>.

To begin sending and receiving messages you will only have to change the settings
in the <guilabel>Identity</guilabel> and <guilabel>Network</guilabel>
tabs.</para>

<sect1 id="setting-your-identity">
<title>Setting your Identity</title>

<para>The settings in the <guilabel>Identity</guilabel> tab are fairly
straightforward. Fill in the <guilabel>Name</guilabel> field with your
full name (&eg; <userinput>John Doe</userinput>) and the
<guilabel>Organization</guilabel> field (optional) with the appropriate
information. Next, fill in the <guilabel>Email Address</guilabel> and
the <guilabel>Reply-To Address</guilabel> (optional) field with your
email address. If you are using <application>PGP</application> or
<application>GnuPG</application> you need to set an identity in 
the <guilabel>PGP User Identity</guilabel> field.</para>

<para>Optionally, set the location of your signature file in the
<guilabel>Signature File</guilabel> field. If you want a random 
signature, you may specify a program <!-- TODO: like
"fortune"? --> and check the <guilabel>The file is a program</guilabel>
box.</para>

<para>If you add a new identity, an <guilabel>Add
Transport...</guilabel> button will appear (this button does not exist
for the <guilabel>Default</guilabel> identity). It allows you to
configure a way of sending messages for a specific identitiy, &eg; you
might want to use a different <acronym>SMTP</acronym> server for one
of your identities.</para>

</sect1>

<sect1 id="setting-up-your-account">
<title>Setting up your Account</title>

<para>The <guilabel>Network</guilabel> tab contains the settings that tell
&kmail; how to send and receive your email. Many of these settings can vary
greatly depending on the setup of your system and on the kind of network that
your mail server is located. If you do not know what setting to choose or what to
put in a field, consult your Internet Service Provider (<acronym>ISP</acronym>)
or System Administrator.</para>

<sect2 id="sending-mail">
<title>Sending Mail</title>

<para>The <guilabel>Sending Mail</guilabel> section provides two options for
sending messages: <guilabel>sendmail</guilabel> and
<guilabel>SMTP</guilabel>. <application>Sendmail</application> has a reputation of
being difficult to set up, so if you do not already have a working
<application>sendmail</application> configuration, choose
<guilabel>SMTP</guilabel> and fill in the <guilabel>Server</guilabel> field with
the name and domain of your mail server. You will probably not need to change
the <guilabel>Port</guilabel> setting (the default is
<userinput>25</userinput>).</para>

<para>If you do want to use <application>sendmail</application> and you are
using a dial-up connection, follow the instructions for setting up sendmail for
a dial-up connection in the <link linkend="faq">FAQ</link> section.</para>

<para>The way of sending messages configured here will be used for your default
identity and for all other identities that have no own way of sending messages. You 
can use different ways of sending messages for different
identities by adding them with the <guilabel>Add Transport...</guilabel> button
in the <guilabel>Identity</guilabel> section.</para>

</sect2>
      
<sect2 id="properties">
<title>Properties</title>

<para>The <guilabel>Properties</guilabel> section lets you configure
how and when messages are sent.</para>

<para><guilabel>Default send method</guilabel> lets you define what
happens when a message is sent. If <guilabel>Send now</guilabel> is
selected, the message is sent to the mail server immediately, while if
<guilabel>Send later</guilabel> is selected, the message is queued in
the outbox to be sent later with the
<menuchoice><guimenu>File</guimenu><guimenuitem>Send
Queued</guimenuitem></menuchoice> command or automatically when you
check your mail, depending on the settings in the
<guilabel>Miscellaneous</guilabel> tab.</para>

<para><guilabel>Message Property</guilabel> lets you select how your message
will be encoded when it is sent. <guilabel>Allow 8-bit</guilabel> means that
&kmail; will send your message in 8 bit <acronym>ASCII</acronym>, which means
that all special characters such as accented letters will be sent as-is. If
<guilabel>MIME Compliant (Quoted Printable)</guilabel> is selected, special
characters will be encoded using standard &MIME; encodings, which may be more
portable to other mailing systems than 8-bit <acronym>ASCII</acronym>. You
normally do not need to change the default.<!-- TODO:
advise what's better --></para>

<para>With <guilabel>Precommand</guilabel> you can specify a command 
that will be executed before your messages will be sent.</para>

<para><guilabel>Confirm before send</guilabel> enables a dialog that
asks, every time you click  <guilabel>Send now</guilabel>, if you 
really want to send your mail.</para>

</sect2>

<sect2 id="receiving-mail">
<title>Incoming Mail</title>

<para>To set up an account so you can receive mail, press the
<guibutton>Add...</guibutton> button in the <guilabel>Incoming Mail</guilabel>
section. You will then be prompted for the type of account.  Most users should
select <guilabel>Pop3</guilabel> or <guilabel>IMAP</guilabel>.</para>

<para>After pressing <guibutton>OK</guibutton> you will be presented with
the <guilabel>Add Account</guilabel> window. First, fill in the
<guilabel>Name</guilabel> field to name your account. You can choose any name
you like.  <guilabel>Login</guilabel>, <guilabel>Password</guilabel>, and
<guilabel>Host</guilabel> should be filled in with the appropriate information
from your <acronym>ISP</acronym> or System Administrator. You should not
need to change the <guilabel>Port</guilabel> setting (the default for POP3 is
<userinput>110</userinput>, the default for IMAP is <userinput>143</userinput>).</para>

<sect3 id="receiving-mail-imap">
<title>Options only relevant to IMAP</title>

<para>If you are using IMAP, you can optionally specify a path
in the <guilabel>Prefix to folders</guilabel> field. This tells
&kmail; where it can find your folders on the server. If you also have
a shell account on the server and the mails are stored in your home
directory it might be useful to store the mails in a subdirectory
<filename class="directory">/Mail/</filename>. Use this as a value
in the <guilabel>Prefix to folders</guilabel> field so that &kmail;
does not mix up mailbox files and other files. If you are not
interested in this feature, simple leave the field blank.</para>

<para>If you check <guilabel>Automatically expunge deleted
messages</guilabel> &kmail; removes the mails you deleted from the
server as soon as you leave a folder. Otherwise the mails are
only marked as deleted and it is up to you to compact the folders
manually by using the menu item <guimenuitem>Compact all
folders</guimenuitem>.</para>

<para>If you check <guilabel>Show hidden folders</guilabel>,
folders whose name starts with a dot are also displayed.</para>

</sect3>

<sect3 id="receiving-mail-pop3">
<title>Options only relevant to POP3</title>

<para>Select <guilabel>Delete mail from server</guilabel> if you don't want to
leave your messages on the server after you downloaded it.</para>

<para>Select <guilabel>Exclude from &quot;Check Mail&quot;</guilabel> if you
don't want to check this account whenever you use <menuchoice><guimenu>Check
mail</guimenu></menuchoice>.  You can still check for new messages on this account
with <menuchoice><guimenu>File</guimenu><guimenuitem>Check Mail
in</guimenuitem></menuchoice>.</para>

<para>Select <guilabel>Enable interval mail checking</guilabel> if you want
&kmail; to check for new messages automatically. The interval can be specified below
under <guilabel>Check interval (minutes)</guilabel>.</para>

<para><guilabel>inbox</guilabel> is the default folder for incoming
mail. If you want to change that for some reason, you can do so with
<guilabel>Destination folder</guilabel>. But what you probably want is a
<link linkend="filters">filter</link>, which has nothing to do with this
option.</para>

<para>With <guilabel>Precommand</guilabel> you can specify any program that &kmail;
will execute just before fetching mail. Please specify the full path and note
that &kmail; will not continue until the program returns.</para>

</sect3>

<sect3 id="receiving-mail-imap-pop3">
<title>Options for both IMAP and POP3</title>

<para>If you select <guilabel>Store POP password in configuration
file</guilabel> resp. <guilabel>Store IMAP password in configuration
file</guilabel> &kmail; will remember your password so you won't have to type it
every time you start &kmail; and fetch new mail.</para>

<warning><para>Be warned that we cannot really
encrypt your password, so people who can access your configuration files (&eg;
system administrators) can easily get your password if you select this option.</para></warning>

<para>&kmail; supports encryption via <guilabel>SSL</guilabel> 
and <guilabel>TLS</guilabel>.</para> 
<!-- fixme: what's that?? -->

<para>For POP3 &kmail; supports <guilabel>Clear text</guilabel>, 
<guilabel>PLAIN</guilabel>, <guilabel>CRAM-MD5</guilabel> and
<guilabel>APOP</guilabel> authentificaton. 
<guilabel>APOP</guilabel> and <guilabel>CRAM-MD5</guilabel> are secure 
on their own, all the other options are only secure when used together
with <guilabel>SSL</guilabel> or <guilabel>TLS</guilabel>.
You should only use <guilabel>Clear text</guilabel> if your server doesn't support any 
of the other authentification methods. Additionally, for IMAP
<guilabel>Anonymous</guilabel> is supported.</para>

<para>You are now ready to send and receive mail! For IMAP,
click on the <guilabel>+</guilabel> sign in the folder tree in
&kmail;'s main window. &kmail; then connects to your server and
displays the folders it finds. For POP3 use <menuchoice><guimenu>File</guimenu>
<guimenuitem>Check Mail</guimenuitem></menuchoice>.</para>

</sect3>

</sect2>

</sect1>

<sect1 id="testing-your-setup">
<title>Testing your Setup</title>

<para>First, you should send yourself a message to test your configuration. To
send a message, hit <keycombo
action="simul">&Ctrl;<keycap>N</keycap></keycombo>, select the
<guiicon>New message</guiicon> icon (the empty sheet of paper)
or select the <menuchoice><guimenu>Message</guimenu><guimenuitem>New
Message...</guimenuitem></menuchoice> menu item.  The
<guilabel>Composer</guilabel> window will appear. Fill in the
<guilabel>To:</guilabel> field with your email address and type
something in the <guilabel>Subject</guilabel> field. Send the message by
selecting <menuchoice><guimenu>Message</guimenu>
<guimenuitem>Send now</guimenuitem></menuchoice>.</para>
      
<para>To check your email, select
<menuchoice><guimenu>File</guimenu><guimenuitem>Check
Mail</guimenuitem></menuchoice>. In the lower right corner of the main window, a
progress bar will indicate how many messages are being downloaded. If you receive the
message you just sent, then congratulations!  If, however, you receive any error
messages while testing your setup, make sure that your network connection is
working and recheck your settings by selecting
<menuchoice><guimenu>Settings</guimenu>
<guimenuitem>Configure &kmail;...</guimenuitem></menuchoice></para>

</sect1>

</chapter>

<chapter id="using-kmail">
<title>Using &kmail;</title>

<sect1 id="the-mail-reader-window">
<title>The Main Window</title>

<para>The main window is the window that appears
when &kmail; is started. It is divided into three panes:</para>

<variablelist>
<varlistentry>
<term>Folders pane (left pane)</term>
<listitem>
<para>This pane contains a list of your message folders (other email programs
call them mailboxes). If there is a number after the folder name this indicates
that this folder contains unread mails. To select a folder, simply click on
it. The messages contained in the folder will now appear in the Headers
pane. The number of unread messages and the total number of messages in the
selected folder is now displayed in the status bar.  The folders can be
displayed in both a short view, which takes up only a small portion of the left
side of the screen, and a long view, which takes up the entire left side of the
screen but is able to show more mailboxes. You can toggle between these two views
under <guilabel>Appearance</guilabel>/<guilabel>Layout</guilabel> in the
<guilabel>Configure &kmail;...</guilabel> dialog. Also see the <link
linkend="folders">Folders Section</link> for more information about how to use
folders.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Headers pane (upper right pane)</term>
<listitem>
<para>This pane lists header information (message Status Flags, Sender, Subject,
Date, optionally Size and Score) for the messages in the currently selected folder. Clicking on a header
will select that message and display it in the Message pane. You can also select
a series of messages by clicking on one message, holding down the
<keycap>Shift</keycap> key, and clicking on another message. The two messages
you just clicked on will be selected, along with all the messages in between. By
holding down the &Ctrl; key you can select any number of messages without those
in between. You may sort the messages by clicking on the column that you wish to
sort. If you click on the same column more then once, sort order will toggle
between ascending/descending. If you click on the <guilabel>Subject</guilabel>
column, you can toggle sorting between <guilabel>Subject</guilabel> ascending/descending and 
<guilabel>Status</guilabel> ascending/descending. 
Similarly, if you click on the <guilabel>Date</guilabel>
column, you can toggle sorting between <guilabel>Date</guilabel> ascending/descending and 
<guilabel>Date (Order of Arrival)</guilabel> ascending/descending.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Message pane (lower right pane)</term>
<listitem>
<para>This pane displays the header and body of the currently selected
message. Attachments appear at the bottom of the message. 
You can scroll through the message page by page
using the <keycap>Page Up</keycap> and <keycap>Page down</keycap> keys, or line
by line using the <keycap>up arrow</keycap> and <keycap>down arrow</keycap>
keys. You can also use the following key shortcuts to skip through your messages
without having to use the mouse:</para>
<informaltable>
<tgroup cols="2">
<thead>
<row>
<entry>Keyboard Shortcut</entry>
<entry>Action</entry>
</row>
</thead>
<tbody>
<row>
<entry><keycap>Space</keycap></entry>
<entry>Scroll down in the current message or go to the next unread message if you are already at the bottom</entry>
</row>
<row>
<entry><keycap>Right Arrow</keycap> or <keycap>N</keycap></entry>
<entry>Next message in the current folder</entry>
</row>
<row>
<entry><keycap>Left Arrow</keycap> key or <keycap>P</keycap></entry>
<entry>Previous message in the current folder</entry>
</row>
<row>
<entry><keycap>+</keycap></entry>
<entry>Next unread message in the current folder</entry>
</row>
<row>
<entry><keycap>-</keycap></entry>
<entry>Previous unread message in the current folder</entry>
</row>
<row>
<entry><keycombo
action="simul">&Ctrl;<keycap>+</keycap></keycombo></entry>
<entry>Go to next folder with unread messages</entry>
</row>
<row>
<entry><keycombo
action="simul">&Ctrl;<keycap>-</keycap></keycombo></entry>
<entry>Go to the previous folder with unread messages</entry>
</row>
</tbody>
</tgroup>
</informaltable>
</listitem>
</varlistentry>
</variablelist>

<para>Messages can have one (not more) of several status flags, which can be changed from
the <menuchoice><guimenu>Message</guimenu><guimenuitem>Set
Status</guimenuitem></menuchoice> submenu. The status flags are described
below:</para>

<informaltable>
<tgroup cols="2">
<thead>
<row>
<entry>Status</entry>
<entry>Symbol</entry>
<entry>Meaning</entry>
</row>
</thead>
<tbody>
<row>
<entry><guimenuitem>New</guimenuitem></entry>
<entry>Red dot</entry>
<entry>The message has been received for the first time, and is unread.</entry>
</row>
<row>
<entry><guimenuitem>Unread</guimenuitem></entry>
<entry>Green dot</entry>
<entry>The message has already been retrieved off the server at least once, but
has not yet been read.</entry>
</row>
<row>
<entry><guimenuitem>Read</guimenuitem></entry>
<entry>Dash</entry>
<entry>The message has been read</entry>
</row>
<row>
<entry><guimenuitem>Replied</guimenuitem></entry>
<entry>Blue u-turn arrow</entry>
<entry>A reply has been composed to this message.</entry>
</row>
<row>
<entry><guimenuitem>Queued</guimenuitem></entry>
<entry>Envelope</entry>
<entry>The mesage has been queued in the outbox to be sent later.</entry>
</row>
<row>
<entry><guimenuitem>Sent</guimenuitem></entry>
<entry>Angled envelope</entry>
<entry>The message has been sent.</entry>
</row>
<row>
<entry><guimenuitem>Flagged</guimenuitem></entry>
<entry>Flag</entry>
<entry>This status will not automatically be set by &kmail;. You can use it freely to mark 
messages that are in some way important to you.</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</sect1>

<sect1 id="the-composer-window">
<title>The Composer Window</title>

<para>The <guilabel>Composer</guilabel> window is used to write new messages.
It can be invoked from the <menuchoice><guimenu>Message</guimenu></menuchoice>
menu or from the <guiicon>document</guiicon> icon on the <guilabel>Mail
Reader</guilabel> window button bar.  If you have not set the location of your
signature file and you have <guilabel>Use a signature from file</guilabel>
checked in the <guilabel>Composer</guilabel> tab of the
<guilabel>Configure &kmail;...</guilabel> dialog, you will be prompted for the location of
your signature file before the <guilabel>Composer</guilabel> window
opens.</para>

<sect2 id="composing-a-message">
<title>Composing a Message</title>

<para>To write your message, fill in the appropriate fields in the
<guilabel>Composer</guilabel> window. There are a variety of shortcuts to help
you with writing your messages. The <guiicon>ellipsis</guiicon> buttons next to
the <guilabel>To:</guilabel>, <guilabel>Cc:</guilabel>, and
<guilabel>Bcc:</guilabel> fields will call up the address book so that you can
select addresses from there.</para>

<para>When you start typing an address in the
<guilabel>To:</guilabel>/<guilabel>Cc:</guilabel>/<guilabel>Bcc:</guilabel>
fields, a popup will appear that offers matching addresses that have been used recently 
and matching adresses from your address book. <!-- fixme: will hopefully be fixed: -->
Note that this auto-completion is case-sensitive, so if you type <guilabel>john</guilabel>, 
<guilabel>John Doe &lt;doe@acme.com&gt;</guilabel> will not show
up automatically. If you don't like the automatic popup you can disable it by clicking
with the &RMB; on the field and choosing a different completion mode.</para>

<para>Whenever you want to add more than one
recipient in one of the fields, use a comma to separate each address
from the next one. You may need to specify fully qualified addresses
(&ie; <userinput>user@domain.com</userinput>) even for local
users.</para>

<para>You can use the <menuchoice><guimenu>View</guimenu></menuchoice> menu to
set up the header fields offered to you. When you are finished with your
message, hit the <guiicon>Send</guiicon> button (the envelope) to queue or send
the message. If you don't want to send your message yet, select
<menuchoice><guimenu>Message</guimenu><guimenuitem>Save in drafts folder</guimenuitem></menuchoice>.
</para> 

</sect2>

<sect2 id="attachments">
<title>Attachments</title>

<para>You can attach files to your message by using one of the methods
below:</para>

<itemizedlist>
<listitem>
<para>Click the <guiicon>paper clip</guiicon> button and select the file you wish
to attach.</para>
</listitem>
<listitem>
<para>Drag a file from the desktop or another directory into the
<guilabel>Composer</guilabel> window.</para> 
</listitem>
<listitem>
<para>Select one of the options in the
<menuchoice><guimenu>Attach</guimenu></menuchoice> menu.</para>
</listitem>
</itemizedlist>

<para>The <guilabel>Message Part Properties</guilabel> dialog will appear to
prompt you for information about your attachment. The &MIME;-type and 
<guilabel>Name</guilabel>
fields are automatically filled in with the appropriate values. Sometimes the
&MIME;-type value may be wrong. You can then type in any content &MIME;-type or
choose from the list of common &MIME;-types. You can also select an encoding
method for your file from the list of encoding options (normally, the default
value works fine).</para>

<para>Once a file is attached to your message, it appears in the Attachments
pane at the bottom of the <guilabel>Composer</guilabel> window. You may remove,
save, or get information about an attachment by selecting its name in the
Attachments pane and selecting
<menuchoice><guimenuitem>Remove</guimenuitem></menuchoice>,
<menuchoice><guimenuitem>Save...</guimenuitem></menuchoice>, or
<menuchoice><guimenuitem>Properties...</guimenuitem></menuchoice> from the
<menuchoice><guimenu>Attach</guimenu></menuchoice> menu. </para>

<para><application>PGP</application>/<application>GnuPG</application> keys may also 
be attached to your message by using the appropriate options in the
<menuchoice><guimenu>Attach</guimenu></menuchoice> menu. <acronym>PGP</acronym>
key attachments are handled like file attachments.</para>

<!-- copied from below -->
<warning><para>You can encrypt your messages sent with &kmail;, but this does
not mean that the attachments are encrypted. You have to encrypt your
attachments manually, using a shell command or some other tool before you attach
them.</para></warning>
<!-- / copied from below -->

</sect2>

<sect2 id="checking-the-spelling-of-your-message">
<title>Checking the Spelling of your Message</title>

<para>To check the spelling of your message, select
<menuchoice><guimenu>Edit</guimenu>
<guimenuitem>Spelling...</guimenuitem></menuchoice>. &kmail; uses &kspell; to
check spelling, which is the &kde; frontend to the 
<application>ispell</application> or <application>aspell</application> spelling
checker. Note that you may need to configure the spellchecker using
<menuchoice><guimenu>Settings</guimenu>
<guimenuitem>Spellchecker...</guimenuitem></menuchoice>.</para>

</sect2>

</sect1>

<sect1 id="folders">
<title>Message Folders</title>

<para>Message Folders are used to organize your email messages. By default, all
message folders are stored in the directory <filename
class="directory">Mail</filename>, which is created in your home directory. When
you first start &kmail; the <guilabel>inbox</guilabel>,
<guilabel>outbox</guilabel>, <guilabel>sent-mail</guilabel>,
<guilabel>trash</guilabel> and <guilabel>drafts</guilabel> folders are created.
These folders each have special functions:</para>

<variablelist>
<varlistentry>
<term><guilabel>inbox:</guilabel></term>
<listitem>
<para>Where &kmail; by default puts your new messages when you ask it to check your
mail. </para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>outbox:</guilabel></term>
<listitem>
<para>Where messages are put while they are waiting to be delivered. </para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>sent-mail:</guilabel></term>
<listitem>
<para>Contains copies of all messages that you have sent. </para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>trash:</guilabel></term>
<listitem>
<para>Contains all messages that you have deleted.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>drafts:</guilabel></term>
<listitem>
<para>Contains messages you started to edit but didn't finish.</para>
</listitem>
</varlistentry>
</variablelist>

<para>You may find that the standard folders are fine for your
needs. Eventually, though, you will probably need folders to help you organize
your messages. To create a new folder, select
<menuchoice><guimenu>Folder</guimenu><guimenuitem>Create...</guimenuitem></menuchoice>
A window will then prompt you for the name of the folder. If you don't want it
to be a top level folder, you may choose the folder under which it will
appear. If you ever need to change the settings for a folder, select the folder
you wish to modify in the Folders pane and select
<menuchoice><guimenu>Folder</guimenu><guimenuitem>Properties...</guimenuitem>
</menuchoice>.</para>

<para>To move messages from one folder into another, select the message(s) you
want to move and press the <keycap>M</keycap> key or select
<menuchoice><guimenu>Message</guimenu><guimenuitem>Move
to</guimenuitem></menuchoice>. A list of folders will appear.  Select the folder
from the list that you want to move the messages to.  Messages can also be moved
by dragging them from the Headers pane into the Folders pane.</para>

<para>If you want to clear all of the messages out of a folder choose
<menuchoice><guimenu>Folder</guimenu><guimenuitem>Empty</guimenuitem></menuchoice>.
All the messages in the selected folder will be moved to the trash folder. If
the selected folder is the <guilabel>trash</guilabel> folder, all of the
messages will be permanently deleted.</para>

</sect1>

<sect1 id="the-address-book">
<title>The Address Book</title>

<para>An address book lets you store your commonly used email
addresses. You can call up the address book from the
<menuchoice><guimenu>File</guimenu></menuchoice> menu, the address book button
on the Main window, or the <guiicon>address book</guiicon> button in the
<guilabel>Composer</guilabel> window.</para>

<para>You can choose between different types of address books in the
<guilabel>Appearance</guilabel>/<guilabel>Addressbook</guilabel> section in
&kmail;'s <guilabel>Configure &kmail;...</guilabel> dialog.</para>

<para>The default address book is &kaddressbook;, which has <ulink
url="help:/kaddressbook">its own documentation</ulink>.</para>

<sect2 id="the-address-book-simple">
<title>&kmail;'s simple <quote>traditional</quote> address book</title>

<para>To add addresses to the address book, type an email address into the lower
section of the window and hit the <guibutton>Add</guibutton> button. The
address will then appear on top of the list (the next time you open the address
book it will have its place according to the alphabetical order).
To remove an address, select it
from the list and hit the <guibutton>Remove</guibutton> button. </para>

<para>Addresses can also be added to the address book from the <guilabel>Mail
Reader</guilabel> window by &RMB; clicking on an email address in the
<guilabel>To:</guilabel> or <guilabel>From:</guilabel> fields and selecting
<guilabel>Add to address book</guilabel>.</para>

</sect2>

</sect1>

<sect1 id="filters">
<title>Filters</title>
<anchor id="filters-id"/>

<para>After using &kmail; for a while, you may find that you have trouble
sorting out the new messages in your inbox when they arrive. Filters allow you
to automatically perform certain actions on incoming messages and to manually
perform actions on selected messages in a folder.</para>

<para>Filters consist of a search pattern, whose rules are used as
criteria to determine whether this filter should be applied to a given
message, and a list of filter actions, which describe what is being
done with or to the message if the search pattern matches. Read more
about search patterns and filter actions in the following
subsections.</para>

<caution><para> Filters are considered one after the other,
starting with the first filter in the list. The first one whose
pattern matches the given message gets executed. You can request that
the remaining filters also be applied, but the default is to stop
processing at the first matching filter. </para></caution>

<para>Usually, filters are used on incoming messages, but they can
also be applied to a message or a group of messages. To selectively
filter messages, select the messages you want to filter and type
<keycombo action="simul">&Ctrl;<keycap>J</keycap></keycombo> or select
<menuchoice><guimenu>Message</guimenu><guimenuitem>Apply
Filters</guimenuitem></menuchoice>. This will apply all your filters
to those messages; there is no way to apply only certain filters to
messages, except for incoming and outgoing messages.</para>

<sect2 id="filter-quick">
<title>Fast Filter Creation</title>

<para>There are two methods for creating a filter: The quick method is
to use <menuchoice><guimenu>Message</guimenu><guimenuitem>Create
Filter</guimenuitem></menuchoice>. This will call the filter dialog
and present you with a new filter which has the first rule of the
search pattern and the first action (as <quote>move to folder</quote>) preset. In
most cases, all you have to do is select the folder where the message
should be moved to. But you can, of course, edit the filter as you
like.</para>

<para>The interesting thing about this method is that creating a
filter on mailing lists will try really hard to find a header that
uniquely identifies mails from that list. If it succeeds, the guessed
name of the list is presented in the
<menuchoice><guimenu>Message</guimenu><guisubmenu>Create
Filter</guisubmenu><guimenuitem>Filter on
Mailing-List...</guimenuitem></menuchoice> menu entry.</para>

<tip><para>In most cases this works very well, yet sometimes you
should delete parts of the header contents that are likely to change
again. Usually, just keeping the list address works best.</para></tip>

<para>The second method is to manually construct a filter from scratch
by calling the filter dialog through
<menuchoice><guimenu>Settings</guimenu><guimenuitem>Configure 
Filters...</guimenuitem></menuchoice>. The filter dialog is described in
detail in the following subsection.</para>
</sect2>

<sect2 id="filter-dialog">
<title>The Filter Dialog</title>
<anchor id="filter-dialog-id"/>

<para>This dialog allows you to manage and edit your list of
filters.</para>

<para>You reach it either via
<menuchoice><guimenu>Message</guimenu><guisubmenu>Create
Filter</guisubmenu></menuchoice> or
<menuchoice><guimenu>Settings</guimenu><guimenuitem>Filter
Rules...</guimenuitem></menuchoice>.</para>

<para>To exit this dialog without applying changes, click on
<guibutton>Cancel</guibutton> or hit &Esc;.</para>

<para>The dialog is divided into four main sections:</para>
<variablelist>
<varlistentry>
<term><guilabel>Available Filters</guilabel></term>
<listitem><para>This group contains the list of filters and action
buttons to modify the filters, namely to create new filters, to move
them up or down the list, or to delete and rename them. If you select
a filter from the list, its properties are shown in the right-hand half
of the dialog.</para></listitem>
</varlistentry>
<varlistentry>
<term><guilabel>Filter Criteria</guilabel></term> <listitem><para>In
this group you can edit the pattern that messages must match for the
filter to be applied to them. You can select here whether all of the
defined rules must match or whether it suffices that any one of them
matches. See <link linkend="filter-criteria">Search Patterns</link>
below for a detailed description of each search rule type.</para>

<para> You can click on <guibutton>More</guibutton> to get an
additional (initially empty) rule if you want to define more complex
patterns and on <guibutton>Fewer</guibutton> to remove the last
rule. <guibutton>Clear</guibutton> clears the pattern, &ie; it removes
all but two rules from screen and resets those two.</para>

<para>Invalid or empty rules are not evaluated. In fact, they are
removed internally. Whether a given rule is considered invalid depends
on the type of rule, but as a rule of thumb you can assume that rules
are considered invalid if the domain (the first combobox in
each row) or the search string (the line edit at the end of each row)
is empty. Thus, to effectively delete a particular rule, you only
need to empty one of those two edit fields.</para></listitem>
</varlistentry>
<varlistentry>
<term><guilabel>Filter Actions</guilabel></term> <listitem><para>In
this group you can edit the list of actions that is applied to all
messages that match the defined search pattern. See <link
linkend="filter-action">Filter Actions</link> below for a detailed
description of each action type.</para>

<para> You can click on <guibutton>More</guibutton> to get a new,
empty action if you want to define more than one action and on
<guibutton>Fewer</guibutton> to remove the last
action. <guibutton>Clear</guibutton> clears the list, &ie; it
removes all but one action and resets that one.</para>

<para>Invalid or empty actions are not executed. In fact, they are
removed internally. Whether a given action is considered invalid
depends on the type of action, but as a rule of thumb you can assume
that actions are considered empty if no type is selected or - in case
of actions that need a textual parameter (&ie; one which must be
entered into a line edit) - the parameter is empty. Thus, to
effectively delete a particular action, you only need to unset its
type, &ie; select the last (empty) item in the type combo
box.</para></listitem>
</varlistentry>
<varlistentry>
<term><guilabel>Advanced options</guilabel></term><listitem><para> In
this group you can define a few advanced options for filters, that
allow you to refine your filtering.</para> <para>Using the combo box,
you can toggle the applicability of the corresponding filter: The
<guilabel>incoming</guilabel> choice shows that it may be considered
for incoming mails (&ie; on <guimenuitem>Check Mail</guimenuitem>),
while the <guilabel>outgoing</guilabel> choice shows the same for
outgoing mails (&ie; on <guimenuitem>Send</guimenuitem>).</para>
<note><para>Note that it is currently not possible to define a filter
that is not considered for manual filtering. This is a known
limitation. </para></note></listitem>
</varlistentry>
</variablelist>

<note><para>Filters are automatically named unless you explicitely
rename them using the <guibutton>Rename...</guibutton> button.
The dialog assumes that it should continue auto-naming the filter
as long as the filter name starts with <quote>&lt;</quote>.
</para></note>

<para>Click on the <guibutton>OK</guibutton> button to apply all
changes and close the dialog, <guibutton>Apply</guibutton> to apply
all changes and leave the dialog open, and
<guibutton>Cancel</guibutton> to close the dialog without applying any
changes.</para>

<note>
<para> If you apply filter changes, &ie; via
<guibutton>OK</guibutton> or <guibutton>Apply</guibutton>, only valid
filters are actually copied to the internal filter manager.</para>

<para>A filter is considered invalid if</para>

<orderedlist>
<listitem><para>the search pattern contains only empty rules or</para></listitem>
<listitem><para>the action list is empty.</para></listitem>
</orderedlist>

<para>Simlilarly, empty rules and actions are removed from the pattern
and action list respectively, before the filter is saved.</para>
</note>

</sect2>

<sect2 id="filter-criteria">
<title>Search Patterns</title>

<para>The most common use of filters is to filter on the sender of
messages. This can be done by choosing <guilabel>From</guilabel>. A
good bet for a mailing list would be <guilabel>&lt;To or
Cc&gt;</guilabel>. But there are other criteria a filter can search
for:</para>

<variablelist>
<varlistentry>
<term><guilabel>&lt;message&gt;</guilabel></term>
<listitem>
<para>Searches the whole message (&ie; headers, body and attachments,
if any).</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>&lt;body&gt;</guilabel></term>
<listitem>
<para>Searches the body of the message.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>&lt;any header&gt;</guilabel></term>
<listitem>
<para>Searches the headers of the message.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>&lt;To or Cc&gt;</guilabel></term>
<listitem>
<para>Searches the <quote>To</quote> and <quote>Cc</quote> header fields of the message.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>&lt;size&gt;</guilabel></term>
<listitem>
<para>Sets upper or lower bounds on the message size.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>&lt;age in days&gt;</guilabel></term>
<listitem>
<para>Sets upper or lower bounds on the message age.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Any other string</term>
<listitem>
<para>Searches the header field that is given by that string.</para>
</listitem>
</varlistentry>
</variablelist>

</sect2>

<sect2 id="filter-action">
<title>Filter Action</title>

<para>The most common use of filters is to sort incoming messages to
certain folders. This can be done by choosing <guilabel>move to
folder</guilabel>. Here's a list of all possible actions:</para>

<variablelist>
<varlistentry>
<term><guilabel>move to folder</guilabel></term>
<listitem>
<para>This will move the message to another folder. You currently 
cannot use <acronym>IMAP</acronym> folders as a target.</para>
</listitem>
</varlistentry>
<!-- TODO: does not exist yet
<varlistentry>
<term><guilabel>copy to folder</guilabel></term>
<listitem>
<para>This will copy the message to another folder.</para>
<caution><para>You currently cannot use <acronym>IMAP</acronym>
folders as a target.</para></caution>
</listitem>
</varlistentry>
-->
<varlistentry>
<term><guilabel>mark as</guilabel></term>
<listitem>
<para>This allows you to mark the message as read or important (flagged), but
also as forwarded, replied, &etc;</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>set identity to</guilabel></term>
<listitem>
<para>This will set <emphasis>your</emphasis> identity if you reply to this
message.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>set transport to</guilabel></term>
<listitem>
<para>This will set the method of transport (&eg; <acronym>SMTP</acronym>) if
you reply to the message.</para>
</listitem>
</varlistentry> 
<varlistentry>
<term><guilabel>set Reply-To to</guilabel></term>
<listitem><para>Will modify the <guilabel>Reply-To</guilabel> field of this
message. This can be useful for mailing lists that automatically set a Reply-To
which you don't like.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>forward to</guilabel></term>
<listitem><para>Will forward the message to another email address.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>redirect to</guilabel></term>
<listitem><para>Will redirect the message to another email address.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>bounce</guilabel></term> <listitem><para>Will try to
return the message to the sender as undeliverable.</para>

<caution><para>This will only work if the senders email address is
valid. That's <emphasis>not</emphasis> the case for most
spam.</para></caution>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>confirm delivery</guilabel></term>
<listitem><para>Will try to return a message to the sender that
indicates successful delivery of his or her message.</para> <para>This
action allows you to select who will get
delivery receipts from you. Though you can enable the sending of
delivery confirmations in the <guilabel>Configure &kmail;...</guilabel> dialog (section
<guilabel>Security</guilabel>) we recommended to not send them to
everyone, since this makes tracking of &eg; spam very easy for
the sender.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>remove header</guilabel></term>
<listitem>
<para>Will remove <emphasis>all</emphasis> header fields with the
given name from the message. This is useful mainly for removing bogus
<quote>Reply-To:</quote> headers.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>add header</guilabel></term>
<listitem>
<para>If no such field is already present, will add a new header field
with the given name and value to the message. If there is already a
header field with that name, it is overwritten with the new (the
given) value. If there are already multiple headers with the given
name (&eg; <quote>Received:</quote> headers), an arbitrary one of them is
overwritten and the others are left unchanged. This is a known
limitation. You may want to combine this filter with the
<guilabel>remove header</guilabel> filter above to make sure that
there are no other headers with that name in the message.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>rewrite header</guilabel></term>
<listitem>
<para>Will scan the given header field, modify its contents and write
it back. The search string is always interpreted as a case-sensitive
regular expression. The replacement string is inserted literally
except for occurences of <userinput>\n</userinput>,
<userinput>$n</userinput> and <userinput>${nn}</userinput>, where
<userinput>n</userinput> is a positive (single-digit, except for the
third form) number or <userinput>0</userinput>. These constructs are
interpreted as backreferences to substrings captured with parantheses
in the search string.</para><para>Analogous restictions as in the
<guilabel>add header</guilabel> action apply here, too.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>execute command</guilabel></term>
<listitem>
<para>This will execute a program, but will not modify the
message. Specify the full path to the program you want to
execute. &kmail; will block until the program returns. You can feed
the program with the parts of the mail: <symbol>&percnt;0</symbol>,
<symbol>&percnt;1</symbol>, &etc; will stand for files representing
the message parts. For common mails <symbol>&percnt;0</symbol> is the
text, <symbol>&percnt;1</symbol> the first attachment and so
on. Additionally, the whole message is fed into the program's
<acronym>stdin</acronym>.</para>

<caution><para>This currently only works if the message has
<emphasis>at least one</emphasis> attachment. No, not even
<symbol>&percnt;0</symbol> will work in the general
case!</para></caution>

<tip><para> You can enter arbitrarily complex shell commands here,
since &kmail; uses a subshell to execute the command line. Therefore,
even this command will work (within its limits):
<userinput><command>uudecode</command> <option>-o</option>
<parameter>$(mktemp kmail-uudecoded.XXXXXX)</parameter> &amp;&amp;
<command>echo</command> <parameter>$'\a'</parameter></userinput></para></tip>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>pipe through</guilabel></term>
<listitem>
<para>This will feed the message to a program. If that program returns
output, the entire message (including the headers) will be replaced
with this output. If the program doesn't return output, the message
won't change.  Specify the full path to the program.</para>
<caution><para>Be cautious with this action, as it will easily mess up
your messages if the filter program does return garbage or extra
lines.</para></caution>
</listitem>
</varlistentry>
</variablelist>

</sect2>

<sect2 id="filter-examples">
<title>Filter Examples</title>

<para>If I am subscribed to the (general) &kde; List, I could create a
folder for the list (I'll call it
<replaceable>KDE-General</replaceable>) and use a filter to
automatically transfer new messages from my inbox to my
<replaceable>KDE-General</replaceable> folder if they are from the
&kde; List. Here is how to create this filter:</para>

<procedure>
<title>Filtering a mailing list</title>
<step>
<para>Try if <menuchoice><guimenu>Message</guimenu><guisubmenu>Create
filter</guisubmenu><guimenuitem>Filter on
Mailing-List...</guimenuitem></menuchoice> can identify the mailing
list (the name of the list should then appear in the menu item). In
this case, this works and I am presented a filter that has
<quote>X-Mailing-List <guilabel>equals</guilabel>
&lt;kde@lists.netcentral.net&gt;</quote> preset. You select the
desired destination folder from the folder pull-down menu in the
<guilabel>Filter Action</guilabel> group and that's it!</para>

<para>If that does not work, think of a unique way of identifying the
messages you want to filter. The (almost) unique property of my &kde;
List messages is that they always contain
<quote>kde@lists.netcentral.net</quote> in the
<guilabel>To:</guilabel> or <guilabel>Cc:</guilabel> field. It's only
almost unique, because this fails for cross-posted messages.</para>
</step>
<step>
<para>Select <menuchoice><guimenu>Settings</guimenu><guimenuitem>Filter
Rules...</guimenuitem></menuchoice>.</para>
</step>
<step>
<para>Press the <guibutton>New</guibutton> button to create an empty
filter. It will appear as <guilabel>&lt;unnamed&gt;</guilabel>.</para>
</step>
<step>
<para>In the <guilabel> Filter Criteria</guilabel> area, select
<guilabel>&lt;To: or Cc:&gt;</guilabel> from the first pull-down menu,
<guilabel>contains</guilabel> from the second pull-down menu, and type
<userinput>kde@lists.netcentral.net</userinput> in the text
field.</para>
</step>
<step>
<para>Skip down to the actions section. Select <guilabel>move to
folder</guilabel> from the first pull-down menu. A new pull-down menu
containing a list of folders will appear. Select the folder that you
want the filtered messages to be transferred to if they match the
criteria you selected. For this example, you would select
<guilabel>KDE-General</guilabel> from the pull-down menu.</para>
</step>
</procedure>

<para>You may find that you need to use more powerful criteria to
properly filter your messages. For example, you may only want to
filter the &kde; List messages that are written by your friend Fred
Johnson &lt;fj@anywhere.com&gt;. This is where the rest of the
matching criteria section comes into play:</para>

<procedure>
<title>Extending the filter</title>
<step>
<para>Open up the <guilabel>Configure Filters...</guilabel> window and select
the filter you just created.</para>
</step>
<step>
<para>Since you want to filter all messages that have
<quote>kde@lists.netcentral.net</quote> in the
<guilabel>To:</guilabel> or <guilabel>Cc:</guilabel> field
<emphasis>and</emphasis> that are from Fred, check the
<guibutton>Match all of the following</guibutton> radio
button.</para>
</step>
<step>
<para>Now, go to the second search rule and select the following from
the pull-down menus: <guilabel>From</guilabel>,
<guilabel>contains</guilabel>. Now, type
<userinput>fj@anywhere.com</userinput> in the text field.</para>
</step>
</procedure>

<para>You now have a filter that transfers all &kde; List messages
that are from fj@anywhere.com.</para>
</sect2>
</sect1>

<sect1 id="multiple-accounts">
<title>Multiple Accounts</title>

<para>Multiple accounts are used to check fro messages from more than one email address
and/or mail server. Select <menuchoice><guimenu>Settings</guimenu>
<guimenuitem>Configure &kmail;...</guimenuitem></menuchoice> and click on the
<guilabel>Network</guilabel> tab to add or change your account settings. See the
<link linkend="getting-started">Getting started</link> section for more
information on the settings in the <guilabel>Network</guilabel> tab.</para>

<para>To check for messages from a particular account, use the
<menuchoice><guimenu>File</guimenu><guimenuitem>Check Mail
in...</guimenuitem></menuchoice> submenu to select the account to check
for mail. You can also press the mouse button on the <guiicon>Check
Mail</guiicon> icon for some time to get a list of accounts.</para>

</sect1>

<sect1 id="pgp">
<!-- This section is from Andreas Gungl, 2000-05-21 -->
<title><application>Pretty Good Privacy</application>
(<application>PGP</application>) / <application>GNU Privacy Guard</application>
(<application>GnuPG</application>)</title>

<para>This is a short introduction on how to setup &kmail;'s
<application>PGP</application> support. It will give some hints on the use of
<application>PGP</application> too. It's written for people who are beginners in
this area. If you are familiar with the use of <acronym>PGP</acronym>, you can
skip most of the steps. This documentation (and the &kmail; user interface) 
generally talks only about  <quote>PGP</quote>, but it applies to 
both <application>PGP</application> and <application>GnuPG</application>, 
although some <application>GnuPG</application> command line parameters 
may be different.</para>

<para>Please
also check out the <link linkend="pgp-faq">&FAQ; item about
<application>PGP</application></link>.</para>

<warning><para>You can encrypt your messages sent with &kmail;, but this does
not mean that the attachments are encrypted. You have to encrypt your
attachments manually, using a shell command or some other tool before you attach
them.</para></warning>

<warning><para>&kmail; has to rely on <application>PGP</application>'s
output. This output is often different between different version of
<application>PGP</application>, so it's important that you test if encryption
really works with your setup before you start using it seriously. &kmail; might
<emphasis>not</emphasis> warn you if something fails. You better enable <guilabel>Show ciphered text
after composing</guilabel>.  </para></warning>

<para>To setup and use <application>PGP</application> support in &kmail; it is
necessary to have <application>PGP</application> installed and set up
properly. Of course we cannot give you a full introduction of
<application>PGP</application> here. We will only mention the steps you have to
do to get <application>PGP</application> going. For details you should have a look at 
the excellent  <application>PGP</application> documentation 
or <ulink url="http://www.gnupg.org/docs.html#guides">The GNU Privacy Handbook</ulink>.</para> 

<para>It is certainly a good idea to study this documentation as well as an
introduction into public key cryptography (&eg; out of the
<application>PGP</application> 6.5.x package). There you can learn a lot about
the basic concepts, which will help you to understand what is going on. As well,
many security related issues you should know about are discussed there.</para>

<para>Now let's start.</para>

<sect2 id="pgp-preconditions">
<title>Preconditions</title>

<para>&kmail; expects that your <application>PGP</application> binary is called
<command>pgp</command>.  In case of <application>GnuPG</application>, it expects
the binary to be called <command>gpg</command>. If that's not the case for you,
just make a symlink.</para>

<para>If you haven't done so, you have to generate a key pair (secret and public
key) for your identity. You must do this at the command line (use
<userinput><command>pgp</command> <option>-kg</option></userinput>).  &kmail;
has no internal support for <application>pgp</application>'s key generation at
this time. The identity (normally your name followed by your email address
within brackets, such as <userinput>John Doe
&lt;john@example.com&gt;</userinput>) and your passphrase are important for the
co-operation between &kmail; and <application>pgp</application>.</para>

</sect2>

<sect2 id="pgp-settings">
<title><application>PGP</application> Related Settings in &kmail;</title>

<para>Enter your <application>PGP</application> user identity in the
corresponding field of the <guilabel>Identity</guilabel> settings.
Then select the <guilabel>PGP</guilabel> tab on
the <guilabel>Security</guilabel> settings page. There you'
ll find the following options:</para>

<variablelist>
<varlistentry>
<term><guilabel>Keep passphrase in memory</guilabel></term>
<listitem>
<para>When this option is off, &kmail; will ask for your passphrase each
time you sign a message (before sending) or select an encrypted message.
If you turn this option on, &kmail; will remember your passphrase from
after your first successful input until you finish your &kmail; session. The
passphrase is stored in memory and not written to the harddisk.</para>
</listitem>
</varlistentry>

<varlistentry>
<term><guilabel>Always encrypt to self</guilabel></term>
<listitem>
<para>If this option is off and you want send an encrypted message to somebody,
then you can't read this message any longer after you have composed and
encrypted it. Turn this option on to keep sent encrypted messages readable for
you too.</para>
</listitem>
</varlistentry>

<varlistentry>
<term><guilabel>Show ciphered text after composing</guilabel></term>
<listitem>
<para>This will show you the result of encrypting and signing before the message
gets sent. This way you can still cancel sending if encrypting failed. It is
strongly recommended to use this option.</para> 
</listitem>
</varlistentry>

<varlistentry>
<term><guilabel>Encryption tool</guilabel></term>
<listitem>
<para>Here you can choose if you want to use <application>PGP</application>,
<application>GnuPG</application> or no encryption
software at all. Of course the program you select has to be
installed on your system. It is also important to select the correct
version.</para>
</listitem>
</varlistentry>
</variablelist>

<para>On the <guilabel>Composer</guilabel> tab you can also check the
<guilabel>Automatically sign messages using PGP</guilabel> option. This means
that all your messages will be signed before being sent. (So you don't have to
set the signing option for each message manually.)</para>

<para>Now you are able to sign outgoing messages. To let people send you
encrypted messages and to let them verify your signature you
must send them your public key or upload your public key to a public
<application>PGP</application> key server so that they can fetch your key from there.
To send encrypted mails to other people or to verify their signed
messages you will need their public keys.  You can store your public key(s) on a
public <application>PGP</application> key server such as <ulink
url="http://www.cam.ac.uk.pgp.net/pgpnet/">http://www.cam.ac.uk.pgp.net/pgpnet/</ulink>.</para>

</sect2>

<sect2 id="pgp-sign-your-messages">
<title>Sign your Messages</title>

<para>You compose your message as usual in the <guilabel>Composer</guilabel>
window of &kmail;. Before you send the message, check the button with the
underlining icon on it in the toolbar of the composer window. Then, you can send
the message. To sign it, &kmail; needs to know your <application>PGP</application> passphrase. If you
didn't select <guilabel>Keep passphrase in memory</guilabel> in the
<guilabel>Security</guilabel> settings tab, &kmail; will ask you for it.  On the
other hand, if you have already given the phrase to &kmail;, it will sign the
message without any further prompt.</para>

</sect2>

<sect2 id="pgp-send-your-public-key">
<title>Send your Public Key</title>

<para>Prepare a message to the person you want to send your public key to. Then
choose in the <guilabel>Composer</guilabel> window's menu
<menuchoice><guimenu>Attach</guimenu><guimenuitem>Attach My Public
Key</guimenuitem></menuchoice>. This will attach your public key to the
mail. Now you can send the mail.</para>

<para>Remember that it's not safe at all if you sign the message to make sure
that the receiver will get the correct key. There can be a man-in-the-middle
attack, as somebody can change the key and sign the message with that other
key. That's why the recipient should verify the attached key by checking the
key's fingerprint against the one he got in a secure way from you. Have a look
at the <application>PGP</application> documentation for further details.</para>

</sect2>

<sect2 id="pgp-you-got-an-encrypted-message">
<title>You got an encrypted Message</title>

<para>All you have to do is to select the message in &kmail;. You will be
prompted for your passphrase. Then &kmail; will try to decrypt the message and
show you the plain text if the message had been encrypted with your public
key. (If not, then you won't be able to read it.) &kmail; stores the messages
encrypted, so nobody can read these messages without knowing your passphrase.</para>

</sect2>

<sect2 id="pgp-receiving-a-public-key">
<title>Receiving a Public Key</title>

<para>You can receive a public key as an attachment or via http, ftp or a floppy.
Before you can use this key to encrypt a message to the owner of the
key, you should verify the key (check its fingerprint or look for
trusted signatures). Then you can add this key to your public keyring
by typing <userinput><command>pgp</command> <option>-ka</option>
<replaceable>filename</replaceable></userinput> at the command line if you are using 
<application>PGP</application> or by typing 
<userinput><command>gpg</command> <option>--import</option>
<replaceable>filename</replaceable></userinput> at the command line if you are using
<application>GnuPG</application>. If the key is not certified with a trusted signature 
and you are using <application>PGP</application>, you can't use it with &kmail; 
to encrypt messages unless you have signed that key (use 
<userinput><command>pgp</command> <option>-ks</option> <replaceable>identity of 
the key</replaceable></userinput>). With <application>GnuPG</application>,
on the other hand, it's currently possible to encrypt messages with
untrusted keys.</para>

</sect2>

<sect2 id="pgp-encrypt-your-messages">
<title>Use Public Keys of other People - Encrypt your Messages</title>

<para>To send an encrypted message to somebody of whom you have a public key,
you simply create the message in the composer window. Before you send the
message, check the button with the lock symbol in the toolbar of the composer
window. Then send the message.</para>

<para>&kmail; always uses the first key which matches the recipient's address to
encrypt the message. If &kmail; can't find a matching key for a
recipient, it will display a list containing all available keys. You
can choose the appropriate key from the list or cancel the action.
&kmail; might also inform you about errors throughout the encryption
process.</para>

<para>As mentioned above, you won't be able to read your own encrypted sent
mails if you don't check <guilabel>Always encrypt to self</guilabel> in the
setting's <guilabel>Security</guilabel> tab.</para>

</sect2>

</sect1>
</chapter>

<chapter id="configure">
<title>Configure &kmail;</title>

<para>&kmail;'s settings window gives you a number of ways to configure &kmail;.</para>

<sect1 id="identity-tab">
<title>Identity Tab</title>

<para>The Identity Tab is described in the <link linkend="getting-started">Getting Started</link>
section.</para>

</sect1>

<sect1 id="network-tab">
<title>Network Tab</title>

<para>The Network Tab is described in the  <link linkend="setting-up-your-account">Setting 
up your Account</link> section.</para>

</sect1>

<sect1 id="appearance-tab">
<title>Appearance Tab</title>

<sect2 id="appearance-tab-fonts">
<title>Fonts</title>

<para>This section allows you to change the type, size and character set of the
display fonts. <guilabel>Message Body</guilabel> sets the font for both
the reader pane and the composer window.<!-- fixme: better wording in the program -->
There's a separate entry for <guilabel>Message List - Date Field</guilabel>
so you can choose a monospaced font for the date field for better readability.</para>

</sect2>

<sect2 id="appearance-tab-colors">
<title>Colors</title>

<para>This section allows you to change the color of the text.
<guilabel>Recycle colors on deep quoting</guilabel> means that even text that's
quoted more than three times will appear in color.</para>

</sect2>

<sect2 id="appearance-tab-layout">
<title>Layout</title>

<para>This section lets you toggle the long folder list on and off.  The long
folder list lists folders all the way down the left side of the &kmail; window,
which lets you see more folders than in the default view, but it takes away some
space for viewing the text of the messages. With <guilabel>Display message
sizes</guilabel> selected there will be another column in the Header pane that
shows the messages' size in bytes. <guilabel>Thread list of message
headers</guilabel> will put all the messages in a kind of tree, so the replies
to a message are below that message.</para>

</sect2>

<sect2 id="appearance-tab-profiles">
<title>Profiles</title>

<para>This section offers several default settings.</para>

</sect2>

<sect2 id="appearance-tab-addressbook">
<title>Addressbook</title>

<para>This section allows you to choose between several address books, whereas
<guilabel>Traditional KMail</guilabel> is a very simple one and
<guilabel>&kaddressbook;</guilabel> is an advanced one - we recommend
to use &kaddressbook;. Note that you need the kdeutils package 
to use <guilabel>KAB</guilabel>.</para>

<para>While the <guilabel>Traditional KMail</guilabel> database is
independent (&ie; you will not see addresses in 
<guilabel>KAB</guilabel>/<guilabel>&kaddressbook;</guilabel> if you
only entered them in the <guilabel>Traditional KMail</guilabel>
address book), <guilabel>KAB</guilabel> and <guilabel>&kaddressbook;</guilabel>
use the same database.</para>

</sect2>

<sect2 id="appearance-tab-messages-scoring">
<title>Messages Scoring</title>

<para>In this section you can manage rules that define a message's score.
If at least one rule is defined for a folder, a <guilabel>Score</guilabel>
column will appear in the Headers pane of that folder. Each rule has a
name, a list of folders where it is active, one or more conditions that
decide wheter the rule matches a message, and one or more actions that get
triggered if a condition is matched. This concept is very similar to that
of <link linkend="filters">filters</link>.</para>

<para>The most useful action is <guilabel>adjust score</guilabel>. It will
increase or decrease the score of a message. The idea is that important
messages have a high score and you can then use the
<guilabel>Score</guilabel> column to sort your messages.</para>

<para>The <guilabel>display message</guilabel> action will display
a dialog when you enter a folder with a matching message.</para>

<!-- fixme?: date + less than/greater than broken in kmail -->
<!-- fixme?: "group" wording in program -->

</sect2>

</sect1>

<sect1 id="composer-tab">
<title>Composer Tab</title>

<sect2 id="composer-tab-general">
<title>General</title>

<para>The <guilabel>Phrases</guilabel> section lets you define the automatically
generated lines that are added to message replies, forwarded messages, and quoted
text. There are special &percnt;-denoted characters that will insert certain
values. These are shown at the top of the <guilabel>Phrases</guilabel> section:
<symbol>%D</symbol> to insert the date, <symbol>%S</symbol> to insert the
subject, <symbol>%F</symbol> to insert the sender, <symbol>%%</symbol> to insert
a percent sign, <symbol>%_</symbol> to insert a space, and <symbol>%L</symbol> 
to insert a line break.
The <guilabel>Indentation</guilabel> field contains the character that will denote
quoted text (you will probably want to use the default).</para>

<para><guilabel>Automatically append signature</guilabel> lets you toggle
whether to automatically include your signature as defined in the 
<link linkend="setting-your-identity">identity tab</link>.</para>

<para><guilabel>Use smart quoting</guilabel> will break long lines but will try
to keep the correct quoting (&eg; the <quote>&gt; </quote> will always be at the
start of the line).</para>

<para><guilabel>Automatically sign messages using PGP</guilabel> lets you toggle
whether to automatically sign your messages by default. Of course you can still
deselect the icon in the composer window for each message if necessary.</para>

<para><guilabel>Word wrap at column</guilabel> lets you turn word wrapping on
and off in the <guilabel>Composer window</guilabel> and lets you set the column
at which words will be wrapped (you probably should not need to change
the default value, which is <userinput>78</userinput>).</para>

</sect2>

<sect2 id="composer-tab-editor">
<title>Editor</title>

<para>If you don't like the <guilabel>Composer</guilabel> you can use a
different editor. Note that the <guilabel>Composer</guilabel> window will still open and
the external editor will open as soon as you type just one character in the body
of the message. If you're done, save the text and exit the editor. The text will
now appear in the <guilabel>Composer</guilabel> window, where you can send
it.</para>

</sect2>

<sect2 id="composer-tab-subject">
<title>Subject</title>

<para>This section contains a list of prefixes for <quote>Reply</quote> and
<quote>Forward</quote>. If you receive messages that use prefixes different
to the standard ones, you can add them here so &kmail; will recognize 
them (this way &kmail; can ignore them for sorting messages and 
optionally replace them).</para>

</sect2>

<sect2 id="composer-tab-charset">
<title>Charset</title>

<para>In the <guilabel>Available charsets</guilabel> section you can manage the
charsets available for your own messages. The charsets in this list appear in
the composer's <menuchoice><guimenu>Options</guimenu><guimenuitem>Set
Encoding</guimenuitem></menuchoice> menu.</para>

<para>The <guilabel>Default charset</guilabel> section lets you choose the
default charset for your own messages. If you select <guilabel>Use own default
charset when replying or forwarding</guilabel>, the original message's charset
will be ignored and your charset will be used for replying and
forwarding.</para>

</sect2>

</sect1>

<sect1 id="mime-tab">
<title>&MIME; Headers Tab</title>
<!-- fixme in kmail, too: "headers tab" -->

<para>The <guilabel>Create own Message-Id headers</guilabel> section lets you define
how your messages' Message-Id field will be generated. The Message-Id
must have a suffix that's world-wide unique. Depeding on your setup,
this might already be the case. You should send yourself a message and
look at its headers. If it contains a Message-Id that ends in
<quote>localhost</quote> or any other string that's not guaranteed to
be unique you need to select <guilabel>Create own Message-Id
headers</guilabel> and set a unique suffix. The best thing is to 
use the name of a domain which you are the owner of.</para>

<para>The <guilabel>Define custom mime header tags</guilabel> section
sets the headers that &kmail; will use for its outgoing messages. You
can both invent new fields and overwrite existing ones. This feature
is only useful for advanced users.</para>

</sect1>

<sect1 id="security-tab">
<title>Security Tab</title>

<sect2 id="security-tab-general">
<title>General</title>

<para><guilabel>Prefer HTML to plain text</guilabel> will show
<acronym>HTML</acronym> messages with their <acronym>HTML</acronym>
formatting and layout. We strongly recommend to leave this option off, as
security problems with <acronym>HTML</acronym> might show up. When
this option is off, you can still read <acronym>HTML</acronym>
messages, but only as plain text.</para>

<para><guilabel>Load external references from the net</guilabel>
will  load external images, style sheets &etc; from the internet when
you look at an <acronym>HTML</acronym> message. We strongly recommend
to leave this  option off (although it has no effect if
<guilabel>Prefer HTML to plain  text</guilabel> is off already). By
adding external references to their mails, people sending spam can
detect that you have looked at their message. Note that this option
has no effect on Java, Javascript and Plugins - these are disabled
anyway and cannot be enabled at all.</para>

<para><guilabel>Automatically send receive and read
confirmations</guilabel> will automatically send a confirmation (in
form of a new message) to the sender of a message if he requested
that. If you leave this option off, no confirmation will be sent. We
recommend to leave this option off. If you want to send confirmations
to certain people you can do so by using the <guilabel>confirm
delivery</guilabel> filter action.</para>

</sect2>

<sect2 id="security-tab-pgp">
<title>PGP</title>

<para>For the <guilabel>PGP</guilabel> tab please see the <link
linkend="pgp-settings"><application>PGP</application>
section</link>.</para>

</sect2>

</sect1>

<sect1 id="misc-tab">
<title>Miscellaneous Tab</title>

<sect2 id="misc-tab-trash-folder">
<title>Trash folder</title>

<variablelist>
<varlistentry>
<term><guilabel>Empty trash on exit</guilabel></term>
<listitem>
<para>The trash folder is cleared of messages when you quit &kmail; if this
option is selected. The following two options are disabled, if this one
is enabled.</para> 
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>Keep trash size below...</guilabel></term>
<listitem>
<para>On exit, delete old messages if the trash folder becomes bigger than this limit.</para> 
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>In trash, on exit, remove messages older than...</guilabel></term>
<listitem>
<para>The trash folder is cleared of messages older than the given age 
when you quit &kmail;, if this option is selected.</para> 
</listitem>
</varlistentry>
</variablelist>

</sect2>

<sect2 id="misc-tab-folders">
<title>Folders</title>

<variablelist>
<varlistentry>
<term><guilabel>Send Mail in outbox Folder on Check</guilabel></term>
<listitem>
<para>All messages queued in the outbox folder will be sent whenever you check
for new mail.</para> 
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>Compact all folders on exit</guilabel></term>
<listitem>
<para>This will compact all folders every time you exit &kmail;. Compacting
folders means that the messages you deleted will really be
removed.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>Confirm before emptying folders</guilabel></term>
<listitem>
<para>To empty a folder means that its messages get transferred to the
<guilabel>trash</guilabel> folder (and only get deleted if they are already in the
<guilabel>trash</guilabel> folder).  So although you normally won't lose any
mail, you can still activate a confirmation dialog that will ask you if you
really want to emtpy the folder.</para>
</listitem>
</varlistentry>
</variablelist>

</sect2>

<sect2 id="misc-tab-new-mail-notification">
<title>New Mail Notification</title>

<variablelist>
<varlistentry>
<term><guilabel>New Mail Notification</guilabel></term>
<listitem>
<para>This let's you configure actions for the arrival of new mail. Note that
automatically fetching messages can be configured in your account settings under <link
linkend="receiving-mail">Incoming Mail</link>.</para>
</listitem>
</varlistentry>
</variablelist>

</sect2>

</sect1>

</chapter>


<chapter id="menus">
<title>Menus and Keyboard Shortcuts</title>

<para>Each menu item is discussed below. When there is a keyboard shorcut that
performs a menu item function, it is listed with the menu item.</para>

<sect1 id="main-mail-reader-window">
<title>The Main Window</title>

<sect2 id="reader-file-menu">
<title><guimenu>File</guimenu> Menu</title>

<variablelist>
<varlistentry>
<term>
<menuchoice>
<guimenu><accel>F</accel>ile</guimenu>
<guimenuitem><accel>N</accel>ew Mail Client...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Creates a new main window.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycombo action="simul">&Ctrl;<keycap>S</keycap></keycombo>
</shortcut>
<guimenu><accel>F</accel>ile</guimenu>
<guimenuitem>Save <accel>A</accel>s...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Saves the currently displayed message to a text file, including all the headers
and attachments.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycombo action="simul">&Ctrl;<keycap>P</keycap></keycombo>
</shortcut>
<guimenu><accel>F</accel>ile</guimenu>
<guimenuitem><accel>P</accel>rint...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Prints the currently displayed message.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>F</accel>ile</guimenu>
<guimenuitem>Compact all <accel>f</accel>olders</guimenuitem>
</menuchoice></term>
<listitem>
<para>Will compact all folders, &ie; it will really move and delete the messages
on disk according to how you have moved and deleted them in &kmail;.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycombo action="simul">&Ctrl;<keycap>L</keycap></keycombo>
</shortcut>
<guimenu><accel>F</accel>ile</guimenu>
<guimenuitem>Check <accel>M</accel>ail</guimenuitem>
</menuchoice>
</term>
<listitem><para>Checks for new messages in all your accounts, except those that
have <guilabel>Exclude from &quot;Check Mail&quot;</guilabel> enabled.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>F</accel>ile</guimenu>
<guisubmenu>Check Mail in</guisubmenu>
</menuchoice>
</term>
<listitem>
<para>Submenu that lets you check for new messages from a particular account.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>F</accel>ile</guimenu>
<guimenuitem><accel>S</accel>end Queued</guimenuitem>
</menuchoice></term>
<listitem>
<para>Sends the messages that are in your outbox.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>F</accel>ile</guimenu>
<guimenuitem>Address <accel>B</accel>ook...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens up the <link linkend="the-address-book">Address Book</link>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>F</accel>ile</guimenu>
<guimenuitem><accel>I</accel>mport...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Starts up <application>kmailcvt</application> (which is part of kdenetwork).
This application lets you import messages from several proprietary mail clients to
&kmail;.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycombo action="simul">&Ctrl;<keycap>W</keycap></keycombo>
</shortcut>
<guimenu><accel>F</accel>ile</guimenu>
<guimenuitem><accel>C</accel>lose</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Closes the current main window or exits
&kmail; if there's only this one window.</para>
</listitem>
</varlistentry>

</variablelist>

</sect2>

<sect2 id="reader-edit-menu">
<title><guimenu>Edit</guimenu> Menu</title>

<variablelist>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycombo action="simul">&Ctrl;<keycap>Z</keycap></keycombo>
</shortcut>
<guimenu><accel>E</accel>dit</guimenu>
<guimenuitem>Und<accel>o</accel></guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Revoke you last move or delete action. Note that you cannot undo a deletion
in the trash.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycombo action="simul">&Ctrl;<keycap>C</keycap></keycombo>
</shortcut>
<guimenu><accel>E</accel>dit</guimenu>
<guimenuitem><accel>C</accel>opy text</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Copies selected text to the clipboard.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycap>D</keycap>
</shortcut>
<guimenu><accel>E</accel>dit</guimenu>
<guimenuitem><accel>D</accel>elete</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Moves the selected messages in the trash folder. If the selected
messages are already in the trash folder, they will really be deleted.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycap>S</keycap>
</shortcut>
<guimenu><accel>E</accel>dit</guimenu>
<guimenuitem><accel>S</accel>earch messages...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens up a search window that lets you search for messages with
certain characteristics, &eg; a certain subject. Start the search by entering
some values and press <guibutton>Search</guibutton>. Click on one of the
resulting messages and it will appear in the <guilabel>Message
pane</guilabel>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycombo action="simul">&Ctrl;<keycap>F</keycap></keycombo>
</shortcut>
<guimenu><accel>E</accel>dit</guimenu>
<guimenuitem><accel>F</accel>ind in message...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Lets you search for a string in the current message.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycap>K</keycap></shortcut><guimenu><accel>E</accel>dit</guimenu>
<guimenuitem>Sele<accel>c</accel>t all messages</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Selects all messages in the current folder.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycombo action="simul">&Ctrl;<keycap>A</keycap></keycombo></shortcut>
<guimenu><accel>E</accel>dit</guimenu>
<guimenuitem>Select message <accel>t</accel>ext</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Selects the text of the currently displayed message.</para>
</listitem>
</varlistentry>

</variablelist>

</sect2>


<sect2 id="reader-view-menu">
<title><guimenu>View</guimenu> Menu</title>

<!-- LW: This really needs to be broken up to one varlistentry per menu item, fixme -->

<variablelist>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>V</accel>iew</guimenu>
<guimenuitem><accel>B</accel>rief</guimenuitem>
</menuchoice>
<menuchoice>
<guimenu><accel>V</accel>iew</guimenu>
<guimenuitem><accel>F</accel>ancy Headers</guimenuitem>
</menuchoice>
<menuchoice>
<guimenu><accel>V</accel>iew</guimenu>
<guimenuitem><accel>S</accel>tandard Headers</guimenuitem>
</menuchoice>
<menuchoice>
<guimenu><accel>V</accel>iew</guimenu>
<guimenuitem><accel>L</accel>ong Headers</guimenuitem>
</menuchoice>
<menuchoice>
<guimenu><accel>V</accel>iew</guimenu>
<guimenuitem><accel>A</accel>ll Headers Headers</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Changes the number of headers that are displayed and the format of the
headers in the <guilabel>Message pane</guilabel>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>V</accel>iew</guimenu>
<guimenuitem>Iconic Attachments</guimenuitem>
</menuchoice>
<menuchoice>
<guimenu><accel>V</accel>iew</guimenu>
<guimenuitem>Smart Attachments</guimenuitem>
</menuchoice>
<menuchoice>
<guimenu><accel>V</accel>iew</guimenu>
<guimenuitem>Inlined Attachments</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Changes the way that attachments appear in the <guilabel>Message
pane</guilabel>.</para>
</listitem>
</varlistentry>

</variablelist>

</sect2>

<sect2 id="reader-folder-menu">
<title><guimenu>Folder</guimenu> Menu</title>

<variablelist>

<varlistentry>
<term>
<menuchoice>
<guimenu>F<accel>o</accel>lder</guimenu>
<guimenuitem><accel>C</accel>reate...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens the <guilabel>Create Folder</guilabel> dialog which lets you create
a new folder.  You can make this new folder a sub folder if you choose a parent
folder using the <guilabel>File under</guilabel> selection. If you're going to
use this folder for a mailing list you may want to add the mailing list address
in the <guilabel>Associated Mailing List</guilabel> tab. You can then use
the <menuchoice><guimenu>Message</guimenu><guimenuitem>Reply
list...</guimenuitem></menuchoice> menu item. It will open a reply with the
mailing list address in the <guilabel>To:</guilabel> field (&ie; it will ignore
the <token>Reply-To</token> of the message).  You can also click the
<mousebutton>middle</mousebutton> mousebutton in the Folders pane to post to a
mailing list that is associated with that folder.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>F<accel>o</accel>lder</guimenu>
<guimenuitem><accel>P</accel>roperties...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens up the <guilabel>Modify Folder</guilabel> dialog which lets you
change the settings for the selected folder.</para> 
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>F<accel>o</accel>lder</guimenu>
<guimenuitem>C<accel>o</accel>mpact</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Compacts the folder file to reduce its disk space usage. Use this command
if your mailboxes seem to be much larger than they ought to be.
<!-- TODO: explain? --></para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>F<accel>o</accel>lder</guimenu>
<guimenuitem><accel>E</accel>mpty</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Moves all of the messages in the selected folder into the trash folder.
If the selected folder is the trash folder, the messages are permanently
deleted.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>F<accel>o</accel>lder</guimenu>
<guimenuitem><accel>R</accel>emove</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Removes the selected folder.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>F<accel>o</accel>lder</guimenu>
<guimenuitem><accel>P</accel>refer HTML to plain text</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>This will show <acronym>HTML</acronym> messages using
<acronym>HTML</acronym> rendering. For security reasons, we recommend to only
activate this for trusted messages.</para> 
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>F<accel>o</accel>lder</guimenu>
<guimenuitem><accel>T</accel>hread messages</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Shows the messages in the <guilabel>Header pane</guilabel>
in a tree-like list, with replies showing up directly under the message
they reply to.</para>
</listitem>
</varlistentry>

</variablelist>

</sect2>

<sect2 id="reader-message-menu">
<title><guimenu>Message</guimenu> Menu</title>

<variablelist>
<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycombo action="simul">&Ctrl;<keycap>N</keycap></keycombo>
</shortcut>
<guimenu><accel>M</accel>essage</guimenu>
<guimenuitem>New Message...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens the <guilabel>Composer</guilabel> window so you can write a new
mail. If the current folder holds a mailing list and has a <guilabel>Post 
Address</guilabel> defined, this address will be default <guilabel>To:</guilabel>
address.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycap>N</keycap>
</shortcut>
<guimenu><accel>M</accel>essage</guimenu>
<guimenuitem><accel>N</accel>ext</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Selects the next message in the Headers pane. The keyboard shortcut
<keycap>Right Arrow</keycap> also performs this action.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycap>+</keycap>
</shortcut>
<guimenu><accel>M</accel>essage</guimenu>
<guimenuitem>Next Unread</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Selects the next unread message in the Headers pane.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycap>P</keycap>
</shortcut>
<guimenu><accel>M</accel>essage</guimenu>
<guimenuitem><accel>P</accel>revious</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Selects the previous message in the Headers pane.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycap>-</keycap>
</shortcut>
<guimenu><accel>M</accel>essage</guimenu>
<guimenuitem>Previous Unread</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Selects the previous unread message in the Headers pane.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycap>R</keycap>
</shortcut>
<guimenu><accel>M</accel>essage</guimenu>
<guimenuitem><accel>R</accel>eply...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens up the <guilabel>Composer</guilabel> window with the contents of the
selected message's <guilabel>Reply-To</guilabel> field in the
<guilabel>To:</guilabel> field.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycap>A</keycap>
</shortcut>
<guimenu><accel>M</accel>essage</guimenu>
<guimenuitem>Reply <accel>A</accel>ll...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens up the <guilabel>Composer</guilabel> window and copies the contents
of the selected message's <guilabel>Reply-To:</guilabel> and
<guilabel>To:</guilabel> fields into the <guilabel>To:</guilabel> field, and the
<guilabel>Cc:</guilabel> field into the <guilabel>Cc:</guilabel> field of the
<guilabel>Composer</guilabel> window.</para> 
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycap>L</keycap>
</shortcut>
<guimenu><accel>M</accel>essage</guimenu>
<guimenuitem>Reply <accel>L</accel>ist...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens up the <guilabel>Composer</guilabel> with the <guilabel>To:</guilabel>
field set to the mailing list address. Of course this will only work
if you configured the current folder to be associated with a mailing list.
Otherwise the <guilabel>To:</guilabel> field will be empty.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycombo action="simul">&Alt;<keycap>R</keycap></keycombo>
</shortcut>
<guimenu><accel>M</accel>essage</guimenu>
<guimenuitem>Reply <accel>w</accel>ithout quote...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens up the <guilabel>Composer</guilabel> to reply but does not quote the
text of the original message.</para>
</listitem>
</varlistentry>

<varlistentry>
<term><menuchoice>
<shortcut>
<keycap>F</keycap>
</shortcut>
<guimenu><accel>M</accel>essage</guimenu>
<guimenuitem><accel>F</accel>orward...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Forwards the message to a new recipient. The message's text will be copied
into the body of the new message with a text marking the forwarded part. Attachments
will be forwarded, too.</para>
</listitem>
</varlistentry>

<varlistentry>
<term><menuchoice>
<shortcut>
<keycap>F</keycap>
</shortcut>
<guimenu><accel>M</accel>essage</guimenu>
<!-- fixme in kmail: "f" twice as accel -->
<guimenuitem><accel>F</accel>orward as attachment</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Forwards the message to a new recipient as an attachment. Attachments
in the original message will also be in the forwarded message's attachment.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycap>E</keycap>
</shortcut>
<guimenu><accel>M</accel>essage</guimenu>
<guimenuitem>R<accel>e</accel>direct...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Works like forward, except that the message stays the same (even
the <guilabel>From</guilabel> field). The user who redirected the message is
added in special header fields (<literal>Redirect-From</literal>,
<literal>Redirect-Date</literal>, <literal>Redirect-To</literal>,
&etc;).</para> 
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>M</accel>essage</guimenu>
<guimenuitem><accel>B</accel>ounce...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Sends the message back to the sender with a notice that it cannot be
delivered. This is nearly exactly the message you get from a mail relay if the
user does not exist. Some people use this option to <quote>reply</quote> to spam.</para> 
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>M</accel>essage</guimenu>
<guimenuitem>Send a<accel>g</accel>ain...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Sends the message again.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>M</accel>essage</guimenu>
<guisubmenu>Set <accel>E</accel>ncoding</guisubmenu>
</menuchoice>
</term>
<listitem>
<para>Lets you choose the character encoding to be used in the Message
Pane.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycap>T</keycap>
</shortcut>
<guimenu><accel>M</accel>essage</guimenu>
<guimenuitem>Edi<accel>t</accel></guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Edits the selected message if it is editable. Only messages in the
<guilabel>outbox</guilabel> and <guilabel>drafts</guilabel> folder can be edited.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>M</accel>essage</guimenu>
<guisubmenu><accel>C</accel>reate filter</guisubmenu>
</menuchoice>
</term>
<listitem>
<para>Opens up the <link linkend="filter-dialog-id">Filter dialog</link> with a new filter added.
This new filter is based on the fields of the current mail.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>M</accel>essage</guimenu>
<guisubmenu>Set Status</guisubmenu>
</menuchoice>
</term>
<listitem>
<para>Allows you to change the status of the selected message to one of the
below (more than one status per message is currently not supported):</para>
<!-- fixme: more than one somewhen supported? -->

<itemizedlist>
<listitem>
<para><guimenuitem>New</guimenuitem></para>
</listitem>
<listitem>
<para><guimenuitem>Unread</guimenuitem></para>
</listitem>
<listitem>
<para><guimenuitem>Read</guimenuitem></para>
</listitem>
<listitem>
<para><guimenuitem>Replied</guimenuitem></para>
</listitem>
<listitem>
<para><guimenuitem>Queued</guimenuitem></para>
</listitem>
<listitem>
<para><guimenuitem>Sent</guimenuitem></para>
</listitem>
</itemizedlist>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>M</accel>essage</guimenu>
<guisubmenu><accel>M</accel>ove to</guisubmenu>
</menuchoice>
</term>
<listitem>
<para>Moves all of the selected messages to a certain folder.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>M</accel>essage</guimenu>
<!-- fixme in kmail: "c" is accel twice -->
<guisubmenu><accel>C</accel>opy to</guisubmenu>
</menuchoice>
</term>
<listitem>
<para>Copies all of the the selected messages to a certain folder.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycombo action="simul">&Ctrl;<keycap>J</keycap></keycombo>
</shortcut>
<guimenu><accel>M</accel>essage</guimenu>
<guimenuitem>Apply Filters</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Applies your filters to the selected messages.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>M</accel>essage</guimenu>
<guimenuitem>View Source...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Shows the message and its complete headers in plain text format in a new
window. This can be useful to find out the origin of a mail. You should know
that it's easy to fake the <literal>From:</literal> header of a mail, but
one can still find out which mail servers have been used by looking
at the <literal>Received:</literal> lines in the header.</para>
</listitem>
</varlistentry>

</variablelist>
</sect2>


<sect2 id="reader-settings-menu">
<title><guimenu>Settings</guimenu> Menu</title>

<variablelist>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>S</accel>ettings</guimenu>
<guimenuitem>Show <accel>T</accel>oolbar</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>If enabled, the Toolbar is visible (the Toolbar is the one with the icon
to compose a new message &etc;).</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>S</accel>ettings</guimenu>
<guimenuitem>Show St<accel>a</accel>tusbar</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>If enabled, the Statusbar is visible (the Statusbar is the small one on
the bottom which shows useful short messages and link targets).</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>S</accel>ettings</guimenu>
<guimenuitem>Configure <accel>K</accel>ey Bindings...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens a window that lets you configure the keyboard shortcuts for many
menu commands.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>S</accel>ettings</guimenu>
<guimenuitem>Configure Tool<accel>b</accel>ars...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens a window that lets you choose which icons are visible in the
toolbar.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>S</accel>ettings</guimenu>
<guimenuitem><accel>C</accel>onfigure KMail...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens the <link linkend="configure">Configure</link> window.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>S</accel>ettings</guimenu>
<guimenuitem>Configure F<accel>i</accel>lters...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens the <link linkend="filters">Configure Filters...</link> window.</para>
</listitem>
</varlistentry>

</variablelist>

</sect2>

<sect2 id="reader-help-menu">
<title><guimenu>Help</guimenu> Menu</title>

<variablelist>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycap>F1</keycap>
</shortcut>
<guimenu><accel>H</accel>elp</guimenu>
<guimenuitem><accel>C</accel>ontents</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Invokes the &kde; help system with the &kmail; help pages
displayed.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycombo action="simul"><keycap>Shift</keycap><keycap>F1</keycap></keycombo>
</shortcut>
<guimenu><accel>H</accel>elp</guimenu>
<guimenuitem>What's <accel>T</accel>his?</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Selecting this option changes the cursor to an arrow with a question
mark. If you now click on any component of the control panel pane, you get short
context sensitive help about that item (sorry, this feature is not implemented yet
for most parts of &kmail;).</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>H</accel>elp</guimenu>
<guimenuitem><accel>R</accel>eport Bug...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens a window for you to report a bug. You have to be connected
to the Internet to send the bug report.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>H</accel>elp</guimenu>
<guimenuitem><accel>A</accel>bout KMail</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Displays information about &kmail; (version, authors, license agreement).</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>H</accel>elp</guimenu>
<guimenuitem>About <accel>K</accel>DE</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Displays information about &kde;.</para>
</listitem>
</varlistentry>

</variablelist>
</sect2>
</sect1>


<sect1 id="composer-window-menus">
<title>The Composer Window</title>

<sect2 id="composer-file-menu">
<title><guimenu>Message</guimenu> Menu</title>

<variablelist>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycombo action="simul">&Ctrl;<keycap>Return</keycap></keycombo>
</shortcut>
<guimenu><accel>M</accel>essage</guimenu>
<guimenuitem><accel>S</accel>end</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Sends the message immediately.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>M</accel>essage</guimenu>
<guimenuitem><accel>Q</accel>ueue</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Queues the message in the outbox for sending it later.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>M</accel>essage</guimenu>
<guimenuitem>Save in <accel>d</accel>rafts folder</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Save the message in the <guilabel>drafts</guilabel> folder so you can edit
and send it later.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>M</accel>essages</guimenu>
<guimenuitem><accel>I</accel>nsert File...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Inserts the selected text file into the message, starting at the cursor
position.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycombo action="simul">&Ctrl;<keycap>P</keycap></keycombo>
</shortcut>
<guimenu><accel>M</accel>essage</guimenu>
<guimenuitem><accel>P</accel>rint...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Prints the current text.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>M</accel>essage</guimenu>
<guimenuitem><accel>A</accel>ddressbook...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens up the address book.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycombo action="simul">&Ctrl;<keycap>N</keycap></keycombo>
</shortcut>
<guimenu><accel>M</accel>essage</guimenu>
<guimenuitem><accel>N</accel>ew Composer...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens up a new <guilabel>Composer</guilabel> window.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycombo action="simul">&Ctrl;<keycap>W</keycap></keycombo>
</shortcut>
<guimenu><accel>M</accel>essage</guimenu>
<guimenuitem><accel>C</accel>lose</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Closes this <guilabel>Composer</guilabel> window.</para>
</listitem>
</varlistentry>

</variablelist>

</sect2>


<sect2 id="composer-edit-menu">
<title><guimenu>Edit</guimenu> Menu</title>

<variablelist>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycombo action="simul">&Ctrl;<keycap>Z</keycap></keycombo>
</shortcut>
<guimenu><accel>E</accel>dit</guimenu>
<guimenuitem>Und<accel>o</accel></guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Undo your steps in editing the current mail.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycombo action="simul">&Ctrl;<keycap>Shift</keycap><keycap>Z</keycap></keycombo>
</shortcut>
<guimenu><accel>E</accel>dit</guimenu>
<guimenuitem>Re<accel>d</accel>o</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Redo your steps in editing the current mail.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycombo action="simul">&Ctrl;<keycap>X</keycap></keycombo>
</shortcut>
<guimenu><accel>E</accel>dit</guimenu>
<guimenuitem>C<accel>u</accel>t</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Cutting text works as with most editors.  You can also select text and
drag it to a new position.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycombo action="simul"><keycap>Ctrl</keycap><keycap>C</keycap></keycombo>
</shortcut>
<guimenu><accel>E</accel>dit</guimenu>
<guimenuitem><accel>C</accel>opy</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Copying text works as with most editors. You can also select text while
holding the &Ctrl; key, and drag it to a new position, to have it copied and not
cut.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycombo action="simul">&Ctrl;<keycap>V</keycap></keycombo>
</shortcut>
<guimenu><accel>E</accel>dit</guimenu>
<guimenuitem><accel>P</accel>aste</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Pasting works the same as for most editors.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycombo action="simul">&Ctrl;<keycap>A</keycap></keycombo>
</shortcut>
<guimenu><accel>E</accel>dit</guimenu>
<guimenuitem>Select <accel>A</accel>ll</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Selects all of the text in your message.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycombo action="simul">&Ctrl;<keycap>F</keycap></keycombo>
</shortcut>
<guimenu><accel>E</accel>dit</guimenu>
<guimenuitem><accel>F</accel>ind...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Finds strings in the message.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut>
<keycombo action="simul">&Ctrl;<keycap>R</keycap></keycombo>
</shortcut>
<guimenu><accel>E</accel>dit</guimenu>
<guimenuitem><accel>R</accel>eplace...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Lets you replace strings in your message with other strings.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>E</accel>dit</guimenu>
<guimenuitem>Cl<accel>e</accel>an Spaces</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>This replaces multiple spaces with single spaces in the current
selection or in the complete message if there is no selection.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>E</accel>dit</guimenu>
<guimenuitem><accel>S</accel>pelling...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Uses &kspell; to check the spelling in the body of your message. Note that
you have to configure &kspell; with <menuchoice><guimenu>Settings</guimenu>
<guimenuitem>Spellchecker...</guimenuitem></menuchoice> if you use it for the
first time.</para>
</listitem>
</varlistentry>

</variablelist>

</sect2>

<sect2 id="composer-view-menu">
<title><guimenu>View</guimenu> Menu</title>

<para>This menu lets you toggle the display of the header fields and other
options in this <guilabel>Composer</guilabel> window.</para>

<para>Options available are:</para>

<itemizedlist>
<listitem>
<para><guimenuitem><accel>A</accel>ll Fields</guimenuitem></para>
</listitem>
<listitem>
<para><guimenuitem><accel>I</accel>dentity</guimenuitem></para>
</listitem>
<listitem>
<para><guimenuitem><accel>M</accel>ail Transport</guimenuitem></para>
</listitem>
<listitem>
<para><guimenuitem><accel>F</accel>rom</guimenuitem></para>
</listitem>
<listitem>
<para><guimenuitem><accel>R</accel>eply to</guimenuitem></para>
</listitem>
<listitem>
<para><guimenuitem><accel>T</accel>o</guimenuitem></para>
</listitem>
<listitem>
<para><guimenuitem><accel>C</accel>c</guimenuitem></para>
</listitem>
<listitem>
<para><guimenuitem><accel>B</accel>cc</guimenuitem></para>
</listitem>
<listitem>
<para><guimenuitem><accel>S</accel>ubject</guimenuitem></para>
</listitem>
</itemizedlist>

<para>Currently visible items have a checkmark shown next to their name in the
menu.</para>

</sect2>

<sect2 id="composer-options-menu">
<title><guimenu>Options</guimenu> Menu</title>

<variablelist>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>O</accel>ptions</guimenu>
<guimenuitem><accel>U</accel>rgent</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Sets the priority of the message to Urgent. The receiver's mail client has to support
this or it will have no effect. &kmail; itself does not support priorities for
incoming messages.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>O</accel>ptions</guimenu>
<guimenuitem><accel>C</accel>onfirm delivery</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>If you choose this option, you request a confirmation email once your
message is successfully delivered to its destination mail server. This has to be
also supported from the receiver's side in order to work.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>O</accel>ptions</guimenu>
<guimenuitem>Confirm <accel>r</accel>ead</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>If you choose this option, you request a confirmation email once your
message is downloaded and read by its recipient. This has to be supported and
enabled by the receiver's mail client in order to work.
<!-- TODO: kmail... --></para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>O</accel>ptions</guimenu>
<guisubmenu>Set <accel>E</accel>ncoding</guisubmenu>
</menuchoice>
</term>
<listitem>
<para>Set the charset encoding of this message. It will appear in the header of
the outgoing mail.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>O</accel>ptions</guimenu>
<guimenuitem><accel>W</accel>ordwrap</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Toggle the automatic wordwrap. It may be useful to turn it off if you want
to paste long lines that shouldn't wrap.</para>
</listitem>
</varlistentry>

</variablelist>

</sect2>


<sect2 id="composer-attach-menu">
<title><guimenu>Attach</guimenu> Menu</title>

<para>This menu lets you select attachment options.</para>

<variablelist>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>A</accel>ttach</guimenu>
<guimenuitem>Append S<accel>i</accel>gnature</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Appends your signature (<quote>footer</quote>) to the end of the message.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>A</accel>ttach</guimenu>
<!-- fixme in kmail: "P" used twice -->
<guimenuitem>Attach <accel>P</accel>ublic Key...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Attaches the corresponding <application>PGP</application>/<application>GnuPG</application>
key to your message using the default encoding.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>A</accel>ttach</guimenu>
<guimenuitem>Attach My <accel>P</accel>ublic Key</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Attaches your <application>PGP</application>/<application>GnuPG</application>
public key to your message using the default encoding.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>A</accel>ttach</guimenu>
<guimenuitem><accel>A</accel>ttach...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Attaches a file to the message using the encoding you select in the
dialog. The dialog allows to select more than one file using the &Ctrl; key.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>A</accel>ttach</guimenu>
<guimenuitem><accel>R</accel>emove</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Removes the attachment that is selected in the attachment window.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>A</accel>ttach</guimenu>
<guimenuitem><accel>S</accel>ave...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Saves the attachment that is selected in the attachment window to a
file.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>A</accel>ttach</guimenu>
<guimenuitem>Pr<accel>o</accel>perties...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Displays the properties of the attachment that is selected in the
attachment window.</para>
</listitem>
</varlistentry>

</variablelist>

</sect2>

<sect2 id="composer-settings-menu">
<title><guimenu>Settings</guimenu> Menu</title>

<variablelist>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>S</accel>ettings</guimenu>
<guimenuitem>Show <accel>T</accel>oolbar</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>If enabled, the Toolbar is visible (the Toolbar is the one with the icon
to send the message &etc;).</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>S</accel>ettings</guimenu>
<guimenuitem>Show St<accel>a</accel>tusbar</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>If enabled, the Statusbar is visible (the Statusbar is the small one at
the bottom which shows useful short messages).</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>S</accel>ettings</guimenu>
<guimenuitem>Configure <accel>K</accel>ey Bindings...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens a window that lets you configure the keyboard shortcuts for many
menu command.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>S</accel>ettings</guimenu>
<guimenuitem>Configure Tool<accel>b</accel>ars...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens a window that allows you to decide which icons appear in the
toolbar.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu><accel>S</accel>ettings</guimenu>
<guimenuitem><accel>S</accel>pellchecker...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Allows you to configure &kspell;, &kde;'s spellchecker.</para>
</listitem>
</varlistentry>

</variablelist>
</sect2>


<sect2 id="composer-help-menu">
<title><guimenu>Help</guimenu> Menu</title>

<para>
The entries in this menu have the same meaning as <link linkend="reader-help-menu">the
entries in the Mailreader's help menu</link>.</para>

</sect2>
</sect1>
</chapter>

<chapter id="faq">
<title>Frequently Asked Questions (&FAQ;)</title>

<qandaset id="faq-set">

<qandaentry>
<question><para>Where can I get a list of changes between the versions of &kmail;?</para></question>
<answer>
<para>The welcome screen lists all important changes for its release. It is displayed when you
start a new version of &kmail; the first time. You can always look at it again
by selecting the root element of the folder list, &ie; <guilabel>Mail</guilabel>.</para>
</answer>
</qandaentry>

<qandaentry>
<question><para>I'm one of those people whose mails consist of 100 quoted lines
and one line written by myself. For some reason (which I don't get) this annoys other people. Can
&kmail; help me and make everyone's life better?</para></question>
<answer><para>Sure. Just select a short relevant part of the original mail
with the mouse before you reply. Only this part will then be quoted in your 
reply.</para></answer>
</qandaentry>

<qandaentry>
<question><para>&kmail; disappears/crashes while fetching mail.</para></question>
<answer><para>Make sure you have enough free disk space. &kmail; currently
does not handle the situation of a full disk gracefully and quits. Note: &kmail;
does protect your data, messages that could not be saved to disk is left on the 
server.</para></answer>
</qandaentry>

<qandaentry>
<question><para>Does &kmail;'s address book support distribution lists?</para></question>
<answer><para>No. As a workaround you can add several email address into one 
address entry if you are using the <quote>traditional</quote> &kmail; address book.</para></answer>
</qandaentry>

<qandaentry>
<question><para>For some messages the value in the <guilabel>Date</guilabel> field
is wrong, it shows <guilabel>Wed Dec 31 17:00:00 1969</guilabel>.</para></question>
<answer><para>Probably the <quote>Date:</quote> header of these messages is broken,
maybe it's missing the time zone information. For this case we've added
a workaround to mimelib. In &kde; 2.2 mimelib is part of the kdenetwork
package, you must make sure that &kde;'s mimelib is used and not a different
one on your system.</para></answer>
</qandaentry>

<qandaentry>
<question><para>My signature has two dashes above it. This makes me very sad.</para></question>
<answer>
<para>Separating the signature from the message body with two dashes and a space
is a common and useful kind of standard. If you have strong feelings about this
I suggest you modify the &kmail; source to remove that line.</para>
</answer>
</qandaentry>

<!-- TODO: kmail can beep, but how to add an icon to the taskbar
<qandaentry>
<question><para>How do I get a notification if new mail arrives?</para></question>
<answer><para>fixme</para></answer>
</qandaentry>
-->

<qandaentry>
<question><para>&kmail; fetches the same messages over and over again.</para></question>
<answer><para>This happens if you have <guilabel>Delete mail from server</guilabel>
deselected and your POP3 server doesn't support the UIDL command. There's currently
no workaround besides selecting <guilabel>Delete mail from server</guilabel>.
A more detailed explanation can be found 
<ulink url="http://lists.kde.org/?l=kmail&amp;m=99220697415300&amp;w=2">in this
mailing list post</ulink>.</para></answer>
</qandaentry>

<qandaentry>
<question><para>Does &kmail; support <acronym>IMAP</acronym>?</para></question>
<answer>
<para>Yes, it does so since &kde; version 2.2. It's not yet feature complete,
but it should be enough for many users. We know of those limitations, so please
don't submit wishlist reports about them.</para>
</answer>
</qandaentry>

<qandaentry>
<question><para>Are there any known bugs in &kmail;?</para></question>
<answer>
<para>You can find a list of submitted bugs at <ulink
url="http://bugs.kde.org/db/pa/lkmail.html">bugs.kde.org</ulink>. Note that not all
these bugs are valid, all in all we think that &kmail; is now a very good piece
of software.</para>
<para><warning><para>However, you should not run &kmail; while another mail client is already
accessing the files in <filename class="directory">~/Mail</filename>. If you try to do so,
you might lose messages. Note that you should make backups of your messages anyway.</para></warning></para>
</answer>
</qandaentry>

<qandaentry>
<question><para>&kmail; doesn't display <acronym>HTML</acronym> mail as
<acronym>HTML</acronym>, I can only see the source.</para></question>
<answer><para>Select <menuchoice><guimenu>Folder</guimenu><guimenuitem>Prefer
HTML to plain text</guimenuitem></menuchoice>. For security reasons you should
only do so for trusted mails. Note that plugins (like <trademark
class="registered">Macromedia</trademark> <application>Flash</application>),
Java and Javascript will not be displayed in &kmail; and there's no way
to activate them.</para></answer>
</qandaentry>

<qandaentry>
<question><para>Can I use two different version of &kmail; at the same time? Can I go
back from a current version of &kmail; to an older one?</para></question>
<answer><para>You can only run one instance of &kmail; at once. We recommend also
to stick to a certain version and not switch back and forth between different versions.
Downgrading to an older version might cause problems, &eg; because the index file
formats might have changed. Upgrading should never be a problem.</para></answer>
</qandaentry>

<qandaentry>
<question><para>Does &kmail; support uuencoded files?</para></question>
<answer><para>No. However, you can handle them using a filter, which is
described in <ulink url="http://lists.kde.org/?l=kmail&amp;m=98908576320145&amp;w=2">this 
posting</ulink> to the mailing list.</para></answer>
</qandaentry>

<qandaentry>
<question><para>&kmail; crashed while I was writing a mail. So this mail is lost now?</para></question>
<answer><para>&kmail; tries to save your mail to 
<filename>~/dead.letter</filename> in case of a crash. The next time you start
&kmail; the mail composer should appear with your mail again. If it doesn't,
try to open <filename>~/dead.letter</filename> with an editor. If it doesn't
exist, the crash was so bad that &kmail; couldn't save your mail.</para></answer>
</qandaentry>

<qandaentry>
<question><para>When I try to set a folder to be mailing list-aware, it does not do
anything when receiving an email from the list.</para></question>
<answer><para>Associating a folder with a mailing list has nothing to do with
filtering the mailing list messages. You have to add a new filter rule manually.
However, once you associated a folder with a mailing list you can use <menuchoice>
<guimenu>Message</guimenu><guimenuitem>Reply List...</guimenuitem></menuchoice> or 
<menuchoice><guimenu>Message</guimenu><guimenuitem>New message...</guimenuitem></menuchoice>
and the mailing list address will be set to the <guilabel>To:</guilabel> field.
</para></answer>
</qandaentry>

<qandaentry>
<question><para>My SMTP server requires authentification. Does &kmail; support it?</para></question>
<answer><para>There are two common techniques used for SMTP authentification:
<quote>SMTP after POP3</quote> and <quote>SMTP Auth</quote>. 
<quote>SMTP Auth</quote> is currently not supported.<!-- fixme? -->
To use <quote>SMTP after POP3</quote> you have to collect all your mails in the
<guilabel>outbox</guilabel> and send them just after you have fetched new mail.</para></answer>
</qandaentry>

<qandaentry>
<question><para>Can I use &kmail; and <application>procmail</application>?</para></question>
<answer><para>Yes, but it's important to do it the right way or you might lose
mail. In order to use procmail and &kmail; you need 
to set up KMail so that it will fetch new
mail from the spoolfiles in which procmail drops your mail. Do <emphasis>not</emphasis> set up
procmail to deliver mail in a KMail folder, this 
cannot work.</para>
<para>For each procmail spoolfile, you then need to create an account from which
&kmail; will fetch new mail. You also need to make sure you specify the right
lockfile name for this account. When setting up an account, &kmail; will do
some minimal parsing on your procmail file, and will try to list every
spoolfile it has found, and also the lockfiles next to the "procmail
lockfile" item. procmail lets the user specify lockfiles in three different
ways, so there's no way to establish a correspondence between the spoolfiles
and lockfiles. So it's really up to you to make sure you specify the right
lockfile for each spoolfile.</para>
</answer>
</qandaentry>

<qandaentry id="pgp-faq">
<question><para>What should I know if I want to use
<application>PGP</application>/<application>GnuPG</application> with
&kmail;?</para></question>

<answer><para>&kmail; provides a simple and easy to use interface for basic
 functions of these programs. Still you should understand how these programs
 work and what might make their use insecure. Some important issues:</para>

<itemizedlist>
<listitem>
<para>You <emphasis>really</emphasis> should test if encryption works
before you use it. &kmail; relies on
<application>PGP</application>/<application>GnuPG</application>'s error strings,
which often change between different versions.</para>
</listitem>
<listitem>
<para>Trusting a foreign public key without checking it is no good idea.</para>
</listitem>
<listitem>
<para>&kmail; will not encrypt messages with an untrusted (unsigned) public key
if you use <application>PGP</application>. If you use <application>GnuPG</application>
&kmail; <emphasis>will</emphasis> encrypt messages with untrusted public keys.</para>
</listitem>
<listitem>
<para>As most other mail clients, &kmail; can encrypt your messages, but
<emphasis>not</emphasis> your attachments. You have to encrypt them manually
before you attach them.</para>
</listitem>
</itemizedlist>
</answer>
</qandaentry>

<qandaentry>
<question><para>How do I have to set up &kmail; to use (&ie; read and write)
messages with non-Latin1 characters?</para></question>
<answer><para>In the
<guilabel>Appearance</guilabel>/<guilabel>Fonts</guilabel> section of the
<guilabel>Configure &kmail;...</guilabel> dialog, select the correct <guilabel>Character set</guilabel> for
the message list and the folder list. If <guilabel>unicode
(iso10646-1)</guilabel> is available, you should choose it. In case messages are
still not shown correctly, you can always try other settings from the
<menuchoice><guimenu>Message</guimenu><guimenuitem>Set
Encoding</guimenuitem></menuchoice> menu.  For writing messages, go to
<guilabel>Composer</guilabel>/<guilabel>Charset</guilabel> and configure the
default charset you want to use for your own mails.</para></answer>
</qandaentry>

<qandaentry>
<question><para>Spellchecking doesn't recognize non-english
characters.</para></question>
<answer><para>Before you can use spellchecking the first time, you have to
configure it. You can do so in the <guilabel>Composer</guilabel> window's menu
under <menuchoice><guimenu>Settings</guimenu>
<guimenuitem>Spellchecker...</guimenuitem></menuchoice>. You can set
the dictionary and the encoding there.</para></answer>
</qandaentry>

<qandaentry>
<question><para>How do I use my
<application>Eudora</application>/&Netscape;/<application>Outlook</application>/...
mail folders in  &kmail;?</para></question> 
<answer><para>See the section <link linkend="importing">Using other Mailbox
files With &kmail;</link>.</para></answer>
</qandaentry>

<qandaentry>
<question><para>How can I use mail folders that are not in <filename
class="directory">~/Mail/</filename>?</para></question>

<answer><para>Simply create a symlink in your <filename
class="directory">~/Mail</filename> directory using
<userinput><command>ln</command> <option>-s</option>
<filename>/somewhere/Mail/mymailboxfile</filename>
<filename class="symlink">~/Mail/remote</filename></userinput>. When you start
&kmail; you will see a new folder with the name <guilabel>remote</guilabel> that
contains the mails in your remote folder. If you want to add a whole remote mail
directory use <userinput><command>ln</command> <option>-s</option>
<filename>/somewhere/Mail</filename> <filename
class="symlink">~/Mail/.remotedir.directory</filename></userinput>.  For that
case you also need to create a new empty folder named <filename
class="directory">remotedir</filename> with &kmail;. The folder <filename
class="directory">remotedir</filename> will then contain all remote mailbox
folders as subfolders.</para></answer>
</qandaentry>

<qandaentry>
<question><para>My folders keep growing even when I delete
messages.</para></question>
<answer><para>To really remove deleted messages from disk, you have to compact
your folders. To do so automatically, open up the
<menuchoice><guimenu>Settings</guimenu><guimenuitem>Configure &kmail;...</guimenuitem></menuchoice>
window, select the <guilabel>Miscellaneous</guilabel> tab and select
<guilabel>Compact all folders on exit</guilabel>.</para></answer>
</qandaentry>

<qandaentry>
<question><para>Can I use encryption with my normal (non-<acronym>SSL</acronym>)
<acronym>POP3</acronym> account?</para></question>
<answer><para>If your <acronym>POP3</acronym> server runs an
<application>ssh</application> daemon, you can use ssh to tunnel your
<acronym>POP3</acronym> connection using the following command:</para>

<para><userinput><command>ssh</command> <option>-L 110:127.0.0.1:110
user@host</option></userinput></para>

<para>Modify your &kmail; configuration to fetch the mail via
<acronym>POP3</acronym> from <userinput>localhost</userinput> and ssh will tunnel
the connection for you. You need to be root to execute this
command. Alternatively, change the first port number, &ie; the first occurence
of <userinput>110</userinput>, to something above 1024 and configure &kmail; to
use that port. <note><para>If non-encrypted mails have already been sent
via internet, the only advantage of using <application>ssh</application> is
that your <emphasis>password</emphasis> will be sent encrypted to the <acronym>POP3</acronym>
server.</para></note></para>
</answer>
</qandaentry>

<qandaentry>
<question><para>Does &kmail; lock the folders it uses?</para></question>
<answer><para>&kmail; does not lock the files in <filename
class="directory">~/Mail</filename>.</para>
<para>To avoid the risk of losing mail <emphasis>if using a local
account</emphasis> it is necessary to ensure that &kmail; uses the same type of
locking as your mail delivery agent.</para>

<para>There are five different locking options you can use:</para>

<itemizedlist>
<listitem><para><guilabel>Mutt dotlock (recommended)</guilabel></para></listitem>
<listitem><para><guilabel>Mutt dotlock privileged</guilabel></para></listitem>
<listitem><para><guilabel>Procmail lockfile</guilabel></para></listitem>
<listitem><para><guilabel>FCNTL</guilabel> (default)</para></listitem>
<listitem><para><guilabel>none (use with care)</guilabel></para></listitem>
</itemizedlist>

<para><guilabel>Mutt dotlock</guilabel> and <guilabel>Mutt dotlock
privileged</guilabel> will both use a small utility that comes with mutt
called <command>mutt_dotlock</command>. <guilabel>Mutt dotlock</guilabel>
can be used in the same way as the <guilabel>Procmail lockfile</guilabel>
option, with the same limitation with regards to the <filename
class="directory">/var/spool/mail/</filename> folders. However, the
<guilabel>Mutt dotlock privileged</guilabel> option can create lock files
in the <filename class="directory">/var/spool/mail</filename> directory. 
<command>mutt_dotlock</command> is a setgid program and this option will
run it in setgid mode. Please note that these options will only work if
mutt is installed on your system.</para>

<para><guilabel>Procmail lockfile</guilabel> will use a small utility that comes
with <application>procmail</application> called <command>lockfile</command>. You
can use this if your mail folder is in a directory where you have write
permissions.  This will not work on your <filename
class="directory">/var/spool/mail/user</filename> file in most cases.  It will
create <filename>.lock</filename> files on your account when &kmail; is checking
for new mail. Please note that this will only work if
<application>procmail</application> is installed on your system.</para>

<para><guilabel>FCNTL</guilabel>: the default option will use the
<function>fcntl()</function> system call.</para>

<para>If you don't want to use any locking, the <guilabel>none</guilabel> option
is what you want. However, there are risks of losing mail when no locking is
used.</para>

</answer>
</qandaentry>

<qandaentry>
<question><para>How do I leave mail on the server?</para></question>
<answer><para>Open up the
<menuchoice><guimenu>Settings</guimenu><guimenuitem>Configure &kmail;...</guimenuitem>
</menuchoice> window. Click on the <guilabel>Network</guilabel> tab. Select your
account from the account list and click the <guilabel>Modify...</guilabel>
button. This dialog contains the <guilabel>Delete mail from server</guilabel>
setting which you must not select.</para></answer>
</qandaentry>

<qandaentry>
<question><para>How do I automatically insert a text footer within my
mails?</para></question>
<answer><para>The text footer is called a signature file. Select
<menuchoice><guimenu>Settings</guimenu>
<guimenuitem>Configure &kmail;...</guimenuitem></menuchoice>
Look in the <guilabel>Identity</guilabel> tab for the <guilabel>Specify
signature below</guilabel> field. Select the radio button and type your
signature below.</para></answer> 
</qandaentry>

<qandaentry>
<question><para>Why does &kmail; keep asking me for the location of my signature
file?</para></question>
<answer><para>&kmail; will ask you for the location of your signature file if you
have checked the option <guilabel>Automatically append signature</guilabel> in the
<guilabel>Composer</guilabel> tab of the <guilabel>Configure &kmail;...</guilabel> dialog,
but you have not specified a signature file in the <guilabel>Identity</guilabel>
tab. You should either specify a signature file, select <guilabel>Use signature below</guilabel>,
or deselect <guilabel>Automatically append signature</guilabel>.</para></answer>
</qandaentry>

<qandaentry>
<question><para>How do I set up <application>sendmail</application> to work with
&kmail; if I have a  dial-up connection?</para></question> 

<answer><para>First you should check if your &Linux;/BSD/whatever distribution
can do this for you. It probably has already been set up during
installation.</para>

<para>If that's not the case, you may want to have a look at <ulink
url="http://www.linuxdoc.org/HOWTO/mini/Mail-Queue.html">the Mail Queue
HOWTO</ulink> or at <ulink
url="http://www.leg.uct.ac.za/Articles/sendmail_dialup.html">UCT Linux User's
group page on configuring sendmail for Dial-up
connections</ulink>.</para></answer>
</qandaentry>

<qandaentry>
<question><para>I've seen demonstrations of remote control behavior with &kmail;.
Is there any documentation on the available interfaces?</para></question>
<answer><para>You can get a list of functions by using this command in a shell:
<userinput><command>dcop</command> 
<option>kmail  KMailIface</option></userinput>. Some documentation is also
in <filename>kdenetwork/kmail/kmailIface.h</filename> and
<filename>kdenetwork/kmail/mailcomposerIface.h</filename>.</para></answer>
</qandaentry>

</qandaset>

</chapter>


<chapter id="importing">
<title>Using other Mailbox Files with &kmail;</title>

<para>&kmail; offers an import tool for some formats. You can access it
using <menuchoice><guimenu>File</guimenu><guimenuitem>Import...</guimenuitem></menuchoice>.
You only need to read this chapter if this tool does not work for you.</para>

<para>This section is for all of the users who need to move email messages from
their previous email client over to &kmail;. &kmail; stores its mail using the
<literal>mbox</literal> format, one of the most widely used mailbox formats on
&UNIX; systems. Mbox mailboxes store messages in one file, identifying where
messages start and end with a <literal>From</literal> line (do not mix this up
with the <literal>From:</literal> header that contains the message's sender).
For many &UNIX; mail programs, all you must do is move your mailboxes to <filename
class="directory">~/Mail</filename> (or make <filename
class="symlink">Mail</filename> a symbolic link to the folder containing your
mailboxes), make sure they are writeable by your user, and launch &kmail;. The
mailboxes should now show up correctly in &kmail;.</para>

<para>If your old mailboxes are not in mbox format, see below for instructions
on importing some other common formats. Take a look at the
<ulink url="http://kmail.kde.org/download.html">Download section of &kmail;'s
homepage</ulink> if your mailbox format is not listed here.</para>

<warning><para>Do not use a second mail client that accesses the files in
<filename class="directory">~/Mail</filename> while &kmail; is running or
you might lose messages. This section only explains how to import mailboxes
to &kmail; once, it's not useful to you if you're planning to use several
mail clients for your mailboxes in the future.</para></warning>

<variablelist>

<varlistentry>
<term><application>Eudora Lite</application>/<application>Eudora
Pro</application></term>
<listitem>
<para><application>Eudora</application> uses the mbox format in its mail
files. To use them with &kmail;, make sure that your
<application>Eudora</application> mailboxes have been compacted, then copy the
<literal role="extension">.mbx</literal> files (&Windows;
<application>Eudora</application>) or <application>Eudora</application> mailbox
files (&Mac; <application>Eudora</application>) to your <filename
class="directory">~/Mail</filename> directory. You don't need to copy the
<filename>index</filename> files. Once you start &kmail;, the mailboxes should
appear in the Folders pane and the messages should be accessible in the Headers
pane.</para>
<para>If messages do not appear in the Headers pane, your mailbox files may
still contain &Windows; or &Mac; line feed characters. Use your favorite
text editor, the <application>recode</application> command or a scripting
language to change the &Windows; or &Mac; line feeds to &UNIX; line
feeds.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>MMDF</term>
<listitem>
<para>This format is close enough to the mailbox format that &kmail; should be
able to use these mailboxes if you just copy them to your
<filename class="directory">~/Mail</filename> directory. However, MMDF mailboxes
have not been tested with &kmail;, so your results may vary.  If you can get
this format to work with &kmail;, please let us know so we can include more
specific directions in the next documentation release.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>MH mailboxes</term>
<listitem>
<para>MH mailboxes are directories containing files that correspond to each
message in that mailbox.  A shell script to convert MH mailboxes to mbox
mailboxes, <command>mh2kmail</command>, is included at least in the source
releases of &kmail;, but maybe not in the packaged releases. Running this script
on a MH folder will convert it to an mbox file.  We strongly suggest that you
back up your MH mail folders before you use this script.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>Forte <application>Agent</application></term>
<listitem>
<para>In <application>Agent</application>:</para>
<procedure>
<step>
<para>Select the messages to export</para>
</step>
<step>
<para>Select <menuchoice><guimenu>FILE</guimenu><guimenuitem>SAVE MESSAGES
AS</guimenuitem></menuchoice></para>
</step>
<step>
<para>Mark the <guilabel>UNIX FORMAT</guilabel> and <guilabel>SAVE
RAW</guilabel> boxes</para>
</step>
<step>
<para>Give File a  <literal role="extension">.txt</literal> extension and
save.</para>
</step>
</procedure>

<para>In &kde;:</para>

<procedure>
<step>
<para>Move previously saves file to correct <filename
class="directory">~/Mail</filename> folder</para>
</step>
<step>
<para>Rename file without <literal role="extension">.txt</literal>
extension</para>
</step>
</procedure>
<para>When you open &kmail; the new folder with appropriate messages will be
there.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>&Netscape; Mail</term>
<listitem>
<para>Copy your &Netscape; mail files from <filename
class="directory">~/nsmail/</filename> to <filename
class="directory">~/Mail</filename> and make sure they are writeable (only by
your user, of course).  The mailboxes will show up in &kmail; the next time you
start it.</para>
</listitem>
</varlistentry>

<varlistentry>
<term><application>Pegasus Mail</application></term>
<listitem>
<para><application>Pegasus</application> for win32 uses single files for Mail
folders similar to &kmail;. <application>Pegasus mail</application> folder files
have the extension <literal role="extension">.pmm</literal> but they are the same format as mbox except the messages
do not start with the <literal>From</literal> header, but with a control character. To work around
this, replace each instance of the control character with <literal>From
aaa@aaa Mon Jan 01 00:00:00 1997</literal>. This <literal>From</literal>
line should be the first line of every message, before the
<literal>Received:</literal> and other headers. Make sure to use a text editor
that lets you save the files in &UNIX; format or create new folders in
<application>Pegasus</application> that are in &UNIX; format and copy your mails
there.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>Maildir / Outlook Express / xfmail</term>
<listitem>
<para>Tools to convert these formats are available at the
<ulink url="http://kmail.kde.org/download.html">Download section of &kmail;'s
homepage</ulink>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>Lotus <application>Notes</application>, BeOS Mail files, <application>cc:
Mail</application>, &etc;...</term>
<listitem>
<para>First you should have a look at <ulink
url="http://kmail.kde.org/download.html">Download section of &kmail;'s homepage</ulink> if there
are tools to convert mails.</para>
<para>Mail programs not listed here or on the homepage probably do not work with &kmail; as they use
proprietary mail formats that &kmail; cannot understand. However, there is no
harm in trying! If the mailbox file looks similar to the mbox format, try
copying the mailbox file (remember, the index file is not needed) to your
<filename>~/Mail</filename> directory and see what happens if you start
&kmail;. If you get mailboxes from your favorite mail client to work in &kmail;,
please tell us how you did it so that we can include directions in a future
revision of this documentation. </para>
</listitem>
</varlistentry>

</variablelist>
</chapter>


<chapter id="credits-and-licenses">
<title>Credits and Licenses</title>

<para>&kmail;</para>

<para>Copyright the &kmail; developers, 1997-2001</para>

&underFDL;
&underGPL;

<sect1 id="developers">
<title>Original Developers</title>
<!-- please keep in sync with the authors list on the webpage -->

<itemizedlist>
<listitem>
<para>Stefan Taferner <email>taferner@alpin.or.at</email></para>
</listitem>
<listitem>
<para>Markus Wuebben <email>markus.wuebben@kde.org</email></para>
</listitem>
</itemizedlist>

</sect1>

<sect1 id="team">
<title>Current Team</title>

<itemizedlist>

<listitem><para>Waldo Bastian <email>bastian@kde.org</email></para></listitem>
<listitem><para>Andreas Gungl <email>a.gungl@gmx.de</email></para></listitem>
<listitem><para>Michael Haeckel
<email>michael@haeckel.net</email></para></listitem>
<listitem><para>Lars Knoll <email>knoll@mpi-hd.mpg.de</email></para></listitem>
<listitem><para>J. Nick Koston
<email>bdraco@darkorb.net</email></para></listitem>
<listitem><para>Marc Mutz
<email>mutz@kde.org</email></para></listitem>
<listitem><para>Daniel Naber
<email>daniel.naber@t-online.de</email></para></listitem>
<listitem><para>Sven Radej <email>radej@kde.org</email></para></listitem>
<listitem><para>Espen Sand <email>espen@kde.org</email></para></listitem>
<listitem><para>Don Sanders <email>sanders@kde.org</email> (Active
maintainer)</para></listitem>
<listitem><para>George Staikos
<email>staikos@0wned.org</email></para></listitem>
<listitem><para>Mario Weilguni
<email>mweilguni@sime.com</email></para></listitem>
<listitem><para>Robert D. Williams
<email>rwilliams@kde.org</email></para></listitem>
</itemizedlist>

</sect1>

<sect1 id="documentation">
<title>Documentation</title>

<para>Update for &kmail; 1.2 and 1.3 by Daniel Naber
<email>daniel.naber@t-online.de</email>, <application>PGP</application> part by
Andreas Gungl <email>a.gungl@gmx.de</email>, filter part by
Marc Mutz <email>Marc.Mutz@uni-bielefeld.de</email>. Other parts
have been contributed by the various &kmail; developers.</para>

<para>&kmail; 1.0
documentation by David Rugge <email>davidrugge@mindspring.com</email>.
Original documentation by Markus Wuebben
<email>markus.wuebben@kde.org</email>, Robert Williams
<email>rwilliams@kde.org</email> (Editor).</para>

<para>Thanks to Michael Elkins <email>me@cs.hmc.edu</email> for his excellent
description of the different Unix mail formats in the Mutt documentation.</para>

<para>Thanks to the following people for providing directions on using other
mail client mailboxes with &kmail;:</para>

<itemizedlist>
<listitem><para>Mendel Mobach <email>mendel@mobach.nl</email> (&Netscape;
mail)</para></listitem>
<listitem><para>Ed Shapard <email>shapard@bigfoot.com</email>
(<application>Pegasus</application> Mail)</para></listitem>
<listitem><para>Ray Muir <email>rjmuir@ibm.net</email> (Forte
<application>Agent</application>)</para></listitem>
</itemizedlist>
<!-- TRANS:CREDIT_FOR_TRANSLATORS -->

</sect1>

</chapter>

<appendix id="installation">
<title>Installation</title>

<sect1 id="getting-kmail">
<title>How to obtain &kmail;</title>

<para>&kmail; is part of the &kde; project <ulink
url="http://www.kde.org">http://www.kde.org</ulink>. &kmail; can be found in the
kdenetwork package on <ulink
url="ftp://ftp.kde.org/pub/kde/">ftp://ftp.kde.org/pub/kde/</ulink>, the main
&FTP; site of the &kde; project. </para>
</sect1>

<sect1 id="compilation">
<title>Compilation and Installation</title>

<para>In order to compile and install &kmail; on your system, type the following
in the base directory of the kdenetwork distribution:</para>

<screen width="40">
<prompt>%</prompt> <userinput><command>./configure</command></userinput>
<prompt>%</prompt> <userinput><command>make</command></userinput>
<prompt>%</prompt> <userinput><command>make</command> <option>install</option></userinput>
</screen>

<para>Since &kmail; uses <application>autoconf</application> and
<application>automake</application> you should have no trouble compiling
it. Should you run into problems please report them to the &kde; mailing
lists.</para>

</sect1>

</appendix>

</book>
<!--
Local Variables:
mode: sgml
sgml-omittag: nil
sgml-shorttag: t
End:
-->

