<?xml version="1.0" ?>
<!DOCTYPE book PUBLIC "-//KDE//DTD DocBook XML V4.1-Based Variant V1.0//EN" "dtd/kdex.dtd" [
  <!ENTITY kappname "&kmail;">
  <!ENTITY package "kdenetwork">
  <!ENTITY % addindex "IGNORE">
  <!ENTITY % English "INCLUDE" > <!-- change language only here -->
]>

<book lang="&language;">
<bookinfo>
<title>The &kmail; Handbook</title>

<!-- note from daniel.naber@t-online.de, 2002-01-18: I'm working on this
"by hand" (using nedit) so please don't mix up the formatting too much.
$Id$
 -->

<!-- TODO: 
* document "check what the server supports"
* document "pipelining..."
* more about the "create folder" dialog (e.g. Sender/Receiver)
* Configure KMail: "page" or "tab", but no mix of both!
 
* use better markup instead of 'quote'
* fix my adverb vs. adjective mistakes
* does the "lists.kde.org?..." link work correctly/completely again?

* coherent wording for section / tab / ...
* <menuchoice><guimenu>xxx , or is <guimenu>xxx enough?
* <guiicon> vs. <guibutton>
* spelling: homepage vs. home page, popup vs pop up, frontend vs front end

* message vs. mail vs. email -> using "message" everywhere
* window vs. dialog: a dialog is modal, a window is not (I think)

* in KMail: kmail vs. KMail
-->

<authorgroup>
<author>
<firstname>Daniel</firstname>
<surname>Naber</surname>
<affiliation><address>
<email>daniel.naber@t-online.de</email>
</address></affiliation>
</author>

<author>
<firstname>David</firstname>
<surname>Rugge</surname>
<affiliation><address>
<email>davidrugge@mediaone.net</email>
</address></affiliation>
</author>

<!-- TRANS:ROLES_OF_TRANSLATORS -->  

</authorgroup>

<date>2002-02-09</date>
<releaseinfo>1.04.00</releaseinfo>

<copyright>
<year>1999</year>
<year>2000</year>
<year>2001</year>
<year>2002</year>
<holder>David Rugge</holder>
</copyright>

<abstract>
	
<para>&kmail; is &kde;'s powerful and user friendly email client.</para>

</abstract>

<keywordset>
<keyword>KDE</keyword>
<keyword>Mail</keyword>
<keyword>email</keyword>
<keyword>Client</keyword>
<keyword>POP3</keyword>
<keyword>IMAP</keyword>
<keyword>PGP</keyword>
<keyword>GnuPG</keyword>
<keyword>GPG</keyword>
</keywordset>
</bookinfo>

<chapter id="intro">
<title>Introduction</title>

<para>The &kmail; Team welcomes you to &kmail;, a user-friendly mailer for the
K Desktop Environment. Our goal is to make a mailer that is beautiful
and intuitive without sacrificing power. </para>

<para>If you have never set up an email client on a &UNIX; system
before, we suggest that you read through the <link
linkend="getting-started">Getting Started</link> section first so that
your setup goes smoothly.</para>

<para>Since most people don't read documentation anyway, here is a
collection of the most helpful tips:</para>

<itemizedlist>
<listitem>
<para>You don't have to use your mouse to use &kmail;. Everything can
be done by using <link linkend="keyboard-shortcuts">Keyboard Shortcuts</link>.</para>
</listitem>
<listitem>
<para>Although &kmail; can be considered reliable you should keep 
backups of your messages, &ie; just copy the files in <filename class="directory">~/Mail</filename>
(including the hidden ones that start with a dot) to a safe place.</para>
</listitem>
<!-- TODO: add other tips for "invisible" features here -->

</itemizedlist>

<para>&kmail;'s homepage is at <ulink
url="http://kmail.kde.org">http://kmail.kde.org</ulink>, an archive of the
developer's mailing list is at <ulink
url="http://lists.kde.org/?l=kde-kmail&amp;r=1&amp;w=2">lists.kde.org</ulink>.</para>

<para>Please report bugs in &kmail; using
<menuchoice><guimenu>Help</guimenu><guimenuitem>Report
Bug...</guimenuitem></menuchoice>.</para>

<para>We hope you will enjoy &kmail;!</para>

</chapter>

<chapter id="getting-started">
<title>Getting Started</title>

<para>This is a short introduction to &kmail; and its usage so you can
start working with it right away. For more in-depth information see the
<link linkend="using-kmail">Using &kmail;</link> section. Note that
&kmail;'s installation is described in <link linkend="installation">the
appendix</link>.</para>

<para>Invoking &kmail; for the first time creates a directory called
<filename class="directory">Mail</filename> containing the initial files
(<filename>inbox</filename>, <filename>outbox</filename>,
<filename>sent-mail</filename>, <filename>trash</filename> and
<filename>drafts</filename>) in your home directory. Use <menuchoice>
<guimenu>Settings</guimenu> <guimenuitem>Configure
&kmail;...</guimenuitem> </menuchoice> to enter some initial information
so &kmail; will be able to properly retrieve and send your
messages.</para>

<para>The Configure window consists of six sections:
<guilabel>Identity</guilabel>, <guilabel>Network</guilabel>,
<guilabel>Appearance</guilabel>, <guilabel>Composer</guilabel>, 
<guilabel>Security</guilabel>, and
<guilabel>Miscellaneous</guilabel>.</para>

<para>To begin sending and receiving messages you will only have to
change the settings in the <guilabel>Identity</guilabel> and
<guilabel>Network</guilabel> tabs.</para>

<sect1 id="setting-your-identity">
<title>Setting your Identity</title>

<para>The settings in the <guilabel>Identity</guilabel> tab are fairly
straightforward. Fill in the <guilabel>Name</guilabel> field with your
full name (&eg; <userinput>John Doe</userinput>) and the
<guilabel>Organization</guilabel> field (optional) with the appropriate
information. Next, fill in the <guilabel>Email Address</guilabel> field with your
email address (&eg; <userinput>john@somewhere.org</userinput>). If you are 
using <application>PGP</application> or
<application>GnuPG</application> you need to set your key in 
the <guilabel>OpenPGP Key</guilabel> field in the <guilabel>Advanced</guilabel>
tab. Optionally, go to the <guilabel>Signature</guilabel> tab and
enter your signature.</para>

</sect1>

<sect1 id="setting-up-your-account">
<title>Setting up your Account</title>

<para>The <guilabel>Network</guilabel> tab contains the settings that
tell &kmail; how to send and receive your email messages. Many of these settings
can vary greatly depending on the setup of your system and on the kind
of network that your mail server is located. If you do not know what
setting to choose or what to put in a field, consult your Internet
Service Provider (<acronym>ISP</acronym>) or system
administrator.</para>

<sect2 id="sending-mail">
<title>Sending</title>

<para>The <guilabel>Sending</guilabel> tab provides a list of
ways to send messages. The first item in the list is the default
way to send messages. Using the <guibutton>Add...</guibutton>
button you can choose between two different ways of sending messages:
<guilabel>sendmail</guilabel> and
<guilabel>SMTP</guilabel>. &Sendmail; here
means a local software installation - this has a
reputation of being difficult to set up, so if you do not already have a
working &Sendmail; configuration, choose
<guilabel>SMTP</guilabel> and fill in the <guilabel>Name</guilabel>
field with a descriptive name 
(&eg; <userinput>My Mail Account</userinput>)
and the <guilabel>Host</guilabel>
field with the name and domain of your mail server 
(&eg; <userinput>smtp.provider.com</userinput>). You will probably
not need to change the <guilabel>Port</guilabel> setting (the default is
<userinput>25</userinput>).</para>

<!-- TODO: more specific link -->
<para>If you do want to use &Sendmail; and you are using a dial-up
connection, follow the instructions for setting up sendmail for a
dial-up connection in the <link linkend="faq">&FAQ;</link>
section.</para>

<para>The way of sending messages configured here will be used for
your default identity and for all other identities that have no own
way of sending messages. You can use different ways of sending
messages for different identities by selecting the <guilabel>Special
transport</guilabel> checkbox in the <guilabel>Advanced</guilabel>
tab of the <guilabel>Identity</guilabel> section.</para>

<para>A description of the other options can be found
in the <link linkend="configure-network-sending">Configuration</link>
chapter.</para>

</sect2>

<sect2 id="receiving-mail">
<title>Receiving</title>

<para>To set up an account so you can receive mail, press the
<guibutton>Add...</guibutton> button in the <guilabel>Receiving</guilabel>
tab. You will then be prompted for the type of account.  Most users should
select <guilabel>Pop3</guilabel> or <guilabel>IMAP</guilabel>. If
you want to use a local mailbox file, please see the <link linkend="faq-file-locking">FAQ
about file locking</link>.</para>
        
<para>You will then be presented with
the <guilabel>Add Account</guilabel> window. First, fill in the
<guilabel>Name</guilabel> field to name your account. You can choose any name
you like.  <guilabel>Login</guilabel>, <guilabel>Password</guilabel>, and
<guilabel>Host</guilabel> should be filled in with the appropriate information
from your <acronym>ISP</acronym> or system administrator. You should not
need to change the <guilabel>Port</guilabel> setting (the default for POP3 is
<userinput>110</userinput>, the default for <acronym>IMAP</acronym> is
<userinput>143</userinput>).</para>
        
<sect3 id="receiving-mail-imap">
<title>Options only relevant to <acronym>IMAP</acronym></title>

<para>If you are using <acronym>IMAP</acronym>, you can optionally
specify a path in the <guilabel>Prefix to folders</guilabel> field. This
tells &kmail; where it can find your folders on the server. If you also
have a shell account on the server and the messages are stored in your home
directory it might be useful to store the messages in a subdirectory
<filename class="directory">/Mail/</filename>. Use this as a value in
the <guilabel>Prefix to folders</guilabel> field so that &kmail; does
not mix up mailbox files and other files. If you are not interested in 
this feature, simple leave the field blank.</para>

<para>If you check <guilabel>Automatically compact folders</guilabel> 
&kmail; removes the messages you deleted from the
server as soon as you leave a folder. Otherwise the messages are
only marked as deleted and it is up to you to compact the folders
manually by using the menu item <guimenuitem>Compact All
Folders</guimenuitem>.</para>
          
<para>If you check <guilabel>Show hidden folders</guilabel>,
folders whose name starts with a dot are also displayed.</para>

</sect3>

<sect3 id="receiving-mail-pop3">
<title>Options only relevant to POP3</title>

<para>Select <guilabel>Delete mail from server</guilabel> if you don't want to
leave your messages on the server after you downloaded it.</para>

<para>Select <guilabel>Exclude from &quot;Check Mail&quot;</guilabel> if you
don't want to check this account whenever you use <menuchoice><guimenu>Check
Mail</guimenu></menuchoice>.  You can still check for new messages on this account
with <menuchoice><guimenu>File</guimenu><guimenuitem>Check Mail
In</guimenuitem></menuchoice>.</para>

<para>Select <guilabel>Enable interval mail checking</guilabel> if you want
&kmail; to check for new messages automatically. The interval can be specified below
under <guilabel>Check interval (minutes)</guilabel>.</para>

<para><guilabel>inbox</guilabel> is the default folder for incoming
mail. If you want to change that for some reason, you can do so with
<guilabel>Destination folder</guilabel>. But what you probably want is a
<link linkend="filters">filter</link>, which has nothing to do with this
option.</para>

<para>With <guilabel>Precommand</guilabel> you can specify any program that &kmail;
will execute just before fetching mail. Please specify the full path 
(don't use <quote>~</quote>) and note that &kmail; will not continue 
until the program returns.</para>

</sect3>

<sect3 id="receiving-mail-imap-pop3">
<title>Options for both <acronym>IMAP</acronym> and POP3</title>

<!-- TODO: move all this, this isn't important for beginners?! -->
<para>If you select <guilabel>Store POP password in configuration
file</guilabel> resp. <guilabel>Store IMAP password in configuration
file</guilabel> &kmail; will remember your password so you won't have to
type it every time you start &kmail; and fetch new mail.</para>

<warning><para>Be warned that &kmail; cannot really encrypt your password, so
people who can access your configuration files (&eg; system
administrators) can easily get your password if you select this
option.</para></warning>

<para>&kmail; supports encryption via <guilabel>SSL</guilabel> and
<guilabel>TLS</guilabel> (<guilabel>TLS</guilabel> should be preferred
if it is available).</para>

<para>For POP3 &kmail; supports:</para>

<itemizedlist>
<listitem><para><guilabel>Clear text</guilabel>, </para></listitem>
<listitem><para><guilabel>PLAIN</guilabel>, </para></listitem>
<listitem><para><guilabel>LOGIN</guilabel>, </para></listitem>
<listitem><para><guilabel>CRAM-MD5</guilabel> (recommended 
if <guilabel>DIGEST-MD5</guilabel> is not available),</para></listitem>
<listitem><para><guilabel>DIGEST-MD5</guilabel> (recommended) and</para></listitem>
<listitem><para><guilabel>APOP</guilabel> authentication.</para></listitem>
</itemizedlist>

<para><guilabel>DIGEST-MD5</guilabel>, <guilabel>CRAM-MD5</guilabel> and
<guilabel>APOP</guilabel> are secure on their own, the other
options are only secure when used together with <guilabel>SSL</guilabel>
or <guilabel>TLS</guilabel>.  You should only use <guilabel>Clear
text</guilabel> if your server doesn't support any of the other
authentication methods. Additionally, for <acronym>IMAP</acronym>
<guilabel>Anonymous</guilabel> is supported, but <guilabel>APOP</guilabel>
is not.</para>

<para>You are now ready to send and receive mail. For
<acronym>IMAP</acronym>, click on the <guilabel>+</guilabel> sign in the
folder tree in &kmail;'s main window. &kmail; then connects to your
server and displays the folders it finds. For POP3 use
<menuchoice><guimenu>File</guimenu> <guimenuitem>Check
Mail</guimenuitem></menuchoice>.</para>

</sect3>

</sect2>

</sect1>

<sect1 id="testing-your-setup">
<title>Testing your Setup</title>

<para>First, you should send yourself a message to test your
configuration. To send a message, hit <keycombo
action="simul">&Ctrl;<keycap>N</keycap></keycombo>, select the
<guiicon>New Message</guiicon> icon (the empty sheet of paper) or select
the <menuchoice><guimenu>Message</guimenu><guimenuitem>New
Message...</guimenuitem></menuchoice> menu item.  The
composer window will appear. Fill in the
<guilabel>To:</guilabel> field with your email address and type
something in the <guilabel>Subject</guilabel> field. Send the message by
selecting <menuchoice><guimenu>Message</guimenu> <guimenuitem>Send</guimenuitem>
</menuchoice>.</para>
      
<para>To check your email, select
<menuchoice><guimenu>File</guimenu><guimenuitem>Check
Mail</guimenuitem></menuchoice>. In the lower right corner of the main
window, a progress bar will indicate how many messages are being
downloaded. If you receive the message you just sent, then
congratulations!  If, however, you receive any error messages while
testing your setup, make sure that your network connection is working
and recheck your settings by selecting
<menuchoice><guimenu>Settings</guimenu> <guimenuitem>Configure
&kmail;...</guimenuitem></menuchoice>.</para>

</sect1>

</chapter>

<chapter id="using-kmail">
<title>Using &kmail;</title>

<sect1 id="the-mail-reader-window">
<title>The Main Window</title>

<para>The main window is the window that appears
when &kmail; is started. It is divided into three panes:</para>

<variablelist>
<varlistentry>
<term>Folders pane (left pane)</term>
<listitem>
<para>This pane contains a list of your message folders (other email programs
may call them mailboxes). If there is a number after the folder name this indicates
that this folder contains unread messages, except for the <guilabel>outbox</guilabel>
which shows the number of total messages.
 To select a folder, simply click on
it. The messages contained in the folder will now appear in the Headers
pane. The number of unread messages and the total number of messages in the
selected folder is now displayed in the status bar.  The folders can be
displayed in both a short view, which takes up only a small portion of the left
side of the screen, and a long view, which takes up the entire left side of the
screen but is able to show more mailboxes. You can toggle between these two views
under <guilabel>Appearance</guilabel>/<guilabel>Layout</guilabel> in the
<guilabel>Configure &kmail;...</guilabel> dialog. Also see the <link
linkend="folders">Folders Section</link> for more information about how to use
folders.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Headers pane (upper right pane)</term>
<listitem>
<para>This pane lists header information (message Status Flags, Sender, Subject,
Date, optionally Size) for the messages in the currently selected folder. Clicking on a header
will select that message and display it in the Message pane. You can also select
a series of messages by clicking on one message, holding down the
&Shift; key, and clicking on another message. The two messages
you just clicked on will be selected, along with all the messages in between. By
holding down the &Ctrl; key you can select any number of messages without those
in between. You may sort the messages by clicking on the column that you wish to
sort. If you click on the same column more then once, sort order will toggle
between ascending/descending. If you click on the <guilabel>Subject</guilabel>
column, you can toggle sorting between <guilabel>Subject</guilabel> ascending/descending and 
<guilabel>Status</guilabel> ascending/descending. 
Similarly, if you click on the <guilabel>Date</guilabel>
column, you can toggle sorting between <guilabel>Date</guilabel> ascending/descending and 
<guilabel>Date (Order of Arrival)</guilabel> ascending/descending.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Message pane (lower right pane)</term>
<listitem>
<para>This pane displays the currently selected
message. Attachments appear at the bottom of the message. 
You can scroll through the message page by page
using the <keycap>Page Up</keycap> and <keycap>Page down</keycap> keys, or line
by line using the <keycap>up arrow</keycap> and <keycap>down arrow</keycap>
keys. You can also use <link linkend="keyboard-shortcuts">key shortcuts</link> to skip through 
your messages without having to use the mouse.</para>
</listitem>
</varlistentry>
</variablelist>

</sect1>

<sect1 id="keyboard-shortcuts">
<title>Keyboard Shortcuts</title>

<para>The following keyboard shortcuts are supported in the main window:</para>

<informaltable>
<tgroup cols="2">
<thead>
<row>
<entry>Keyboard Shortcut</entry>
<entry>Action</entry>
</row>
</thead>
<tbody>
<row>
<entry><keycap>Space</keycap></entry>
<entry>Scroll down in the current message or go to the next unread message if you are already 
at the bottom.</entry>
</row>
<row>
<entry><keycap>Right Arrow</keycap> or <keycap>N</keycap></entry>
<entry>Go to the next message in the current folder.</entry>
</row>
<row>
<entry><keycap>Left Arrow</keycap> key or <keycap>P</keycap></entry>
<entry>Go to the previous message in the current folder.</entry>
</row>
<row>
<entry><keycap>+</keycap></entry>
<entry>Go to the next unread message in the current folder.</entry>
</row>
<row>
<entry><keycap>-</keycap></entry>
<entry>Go to the previous unread message in the current folder.</entry>
</row>
<row>
<entry><keycombo action="simul">&Ctrl;<keycap>+</keycap></keycombo></entry>
<entry>Go to the next folder with unread messages.</entry>
</row>
<row>
<entry><keycombo action="simul">&Ctrl;<keycap>-</keycap></keycombo></entry>
<entry>Go to the previous folder with unread messages.</entry>
</row>
<row>
<entry><keycombo action="simul">&Ctrl;<keycap>Left Arrow</keycap></keycombo></entry>
<entry>Walk upwards in the list of folders. Use 
<keycombo action="simul">&Ctrl;<keycap>Space</keycap></keycombo> to actually
enter the folder.</entry>
</row>
<row>
<entry><keycombo action="simul">&Ctrl;<keycap>Right Arrow</keycap></keycombo></entry>
<entry>Walk downwards in the list of folders. Use 
<keycombo action="simul">&Ctrl;<keycap>Space</keycap></keycombo> to actually
enter the folder.</entry>
</row>
<row>
<entry><keycombo action="simul">&Ctrl;<keycap>Space</keycap></keycombo></entry>
<entry>Enter the folder that has focus, &ie; the folder that you navigated
to using <keycombo action="simul">&Ctrl;<keycap>Left Arrow</keycap></keycombo> or
<keycombo action="simul">&Ctrl;<keycap>Right Arrow</keycap></keycombo>.</entry>
</row>
<row>
<entry><keycombo action="simul">&Shift;<keycap>Left Arrow</keycap></keycombo> and
<keycombo action="simul">&Shift;<keycap>Right Arrow</keycap></keycombo></entry>
<entry>Select messages in the header pane, starting with the current message.</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</sect1>

<sect1 id="the-composer-window">
<title>The Composer Window</title>

<para>The composer window is used to write new messages.
It can be invoked from the <menuchoice><guimenu>Message</guimenu></menuchoice>
menu or from the <guiicon>New Message</guiicon> icon on the <guilabel>Mail
Reader</guilabel> window button bar.</para>

<sect2 id="composing-a-message">
<title>Composing a Message</title>

<para>To write your message, fill in the appropriate fields in the
composer window. Use the <guimenu>View</guimenu> menu
to select which header fields are displayed. There are a variety of shortcuts to help
you with writing your messages. The <guiicon>ellipsis</guiicon> buttons next to
the <guilabel>To:</guilabel>, <guilabel>Cc:</guilabel>, and
<guilabel>Bcc:</guilabel> fields will call up the address book so that you can
select addresses from there.</para>

<para>When you start typing an address in the
<guilabel>To:</guilabel>/<guilabel>Cc:</guilabel>/<guilabel>Bcc:</guilabel>
fields, a popup will appear that offers matching addresses that have been used recently 
and matching addresses from your address book. If you don't like the automatic 
popup you can disable it by clicking with the &RMB; on the field and choosing 
a different completion mode.</para>

<para>Whenever you want to add more than one
recipient in one of the fields, use a comma to separate each address
from the next one. You may need to specify fully qualified addresses
(&ie; <userinput>user@domain.com</userinput>) even for local
users, depending on your system configuration.</para>

<para>When you are finished with your
message, click the <guiicon>Send</guiicon> icon (the envelope) to send
the message now, or click the <guiicon>Queue</guiicon> icon to put
the message in the outbox. If your message isn't finished yet, select
<menuchoice><guimenu>Message</guimenu><guimenuitem>Save in drafts
folder</guimenuitem></menuchoice>. If you want to send an <link
linkend="pgp-encrypt-your-messages">encrypted</link>
or <link linkend="pgp-sign-your-messages">digitally signed</link> message, select the
<guiicon>Sign Message</guiicon> resp. <guiicon>Encrypt 
Message</guiicon> icons in the toolbar.
</para> 

</sect2>

<sect2 id="attachments">
<title>Attachments</title>

<para>You can attach files to your message by using one of the methods
below:</para>

<itemizedlist>
<listitem>
<para>Click the <guiicon>paper clip</guiicon> button and select the file you wish
to attach.</para>
</listitem>
<listitem>
<para>Drag a file from the desktop or another directory into the
composer window.</para> 
</listitem>
<listitem>
<para>Select one of the options in the
<menuchoice><guimenu>Attach</guimenu></menuchoice> menu.</para>
</listitem>
</itemizedlist>

<para>Once a file is attached to your message, it appears in the attachments
pane at the bottom of the composer window. You can use the
&RMB; on each attachment to <guimenuitem>View</guimenuitem>,
<guimenuitem>Save</guimenuitem> or <guimenuitem>Remove</guimenuitem>
the attachment.</para>

<para>Use the <guimenuitem>Properties...</guimenuitem> item to
open the <guilabel>Message Part Properties</guilabel> dialog.
The first field contains the attachment's &MIME;-type. Just like the <guilabel>Name</guilabel>
field, it should be automatically filled with an appropriate value. Sometimes the
&MIME;-type value may be wrong. You can then type in any &MIME;-type or
choose from the list of common &MIME;-types. You can also select an encoding
method for your file from the list of encoding options (normally, the default
value works fine). Check the <guilabel>Suggest automatic display</guilabel> option 
if you want to suggest to the recipient the automatic (inline) display of this part 
in the message preview, instead of the default icon view.</para>

<para><application>PGP</application>/<application>GnuPG</application> keys may also 
be attached to your message by using the appropriate options in the
<menuchoice><guimenu>Attach</guimenu></menuchoice> menu. <application>PGP</application>
key attachments are handled like file attachments.</para>

<!-- TODO: "fixed" in the future? -->
<!-- copied from below -->
<warning><para>You can encrypt your messages sent with &kmail;, but this does
not mean that the attachments are encrypted. You have to encrypt your
attachments manually, using a shell command or some other tool before you attach
them.</para></warning>
<!-- / copied from below -->

</sect2>

<sect2 id="checking-the-spelling-of-your-message">
<title>Checking the Spelling of your Message</title>

<para>To check the spelling of your message, select
<menuchoice><guimenu>Edit</guimenu>
<guimenuitem>Spelling...</guimenuitem></menuchoice>. &kmail; uses &kspell; to
check spelling, which is the &kde; frontend to the 
<application>ispell</application> or <application>aspell</application> spelling
checker. Note that you may first need to configure the spellchecker using
<menuchoice><guimenu>Settings</guimenu>
<guimenuitem>Spellchecker...</guimenuitem></menuchoice>.</para>

</sect2>

</sect1>

<sect1 id="folders">
<title>Message Folders</title>

<para>Message Folders are used to organize your email messages. By default, all
message folders are stored in the directory <filename
class="directory">Mail</filename>, which is created in your home directory. When
you first start &kmail; the <guilabel>inbox</guilabel>,
<guilabel>outbox</guilabel>, <guilabel>sent-mail</guilabel>,
<guilabel>trash</guilabel> and <guilabel>drafts</guilabel> folders are created.
These folders each have special functions:</para>

<variablelist>
<varlistentry>
<term><guilabel>inbox:</guilabel></term>
<listitem>
<para>Where &kmail; by default puts your new messages when you ask it to check your
mail. </para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>outbox:</guilabel></term>
<listitem>
<para>Where messages are put while they are waiting to be delivered. </para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>sent-mail:</guilabel></term>
<listitem>
<para>Contains copies of all messages that you have sent. </para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>trash:</guilabel></term>
<listitem>
<para>Contains all messages that you have deleted.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>drafts:</guilabel></term>
<listitem>
<para>Contains messages you started to edit but then saved to this
folder instead of sending them.</para>
</listitem>
</varlistentry>
</variablelist>

<para>You may find that the standard folders are fine for your
needs. Eventually, though, you will probably need folders to help you organize
your messages. To create a new folder, select
<menuchoice><guimenu>Folder</guimenu><guimenuitem>Create...</guimenuitem></menuchoice>
A window will then prompt you for the name of the folder. If you don't want it
to be a top level folder, you may choose the folder under which it will
appear. If you ever need to change the settings for a folder, select the folder
you wish to modify in the Folders pane and select
<menuchoice><guimenu>Folder</guimenu><guimenuitem>Properties...</guimenuitem>
</menuchoice>.</para>
<!-- TODO: link to more detailed desc. of all options -->

<para>To move messages from one folder into another, select the message(s) you
want to move and press the <keycap>M</keycap> key or select
<menuchoice><guimenu>Message</guimenu><guimenuitem>Move
to</guimenuitem></menuchoice>. A list of folders will appear.  Select the folder
from the list that you want to move the messages to.  Messages can also be moved
by dragging them from the Headers pane into the Folders pane.</para>

<para>If you want to clear all of the messages out of a folder choose
<menuchoice><guimenu>Folder</guimenu><guimenuitem>Empty</guimenuitem></menuchoice>.
All the messages in the selected folder will then be moved to the trash folder. If
the selected folder is the <guilabel>trash</guilabel> folder, all of the
messages will be permanently deleted.</para>

<para>You can use 
<menuchoice><guimenu>Folder</guimenu><guimenuitem>Remove</guimenuitem></menuchoice>
to remove a folder and all its messages if you choose <guibutton>Remove</guibutton>
from the appearing confirmation dialog, but unlike with
<menuchoice><guimenu>Folder</guimenu><guimenuitem>Empty</guimenuitem></menuchoice>
there's no way to get the contents of the folder back.</para>

</sect1>

<sect1 id="filters">
<title>Message Filters</title>
<anchor id="filters-id"/>

<para>After using &kmail; for a while, you may find that you have trouble
sorting out the new messages in your inbox when they arrive. Filters allow you
to automatically perform certain actions on incoming messages and to manually
perform actions on selected messages in a folder.</para>

<para>Please note that the filters described in this section are
applied <emphasis>after</emphasis> the messages have been downloaded
from your account. If you want to filter messages on the server, see
<link linkend="popfilters">Download Filters</link>.</para>

<para>Filters consist of a search pattern, whose rules are used as
criteria to determine whether this filter should be applied to a given
message, and a list of filter actions, which describe what is being
done with or to the message if the search pattern matches. Read more
about search patterns and filter actions in the following
subsections.</para>

<caution><para> Filters are considered one after the other,
starting with the first filter in the list. The first one whose
pattern matches the given message gets executed. You can request that
the remaining filters also be applied, but the default is to stop
processing at the first matching filter. </para></caution>

<para>Usually, filters are used on incoming messages, but they can
also be applied to sent messages or to an arbitrary message or group
of messages. To selectively filter messages, select the messages you
want to filter in the message list and type <keycombo
action="simul">&Ctrl;<keycap>J</keycap> </keycombo> or select
<menuchoice><guimenu>Message</guimenu> <guimenuitem>Apply
Filters</guimenuitem></menuchoice>. This will apply all filters that
have been marked for manual filtering in the <link
linkend="filter-dialog">filter dialog</link> to those messages.</para>

<sect2 id="filter-quick">
<title>Fast Filter Creation</title>

<para>There are two methods for creating a filter: The quick method is
to use <menuchoice><guimenu>Message</guimenu><guimenuitem>Create
Filter</guimenuitem></menuchoice>. This will call the filter dialog
and present you with a new filter which has the first rule of the
search pattern and the first action (as <guilabel>move to folder</guilabel>) preset. In
most cases, all you have to do is select the folder where the message
should be moved to. But you can, of course, edit the filter as you
like.</para>

<para>The interesting thing about this method is that creating a
filter on mailing lists will try really hard to find a criterion that
uniquely identifies messages from that list. If it succeeds, the guessed
name of the list is presented in the
<menuchoice><guimenu>Message</guimenu><guisubmenu>Create
Filter</guisubmenu><guimenuitem>Filter on
Mailing-List...</guimenuitem></menuchoice> menu entry.</para>

<para>The second method is to manually construct a filter from scratch
by calling the filter dialog through
<menuchoice><guimenu>Settings</guimenu><guimenuitem>Configure 
Filters...</guimenuitem></menuchoice>. The filter dialog is described in
detail in the following subsection.</para>
</sect2>

<sect2 id="filter-dialog">
<title>The Filter Dialog</title>
<anchor id="filter-dialog-id"/>

<para>This dialog allows you to manage and edit your list of
filters.</para>

<para>You reach it either via
<menuchoice><guimenu>Message</guimenu><guisubmenu>Create
Filter</guisubmenu></menuchoice> or
<menuchoice><guimenu>Settings</guimenu><guimenuitem>Configure 
Filters...</guimenuitem></menuchoice>.</para>

<para>The dialog is divided into four main sections:</para>
<variablelist>
<varlistentry>
<term><guilabel>Available Filters</guilabel></term>
<listitem><para>This group contains the list of filters and some action
buttons to modify the filters, namely to create new filters, to move
them up or down the list, or to delete or rename them. If you select
a filter from the list, its properties are shown in the right-hand half
of the dialog.</para></listitem>
</varlistentry>
<varlistentry>
<term><guilabel>Filter Criteria</guilabel></term> <listitem><para>In
this group you can edit the pattern that messages must match for the
filter to be applied to them. You can select here whether all of the
defined rules must match or whether it suffices that any one of them
matches. See <link linkend="filter-criteria">Search Patterns</link>
below for a detailed description of each search rule type.</para>

<para> You can click on <guibutton>More</guibutton> to get an
additional (initially empty) rule if you want to define more complex
patterns and on <guibutton>Fewer</guibutton> to remove the last
rule. <guibutton>Clear</guibutton> clears the pattern, &ie; it removes
all but two rules from screen and resets those two.</para>
<para>Invalid or empty rules are not evaluated.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>Filter Actions</guilabel></term> <listitem><para>In
this group you can edit the list of actions that is applied to all
messages that match the defined search pattern. See <link
linkend="filter-action">Filter Actions</link> below for a detailed
description of each action type.</para>

<para> You can click on <guibutton>More</guibutton> to get a new,
empty action if you want to define more than one action and on
<guibutton>Fewer</guibutton> to remove the last
action. <guibutton>Clear</guibutton> clears the list, &ie; it
removes all but one action and resets that one.</para>
<para>Invalid or empty actions are not executed.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>Advanced Options</guilabel></term>
<listitem><para> In
this group you can define a few advanced options for filters that
allow you to refine your filtering.</para>
<para>Using the first row
of check boxes, you can toggle the applicability of the corresponding
filter: The <guilabel>incoming messages</guilabel> check shows whether
it may be considered for incoming messages (&ie; on <guimenuitem>Check
Mail</guimenuitem>). The <guilabel>sent messages</guilabel> check
shows the same for sent messages (&ie; <emphasis>after</emphasis>
<guimenuitem>Send</guimenuitem>) and the <guilabel>manual
filtering</guilabel> check controls whether to apply this filter when
filtering manually (&ie; via <menuchoice><guimenu>Message</guimenu>
<guimenuitem>Apply filters</guimenuitem></menuchoice>).</para>
</listitem>
</varlistentry>
</variablelist>

<note><para>Filters are automatically named unless you explicitely
rename them using the <guibutton>Rename...</guibutton> button.
The dialog assumes that it should continue auto-naming the filter
as long as the filter name starts with <quote>&lt;</quote>.
</para></note>

<note>
<para>If you apply filter changes, via
<guibutton>OK</guibutton> or <guibutton>Apply</guibutton>, only valid
filters are actually copied to the internal filter manager.</para>

<para>A filter is considered invalid if</para>

<orderedlist>
<listitem><para>the search pattern contains only empty rules or</para></listitem>
<listitem><para>the action list is empty.</para></listitem>
</orderedlist>

<para>Similarly, empty rules and actions are removed from the pattern
and action list respectively, before the filter is saved.</para>
</note>

</sect2>

<sect2 id="filter-criteria">
<title>Search Patterns</title>

<para>The most common use of filters is to filter on the sender of
messages. This can be done by choosing <guilabel>From</guilabel>. A
good bet for a mailing list would be
<guilabel>&lt;recipients&gt;</guilabel>. But there are other criteria
a filter can search for:</para>

<variablelist>
<varlistentry>
<term><guilabel>&lt;message&gt;</guilabel></term>
<listitem>
<para>Searches the whole message (&ie; headers, body and attachments,
if any).</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>&lt;body&gt;</guilabel></term>
<listitem>
<para>Searches the body of the message.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>&lt;any header&gt;</guilabel></term>
<listitem>
<para>Searches the headers of the message.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>&lt;recipients&gt;</guilabel></term>
<listitem>
<para>Searches the <quote>To</quote> and <quote>Cc</quote> header fields of the message.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>&lt;size&gt;</guilabel></term>
<listitem>
<para>Sets upper or lower bounds on the message size.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>&lt;age in days&gt;</guilabel></term>
<listitem>
<para>Sets upper or lower bounds on the message age.</para>
</listitem>
</varlistentry>
<varlistentry>
<term>Any other name</term>
<listitem>
<para>Searches the header field that is given by that name.</para>
</listitem>
</varlistentry>
</variablelist>

</sect2>

<sect2 id="filter-action">
<title>Filter Action</title>

<para>The most common use of filters is to sort incoming messages to
certain folders. This can be done by choosing <guilabel>move to
folder</guilabel>. Here's a list of all possible actions:</para>

<variablelist>
<varlistentry>
<term><guilabel>move to folder</guilabel></term>
<listitem>
<para>This will move the message to another folder. You currently 
cannot use <acronym>IMAP</acronym> folders as a target.</para>
<!-- fixme: still correct? -->
</listitem>
</varlistentry>
<!-- TODO: does not exist yet
<varlistentry>
<term><guilabel>copy to folder</guilabel></term>
<listitem>
<para>This will copy the message to another folder.</para>
<caution><para>You currently cannot use <acronym>IMAP</acronym>
folders as a target.</para></caution>
</listitem>
</varlistentry>
-->
<varlistentry>
<term><guilabel>set identity to</guilabel></term>
<listitem>
<para>This will set <emphasis>your</emphasis> identity if you reply to this
message.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>mark as</guilabel></term>
<listitem>
<para>This allows you to mark the message as read or important (flagged), but
also as forwarded, replied, &etc;</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>set transport to</guilabel></term>
<listitem>
<para>This will set the method of transport (&eg; <acronym>SMTP</acronym>) if
you reply to the message.</para>
</listitem>
</varlistentry> 
<varlistentry>
<term><guilabel>set Reply-To to</guilabel></term>
<listitem><para>Will modify the <guilabel>Reply-To</guilabel> field of this
message. This can be useful for mailing lists that automatically set a Reply-To
which you don't like.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>forward to</guilabel></term>
<listitem><para>Will forward the message to another email address.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>redirect to</guilabel></term>
<listitem><para>Will redirect the message to another email address.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>bounce</guilabel></term> <listitem><para>Will try to
return the message to the sender as undeliverable.</para>

<caution><para>This will only work if the senders email address is
valid. That's <emphasis>not</emphasis> the case for most
spam.</para></caution>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>confirm delivery</guilabel></term>
<listitem><para>Will try to return a message to the sender that
indicates successful delivery of his or her message.</para> <para>This
action allows you to select who will get delivery receipts from
you. Though you can globally enable the sending of delivery
confirmations in the <guilabel>Configure &kmail;...</guilabel> dialog
(<link linkend="configure-security-general"><guilabel>Security</guilabel>
page</link>) we recommended to not send them to everyone, since this
makes tracking of such things as spam very easy for the sender.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>execute command</guilabel></term>
<listitem>
<para>This will execute a program, but will not modify the
message. Specify the full path to the program you want to
execute. &kmail; will block until the program returns. You can feed
the program with the parts of the mail: <symbol>&percnt;0</symbol>,
<symbol>&percnt;1</symbol>, &etc; will stand for files representing
the message parts. For common messages <symbol>&percnt;0</symbol> is the
text, <symbol>&percnt;1</symbol> the first attachment and so
on. Additionally, the whole message is fed into the program's
<acronym>stdin</acronym>.</para>

<!-- fixme: still correct? -->
<caution><para>This currently only works if the message has
<emphasis>at least one</emphasis> attachment. No, not even
<symbol>&percnt;0</symbol> will work in the general
case!</para></caution>

<tip><para> You can enter arbitrarily complex shell commands here,
since &kmail; uses a subshell to execute the command line. Therefore,
even this command will work (within its limits):
<userinput><command>uudecode</command> <option>-o</option>
<parameter>$(mktemp kmail-uudecoded.XXXXXX)</parameter> &amp;&amp;
<command>echo</command> <parameter>$'\a'</parameter></userinput></para></tip>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>pipe through</guilabel></term>
<listitem>
<para>This will feed the message to a program. If that program returns
output, the entire message (including the headers) will be replaced
with this output. If the program doesn't return output, the message
won't change.  Specify the full path to the program.</para>
<caution><para>Be cautious with this action, as it will easily mess up
your messages if the filter program does return garbage or extra
lines.</para></caution>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>remove header</guilabel></term>
<listitem>
<para>Will remove <emphasis>all</emphasis> header fields with the
given name from the message. This is useful mainly for removing bogus
<quote>Reply-To:</quote> headers.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>add header</guilabel></term>
<listitem>
<para>If no such field is already present, will add a new header field
with the given name and value to the message. If there is already a
header field with that name, it is overwritten with the new (the
given) value. If there are already multiple headers with the given
name (&eg; <quote>Received:</quote> headers), an arbitrary one of them is
overwritten and the others are left unchanged. This is a known
limitation. You may want to combine this filter with the
<guilabel>remove header</guilabel> filter above to make sure that
there are no other headers with that name in the message.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>rewrite header</guilabel></term>
<listitem>
<para>Will scan the given header field, modify its contents and write
it back. The search string is always interpreted as a case-sensitive
regular expression. The replacement string is inserted literally
except for occurrences of <userinput>\n</userinput>,
<userinput>$n</userinput> and <userinput>${nn}</userinput>, where
<userinput>n</userinput> is a positive (single-digit, except for the
third form) number or <userinput>0</userinput>. These constructs are
interpreted as backreferences to substrings captured with parentheses
in the search string.</para><para>Analogous restrictions as in the
<guilabel>add header</guilabel> action apply here, too.</para>
</listitem>
</varlistentry>
</variablelist>

</sect2>

<sect2 id="filter-examples">
<title>Filter Examples</title>

<para>If I am subscribed to the (general) &kde; List, I could create a
folder for the list (I'll call it
<replaceable>KDE-General</replaceable>) and use a filter to
automatically transfer new messages from my inbox to my
<replaceable>KDE-General</replaceable> folder if they are from the
&kde; List. Here is how to create this filter:</para>

<procedure>
<title>Filtering a mailing list</title>
<step>
<para>Try if <menuchoice><guimenu>Message</guimenu><guisubmenu>Create
filter</guisubmenu><guimenuitem>Filter on
Mailing-List...</guimenuitem></menuchoice> can identify the mailing
list (the name of the list should then appear in the menu item). In
this case, this works and I am presented a filter that has
<quote>X-Mailing-List <guilabel>equals</guilabel>
&lt;kde@lists.netcentral.net&gt;</quote> preset. You select the
desired destination folder from the folder pull-down menu in the
<guilabel>Filter Action</guilabel> group and that's it!</para>

<para>If that does not work, think of a unique way of identifying the
messages you want to filter. The (almost) unique property of my &kde;
List messages is that they always contain
<quote>kde@lists.netcentral.net</quote> in the
<guilabel>To:</guilabel> or <guilabel>Cc:</guilabel> field. It's only
almost unique, because this fails for cross-posted messages.</para>
</step>
<step>
<para>Select <menuchoice><guimenu>Settings</guimenu><guimenuitem>Configure 
Filters...</guimenuitem></menuchoice>.</para>
</step>
<step>
<para>Press the <guibutton>New</guibutton> button to create an empty
filter. It will appear as <guilabel>&lt;unnamed&gt;</guilabel>.</para>
</step>
<step>
<para>In the <guilabel> Filter Criteria</guilabel> area, select
<guilabel>&lt;recipients&gt;</guilabel> from the first pull-down menu,
<guilabel>contains</guilabel> from the second pull-down menu, and type
<userinput>kde@lists.netcentral.net</userinput> in the text
field.</para>
</step>
<step>
<para>Skip down to the actions section. Select <guilabel>move to
folder</guilabel> from the first pull-down menu. A new pull-down menu
containing a list of folders will appear. Select the folder that you
want the filtered messages to be transferred to if they match the
criteria you selected. For this example, you would select
<guilabel>KDE-General</guilabel> from the pull-down menu.</para>
</step>
</procedure>

<para>You may find that you need to use more powerful criteria to
properly filter your messages. For example, you may only want to
filter the &kde; List messages that are written by your friend Fred
Johnson &lt;fj@anywhere.com&gt;. This is where the rest of the
matching criteria section comes into play:</para>

<procedure>
<title>Extending the filter</title>
<step>
<para>Open up the <guilabel>Configure Filters...</guilabel> window and select
the filter you just created.</para>
</step>
<step>
<para>Since you want to filter all messages that have
<quote>kde@lists.netcentral.net</quote> in the
<guilabel>To:</guilabel> or <guilabel>Cc:</guilabel> field
<emphasis>and</emphasis> that are from Fred, check the
<guibutton>Match all of the following</guibutton> radio
button.</para>
</step>
<step>
<para>Now, go to the second search rule and select the following from
the pull-down menus: <guilabel>From</guilabel>,
<guilabel>contains</guilabel>. Now, type
<userinput>fj@anywhere.com</userinput> in the text field.</para>
</step>
</procedure>

<para>You now have a filter that transfers all &kde; List messages
that are from fj@anywhere.com.</para>
</sect2>
</sect1>

<sect1 id="popfilters">
<title>Download Filters</title>

<para>Download Filters can be used to filter mails from a POP server,
<emphasis>before</emphasis> they are completely downloaded. You can use
it to prevent &kmail; from downloading huge mails and save time this
way.</para>

<!-- fixme in kmail: Filter mail on server: bytes!! -->

<para>In the configuration dialog of the POP account you can enable 
download filtering by checking the <guilabel>Filter mail on
server</guilabel> box. Once you did that, you can specify a size 
which is used as a threshold. Messages exceeding this size will be
checked against the filter rules you defined. If no filter rule
matches, they will be shown in a confirmation dialog and you can
decide what to do with them. The default size for filtering is 50000
Bytes. This is a good value as the overhead is kept to a minimum.
Every message that is looked at by the filter causes additional
traffic because the header of the mail is downloaded twice. The
default action is <guilabel>Download mail</guilabel> to prevent the
loss of messages.</para>

<warning><para>Be careful with the <guilabel>Delete mail from
server</guilabel> option since once a mail is deleted on the server
there is no way to get it back.</para></warning>

<para>With a really good set of filter rules, it is possible that all
messages that exceeds the threshold size are automatically tagged
(&ie; downloaded, kept on the server or deleted) and you would never
be bugged by the confirmation dialog. Be careful though, since once a
message is matched by a filter rule, you have no guarantee that you
can change the action before it is executed. Only if there is a
message left that was not matched by a filter rule the confirmation
dialog will show up.</para>

<sect2 id="popfilters-dialog">
<title>The <guilabel>Configure Pop Filter</guilabel> Dialog</title>

<para>Adding filter rules work similar as for <link
linkend="filters">message  filters</link>. On the left hand side you
can manage the existing filters. Use the <guiicon>New</guiicon>
button to add a filter. On the right hand side you can configure
under which conditions the current filter should match. <!-- fixme:
(in kmail?): no 'body' option??? --> Using <guilabel>Filter
Action</guilabel> you specify what will happen to a message that is 
matched by this rule. The available options are:</para>

<variablelist>

<varlistentry>
<term><guilabel>Download mail</guilabel></term>
<listitem>
<para>Will download the messages matched by the filter, just as any other message
that does not exceed the threshold size.</para>
</listitem>
</varlistentry>

<varlistentry>
<term><guilabel>Download mail later</guilabel></term>
<listitem>
<para>Will tag the messages for later download. This means the messages matched
will stay on the POP server until you choose to download them by
changing the action manually.</para></listitem>
</varlistentry>

<varlistentry>
<term><guilabel>Delete mail from server</guilabel></term>
<listitem>
<para>Will delete the message from the server and does not download it. Once you 
deleted a message from the server, there is <emphasis>no</emphasis> way you can undo this.
Be careful, as rules could match messages you actually want, too.</para></listitem>
</varlistentry>

</variablelist>

<para>The option <guilabel>Always show matched 'Download Later' messages in
confirmation  dialog</guilabel> will cause the confirmation dialog to
show up during mailbox check if at least one message was tagged for
<guilabel>Download Later</guilabel> - even if all messages exceeding
the threshold size were matched by a rule. This option is useful in the
case you have messages matched by a rule and tagged for
<guilabel>Download Later</guilabel>, but you don't get any message
exceeding the size limit for a very long time. Without this option,
the confirmation dialog would never show up and you would never have
a chance to get the queued message by changing the action manually.</para>

</sect2>

<sect2 id="popfilters-confirmation">
<title>Confirmation Dialog</title>

<para>This dialog shows up whenever you have POP filtering switched
on and  messages were found on the server that exceed the threshold
size you defined for the POP account. Now you have the chance to
decide what you want to do with that message. The options are
<guilabel>download</guilabel> (green), <guilabel>download
later</guilabel> (yellow with eggwatch) and <guilabel>delete from
server</guilabel> (red <quote>x</quote>). Be cautious with the delete
option, since once you deleted a mail from the server, there is no
way to undelete it again.</para>

<para>In the <guilabel>Filtered Messages</guilabel> section you can
check the box if you got messages that were automatically tagged for
a certain action (download, download later, delete) by a filter rule.
The checkbox is only enabled if you got some messages that were
matched by a filter rule. Once you check it, a list similar to the
one for the not automatically tagged messages will show up and you 
can change the action for every single message.</para>

<para>Please note that if there is a message exceeding the size
limit, but all messages are matched by a filter rule the dialog will
not show up. One exception occurs if you have checked 
<guilabel>Always show matched 'Download Later' messages</guilabel> in
the <guilabel>Global Options</guilabel> section of the POP filter
configuration dialog. Then the dialog will also show up if you only
have matched messages, but at least one got tagged for
<guilabel>download later</guilabel>.</para>

</sect2>

</sect1>

<sect1 id="multiple-accounts">
<title>Multiple Accounts</title>

<para>Multiple accounts are used to check for messages from more than one email address
and/or mail server. Select <menuchoice><guimenu>Settings</guimenu>
<guimenuitem>Configure &kmail;...</guimenuitem></menuchoice> and click on the
<guilabel>Network</guilabel> tab to add or change your account settings. See the
<link linkend="getting-started">Getting started</link> section for more
information on the settings in the <guilabel>Network</guilabel> tab.</para>

<para>To check for messages from a particular account, use the
<menuchoice><guimenu>File</guimenu><guimenuitem>Check Mail
in...</guimenuitem></menuchoice> submenu to select the account to check
for mail. You can also press the mouse button on the <guiicon>Check
Mail</guiicon> icon for some time to get a list of accounts.</para>

</sect1>

<sect1 id="pgp">
<!-- This section is from Andreas Gungl, 2000-05-21, updated 2002-01-xy -->
<title><application>Pretty Good Privacy</application>
(<application>PGP</application>) / <application>GNU Privacy Guard</application>
(<application>GnuPG</application>)</title>

<para>This is a short introduction on how to setup &kmail;'s
<application>PGP</application> support. It will give some hints on the use of
<application>PGP</application> too. It's written for people who are beginners in
this area. If you are familiar with the use of <application>PGP</application>, you can
skip most of the steps. This documentation (and the &kmail; user interface) 
generally talks only about  <quote>PGP</quote>, but it applies to 
both <application>PGP</application> and <application>GnuPG</application>, 
although some <application>GnuPG</application> command line parameters 
may be different.</para>

<para>Please
also check out the <link linkend="pgp-faq">&FAQ; item about
<application>PGP</application></link>.</para>

<warning><para>You can encrypt your messages sent with &kmail;, but this does
not mean that the attachments are encrypted. You have to encrypt your
attachments manually, using a shell command or some other tool before you attach
them.</para></warning>

<warning><para>&kmail; has to rely on <application>PGP</application>'s
output. This output is often different between different version of
<application>PGP</application>, so it's important that you test if encryption
really works with your setup before you start using it seriously. &kmail; might
<emphasis>not</emphasis> warn you if something fails. You better enable 
<guilabel>Show ciphered/signed text
after composing</guilabel>.  </para></warning>

<para>To setup and use <application>PGP</application> support in &kmail; it is
necessary to have <application>PGP</application> installed and set up
properly. Of course we cannot give you a full introduction of
<application>PGP</application> here. We will only mention the steps you have to
do to get <application>PGP</application> going. For details you should have a look at 
the excellent  <application>PGP</application> documentation 
or <ulink url="http://www.gnupg.org/docs.html#guides">The GNU Privacy Handbook</ulink>.</para> 

<para>It is certainly a good idea to study this documentation as well as an
introduction into public key cryptography (&eg; out of the
<application>PGP</application> 6.5.x package). There you can learn a lot about
the basic concepts, which will help you to understand what is going on. As well,
many security related issues you should know about are discussed there.</para>

<para>Now let's start.</para>

<sect2 id="pgp-preconditions">
<title>Preconditions</title>

<para>&kmail; expects that your <application>PGP</application> binary is called
<command>pgp</command>.  In case of <application>GnuPG</application>, it expects
the binary to be called <command>gpg</command>. If that's not the case for you,
just make a symlink.</para>

<para>If you haven't done so, you have to generate a key pair (secret and public
key) for your identity. You must do this at the command line: use
<userinput><command>pgp</command> <option>-kg</option></userinput>
resp. <userinput><command>gpg</command> <option>--gen-key</option></userinput>.  &kmail;
has no internal support for <application>pgp</application>'s key generation at
this time. The identity (normally your name followed by your email address
within brackets, such as <userinput>John Doe
&lt;john@example.com&gt;</userinput>) and your passphrase are important for the
co-operation between &kmail; and <application>pgp</application>.</para>

</sect2>

<sect2 id="pgp-settings">
<title><application>PGP</application> Related Settings in &kmail;</title>

<para>Enter your <application>PGP</application> user identity in the
corresponding field of the <guilabel>Identity</guilabel> settings.
Then select the <guilabel>OpenPGP</guilabel> tab on
the <guilabel>Security</guilabel> settings page. There you'll find the
following options:</para>

<variablelist>

<varlistentry>
<term><guilabel>Encryption tool</guilabel></term>
<listitem>
<para>Here you can choose if you want to use <application>PGP</application>,
<application>GnuPG</application> or no encryption
software at all. Of course the program you select has to be
installed on your system. It is also important to select the correct
version.</para>
</listitem>
</varlistentry>

<varlistentry>
<term><guilabel>Keep passphrase in memory</guilabel></term>
<listitem>
<para>When this option is off, &kmail; will ask for your passphrase each
time you sign a message (before sending) or select an encrypted message.
If you turn this option on, &kmail; will remember your passphrase from
after your first successful input until you finish your &kmail; session. The
passphrase is stored in memory and not written to the hard disk.</para>
</listitem>
</varlistentry>

<varlistentry>
<term><guilabel>Always encrypt to self</guilabel></term>
<listitem>
<para>If this option is off and you want to send an encrypted message to somebody,
then you can't read this message any longer after you have composed and
encrypted it. Turn this option on to keep sent encrypted messages readable for
you too.</para>
</listitem>
</varlistentry>

<varlistentry>
<term><guilabel>Show ciphered/signed text after composing</guilabel></term>
<listitem>
<para>This will show you the result of encrypting and signing before the message
gets sent. This way you can still cancel sending if encrypting failed. It is
strongly recommended to use this option.</para> 
</listitem>
</varlistentry>

<varlistentry>
<term><guilabel>Always show the encryption keys for approval</guilabel></term>
<listitem>
<para>This will always open a dialog that lets you choose the key used for
each recipient when you are sending an encrypted message. If this
option is off, &kmail; will show this dialog only when it cannot
find a key for a recipient.</para> 
</listitem>
</varlistentry>

</variablelist>

<para>In the <guilabel>Composer</guilabel> section you can also check the
<guilabel>Automatically sign messages using OpenPGP</guilabel> option. This means
that all your messages will be signed before being sent. (So you don't have to
set the signing option for each message manually.)</para>

<para>Now you are able to sign outgoing messages. To let people send you
encrypted messages and to let them verify your signature you
must send them your public key or upload your public key to a public
<application>PGP</application> key server so that they can fetch your key from there.
To send encrypted messages to other people or to verify their signed
messages you will need their public keys.  You can store your public key(s) on a
public <application>PGP</application> key server such as <ulink
url="http://www.cam.ac.uk.pgp.net/pgpnet/">http://www.cam.ac.uk.pgp.net/pgpnet/</ulink>.</para>

</sect2>

<sect2 id="pgp-sign-your-messages">
<title>Sign your Messages</title>

<para>You compose your message as usual in the composer
window of &kmail;. Before you send the message, check the <guiicon>Sign Message</guiicon>
icon the toolbar of the composer window. Then, you can send
the message. The identity you are using the write the current message needs to 
be connected to an <guilabel>OpenPGP Key</guilabel> in the <guilabel>Identity</guilabel>
section of the <guilabel>Configure</guilabel> dialog.
To sign the message, &kmail; needs to know your <application>PGP</application> 
passphrase. If you didn't select <guilabel>Keep passphrase in memory</guilabel> in the
<guilabel>Security</guilabel> section, &kmail; will ask you for it.  On the
other hand, if you have already given the phrase to &kmail;, it will sign the
message without any further prompt.</para>

</sect2>

<sect2 id="pgp-encrypt-your-messages">
<title>Use Public Keys of other People - Encrypt your Messages</title>

<para>To send an encrypted message to somebody of whom you have a
public key, you simply create the message in the composer window.
Before you send the message, check the <guibutton>Encrypt
Message</guibutton> button in the toolbar of the composer window. Note
that you don't have to check the button if <guilabel>Automatically
encrypt messages whenever possible</guilabel> is selected in
&kmail;'s configuration. Then send the message.</para> <!-- fixme
3.1? -->

<para>If &kmail; can't find a matching key for a recipient or if it
finds more than one key for a recipient, it will display a list
containing all available trusted keys in the <guilabel>Encryption
Key Selection</guilabel> dialog. Using the <guilabel>Remember choice</guilabel>
checkbox you can save your selection for future messages.</para>

<para>If you are using a key for the first time or if <guilabel>Always
show the encryption keys for approval</guilabel> is selected in the
<guilabel>Security</guilabel> section of &kmail;'s configuration dialog,
the <guilabel>Encryption Key Approval</guilabel> dialog will appear.
Here you can select a different key for the recipients and you can also 
set the <guilabel>Encryption Preference</guilabel> for each recipient.
The default option, <guilabel>Encrypt whenever encryption is
possible</guilabel>, will automatically encrypt your message if there's a 
trusted key for each recipient.</para>

<para>As mentioned above, you won't be able to read your own encrypted sent
messages if you don't check <guilabel>Always encrypt to self</guilabel> in the
setting's <guilabel>Security</guilabel> tab. However, note that your
own key is not listed in the <guilabel>Encryption Key Approval</guilabel> dialog 
even if that option is set.</para>

</sect2>

<sect2 id="pgp-send-your-public-key">
<title>Send your Public Key</title>

<para>Prepare a message to the person you want to send your public key to. Then
choose in the composer window's menu
<menuchoice><guimenu>Attach</guimenu><guimenuitem>Attach My Public
Key</guimenuitem></menuchoice>. This will attach the public key you
defined for the current identity to the message. Now you can send the message.</para>

<para>Remember that it's not safe at all if you sign the message to make sure
that the receiver will get the correct key. There can be a man-in-the-middle
attack, as somebody can change the key and sign the message with that other
key. That's why the recipient should verify the attached key by checking the
key's fingerprint against the one he got in a secure way from you. Have a look
at the <application>PGP</application> documentation for further details.</para>

</sect2>

<sect2 id="pgp-you-got-an-encrypted-message">
<title>You got an encrypted Message</title>

<para>All you have to do is to select the message in &kmail;. You will be
prompted for your passphrase. Then &kmail; will try to decrypt the message and
show you the plain text if the message had been encrypted with your public
key. (If not, then you won't be able to read it.) &kmail; stores the messages
encrypted, so nobody can read these messages without knowing your passphrase.</para>

</sect2>

<sect2 id="pgp-receiving-a-public-key">
<title>Receiving a Public Key</title>

<para>You can receive a public key as an attachment or via http, ftp or a floppy.
Before you can use this key to encrypt a message to the owner of the
key, you should verify the key (check its fingerprint or look for
trusted signatures). Then you can add this key to your public keyring
by typing <userinput><command>pgp</command> <option>-ka</option>
<replaceable>filename</replaceable></userinput> at the command line if you are using 
<application>PGP</application> or by typing 
<userinput><command>gpg</command> <option>--import</option>
<replaceable>filename</replaceable></userinput> at the command line if you are using
<application>GnuPG</application>. If the key is not certified with a trusted signature 
you can't use it to encrypt messages unless you have signed the key with your key
(use <userinput><command>pgp</command> <option>-ks</option> <replaceable>identity of 
the key</replaceable></userinput> resp.
<userinput><command>gpg</command> <option>--sign-key</option> 
<replaceable>identity of the key</replaceable></userinput>).
</para>

</sect2>

</sect1>
</chapter>

<chapter id="configure">
<title>Configure &kmail;</title>

<para>&kmail;'s configuration window enables you to configure &kmail;
in many ways. You can reach it via
<menuchoice><guimenu>Settings</guimenu><guimenuitem>Configure
&kmail;...</guimenuitem></menuchoice>.</para>

<para>It is divided into six
<!-- fixme: update when plugin page becomes available -->
pages, each of them represented by one of the
icons in the list on the left hand side of the dialog. This chapter
will describe each page in detail.</para>

<sect1 id="configure-identity">
<title>The <guilabel>Identity</guilabel> Page</title>

<para>You can find a quick introduction to the
<guilabel>Identity</guilabel> page in the <link
linkend="getting-started">Getting Started</link> section.</para>

<para>This page allows you to create one or more
<emphasis>Identities</emphasis>, &ie; combinations of name, email
address and other settings. For example, you can create one identity
for business communication and one for
personal communication. If you have more than one email
address, you can create one identity per address. You will then be
able to select an address on a per-message basis.</para>

<para>The page consists of a popup menu named
<guilabel>Identity</guilabel>, three buttons to perform some general
identity list management and three tabs holding each identity's
settings.</para>

<para>The <guilabel>Identity</guilabel> popup will always show at
least one identity: the <guilabel>Default</guilabel> identity. You
cannot delete and you cannot rename the <guilabel>Default</guilabel>
identity.</para>

<para>To rename the currently selected identity, click on the
<guibutton>Rename...</guibutton> button. A small dialog will come up
asking for the new name of the identity.</para>

<para>To delete the currently selected identity, click on the
<guibutton>Remove</guibutton> button and confirm the action in the
dialog that pops up.</para>

<para>Please note that the <guilabel>Default</guilabel>
identity cannot be renamed and removed.</para>

<para>To add a new identity to the identity list, click on the
<guibutton>New...</guibutton> button. A dialog will come up that
allows you to select certain defaults for your new identity.</para>

<!-- TODO?: s/dialog/form(ular)/? since it's not really a dialog (see iface hall of shame) -->
<sect2 id="configure-identity-newidentitydialog">
<title>The <guilabel>New Identity</guilabel> Dialog</title>

<para>You can reach this dialog via &kmail;'s <link
linkend="configure">configure dialog</link>.</para>

<para>You can enter the name of the new identity into the
<guilabel>New Identity</guilabel> edit field. This will be the name
shown in the identity list.</para>

<para>You can choose how the new identity should be initialized by
checking one of the three radio buttons in the middle of the
dialog:</para>
<variablelist>
<varlistentry>
<term><guilabel>With empty fields</guilabel></term>
<listitem>
<para>All fields of the new identity are cleared or preset with
standard values.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>Use Control Center settings</guilabel></term>
<listitem>
<para>Uses the settings of the <application>Control
Center</application>'s default email profile (you can edit that one
under <menuchoice><guimenu>Personalization</guimenu>
<guimenuitem>Email</guimenuitem></menuchoice> in the
<application>Control Center</application>).</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>Duplicate existing identity</guilabel></term>
<listitem>
<para>Copies all fields from an already existent identity. You can
choose which identity to copy from by selecting the corresponding
entry in the <guilabel>Existing identities</guilabel> popup.</para>
</listitem>
</varlistentry>
</variablelist>
</sect2>

<sect2 id="configure-identity-general">
<title><guilabel>General</guilabel> Tab</title>

<para>The <guilabel>General</guilabel> tab allows you to specify some
basic settings for the currently selected identity.</para>
<variablelist>
<varlistentry>
<term><guilabel>Name</guilabel></term>
<listitem>
<para>Enter your full name here (sometimes also called <emphasis>display name</emphasis>).
Although this field isn't strictly mandatory, it is recommended to enter 
the correct value here.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>Organization</guilabel></term>
<listitem>
<para>Enter your organization here. This field is 
optional. Most programs will show this information in a separate
header field <guilabel>Organization</guilabel>. &kmail;, however, puts
it between parentheses and displays is together with the email address
in the <guilabel>From</guilabel> header field.</para>
</listitem>
</varlistentry>
<varlistentry>
<term><guilabel>Email Address</guilabel></term>
<listitem>
<para>Enter your email address here (without the <emphasis>display
name</emphasis>).</para>
</listitem>
</varlistentry>
</variablelist>
<para>So if your email address is <replaceable>Joe User
&lt;joe@example.com&gt;</replaceable>, you should enter <userinput>Joe
User</userinput> into the <guilabel>Name</guilabel> field and
<userinput>joe@example.com</userinput> into the <guilabel>Email
Address</guilabel> field.</para>
</sect2>

<sect2 id="configure-identity-advanced">
<title><guilabel>Advanced</guilabel> Tab</title>

<para>The <guilabel>Advanced</guilabel> tab allows you to specify some
rarely used or otherwise specialized settings for the currently
selected identity.</para>
<variablelist>
<varlistentry>
<term><guilabel>Reply-To Address</guilabel></term>
<listitem>
<para>Enter the address to which replies to your messages should be
sent. Only fill out this field if it is different from your normal
address (specified using the <guilabel>Name</guilabel> and
<guilabel>Email Address</guilabel> on the <link
linkend="configure-identity-general"><guilabel>General</guilabel>
tab</link>), since replies default to the sender's address
anyway.</para>
<note><para>This field is only useful if you want replies to your mail
to go somewhere else than your regular email address, &eg; if you are
using this identity to send messages from an email address that cannot
receive messages. Note that this field will possibly be
deprecated by newer versions of the Internet email standard. Furthermore,
some mailing lists overwrite this header field with their post address to
make sure that replies go to the list instead of individuals. So the
usefulness of this field is very limited and it should only be used in
rare cases.</para></note>
</listitem>
</varlistentry>

<varlistentry>
<term><guilabel>OpenPGP Key</guilabel></term>
<listitem>
<para>Select here the <application>OpenPGP</application> key
key that should be used to (digitally) sign messages when this
identity is used. When you click on the <guilabel>Change...</guilabel>
button, a key selection dialog comes up where you can select the key
to use from the list of secret keys found. If you don't have an
<application>OpenPGP</application> key or don't know what that is, you
don't need to worry about this setting.</para>

<note><para>The selected key will also be used as the recipient when
you check <link linkend="configure-security-pgp-encrypttoself">
<guilabel>Always encrypt to self</guilabel></link> on the <link
linkend="configure-security-pgp"><guilabel>OpenPGP</guilabel> tab</link>
of the <link linkend="configure-security">
<guilabel>Security</guilabel> page</link>.</para></note>

<note><para>You might need to configure your
<application>OpenPGP</application> environment first, to make the key
selection dialog work. You can do this on the <link
linkend="configure-security"> <guilabel>Security</guilabel>
page</link>.</para></note>
</listitem>
</varlistentry>

<varlistentry>
<term><guilabel>Sent-mail folder</guilabel></term>
<listitem>
<para>Select the folder into which messages should be filed after sending
when using this identity.</para>

<tip><para>You can exercise more fine-grained control over where to
file sent messages by creating a corresponding <link
linkend="filters">message filter</link> that is applied to outgoing
messages.</para></tip>

</listitem>
</varlistentry>

<varlistentry>
<term><guilabel>Drafts folder</guilabel></term>
<listitem>
<para>Select the folder into which drafts should be filed when using 
this identity.</para>
</listitem>
</varlistentry>

<varlistentry>
<term><guilabel>Special transport</guilabel></term>
<listitem>
<para>Select or enter an alternative SMTP server to be used when sending
messages using this identity.</para>

<note><para>You need to configure outgoing mail servers first, before
you can choose them from the list. You can do this on the <link
linkend="configure-network-sending"><guilabel>Sending</guilabel>
tab</link> of the <link linkend="configure-network">
<guilabel>Network</guilabel> page</link>.</para></note>
</listitem>
</varlistentry>

</variablelist>
</sect2>

<sect2 id="configure-identity-signature">
<title><guilabel>Signature</guilabel> Tab</title>

<para>This tab allows you to specify a signature (footer/disclaimer)
to be appended to each message sent using this identity.</para>

<note><para>This type of signature has nothing to do with the
(digital) signatures for which you can select the to-be-used key on
the <link linkend="configure-identity-advanced">Advanced
tab</link>. It's just bad wording to call this a signature, but since
the term is already used everywhere else, we keep this notation. Just
keep in mind that these signatures and digital signatures are two
completely different things.</para></note>

<para>Check the <guilabel>Enable Signature</guilabel> option if you
want to append signatures when using this identity.</para>

<para>&kmail; can obtain the signature text from various sources. The
traditional way on Unix is to read the text from a file called
<filename>.signature</filename> in your home directory. This file can
be shared between several programs, so you get the same
signature in each mail program you use.</para>

<para>To read the text from a flat text file you select
<guilabel>Obtain signature text from file</guilabel>. Enter the
filename in the <guilabel>Specify file</guilabel> edit field or hit
the button to the right of it to browse your filesystem. If you want
to edit the file, hit the <guilabel>Edit file</guilabel>
button.</para>

<para>&kmail; can also read the signature text from the output of a
command. Thus, you can use programs such as
<command>fortune</command> to create a new signature text for
every message. Everything the program prints onto
<acronym>stdout</acronym> is catched and used as the signature
text.</para>

<para>To read the text from the output of a command you select
<guilabel>Obtain signature text from output of
command</guilabel>. Enter the command (preferably with full path) in
the <guilabel>Specify command</guilabel> edit field or hit the button
to the right of it to browse your filesystem.</para>

<para>As a third option, you can enter the signature text directly in
&kmail;'s configuration dialog. To do this, select <guilabel>Obtain
signature text from input field below</guilabel> and enter the text
into the appearing text box.</para>

<note><para>On the Internet, signatures are by convention separated
from the body of the message by a line containing only the three
character <quote>-- </quote> (dash, dash, space). &kmail; will
automatically prepend the signature text with this line if it is not
already present in the signature text.</para>
<para>If - for whatever reasons - you do not wish the separator to be
included automatically by &kmail;, simply add it to the signature 
text yourself.</para>
</note>

</sect2>

</sect1>

<sect1 id="configure-network">
<title>The <guilabel>Network</guilabel> Page</title>

<para>You can find a quick introduction to the
<guilabel>Network</guilabel> page in the <link
linkend="setting-up-your-account">Setting up your Account</link>
section.</para>

<para>This page allows you to create one or more (incoming and
outgoing) <emphasis>accounts</emphasis>, &ie; combinations of mail
servers, login information and other settings. Typically, you will
create one outgoing (used for sending messages) and one incoming (used to
retrieve messages) account. You can create as many accounts as you want, though,
and assign each one to different <link
linkend="configure-identity">identities</link> or decide on a per-message
basis.</para>

<sect2 id="configure-network-sending">
<title><guilabel>Sending</guilabel> Tab</title>

<para>The <guilabel>Sending</guilabel> tab allows you to define new
outgoing mail servers and set some common options.</para>

<para>For basic information, see <link
linkend="sending-mail">Setting up your Account: Sending</link>.</para>

<para><guilabel>Confirm before send</guilabel> will pop up a
confirmation box every time you send a message.</para>

<para><guilabel>Send mail in Outbox on check</guilabel> will send
all messages from the outbox when you check for new messages.</para>

<para><guilabel>Default send method</guilabel> lets you define what
happens when a message is sent. If <guilabel>Send now</guilabel> is
selected, the message is sent to the mail server immediately, while if
<guilabel>Send later</guilabel> is selected, the message is queued in
the outbox to be sent later with the
<menuchoice><guimenu>File</guimenu><guimenuitem>Send
Queued</guimenuitem></menuchoice> command or automatically when you
check your mail, depending on the setting of 
<guilabel>Send mail in Outbox on check</guilabel> above.</para>

<para><guilabel>Message property</guilabel> lets you select how your
message will be encoded when it is sent. <guilabel>Allow
8-bit</guilabel> means that &kmail; will send your message in 8 bit
<acronym>ASCII</acronym>, which means that all special characters such
as accented letters will be sent as-is. If <guilabel>MIME Compliant
(Quoted Printable)</guilabel> is selected, special characters will be
encoded using standard &MIME; encodings, which may be more portable to
other mailing systems than 8-bit <acronym>ASCII</acronym>. You normally
do not need to change the default.<!-- TODO: advise what's better --></para>

</sect2>

<sect2 id="configure-network-receiving">
<title><guilabel>Receiving</guilabel> Tab</title>

<para>For basic information, see <link
linkend="receiving-mail">Setting up your Account: Receiving</link>.</para>

<para>With <guilabel>New Mail notification</guilabel> you can set
how &kmail; will notify you if new messages have arrived. Of course
this only makes sense if <guilabel>Enable interval mail checking</guilabel>
is activated for at least one account:</para>

<variablelist>

<varlistentry>
<term><guilabel>Beep</guilabel></term>
<listitem>
<para>Will play a beep sound.</para> 
</listitem>
</varlistentry>

<varlistentry>
<term><guilabel>Display message box</guilabel></term>
<listitem>
<para>Will show a message box and make &kmail; the active window.</para> 
</listitem>
</varlistentry>

<varlistentry>
<!-- fixme in kmail: why "line"??? -->
<term><guilabel>Execute command line</guilabel></term>
<listitem>
<para>Will execute the command you enter in the line edit below.</para> 
</listitem>
</varlistentry>

</variablelist>

</sect2>

</sect1>

<sect1 id="configure-appearance">
<title>Appearance Tab</title>

<sect2 id="configure-appearance-fonts">
<title>Fonts</title>

<para>This section allows you to change the type, size and character set of the
display fonts. <guilabel>Message body</guilabel> sets the font for
the reader pane, <guilabel>Composer</guilabel> sets the font for
writing messages in the composer window.<!-- fixme in kmail: better wording? -->
There's a separate entry for <guilabel>Message List - Date Field</guilabel>
so you can choose a monospaced font for the date field for better readability.</para>

</sect2>

<sect2 id="configure-appearance-colors">
<title>Colors</title>

<para>This section allows you to change the color of the text.
<guilabel>Recycle colors on deep quoting</guilabel> means that even text that's
quoted more than three times will appear in color. Note that the
<guilabel>Quoted text</guilabel> colors only work in the message reader, not in 
the composer.<!-- fixme --></para>

</sect2>

<sect2 id="configure-appearance-layout">
<title>Layout</title>

<para><guilabel>Show long folder list</guilabel> lets you toggle the long folder 
list on and off.  The long folder list shows folders all the way down the left 
side of the &kmail; main window, which lets you see more folders than in the short view, 
but it takes away some space for viewing the text of the messages. 
<guilabel>Show color bar</guilabel> activates a bar at the left side of the reader
pane that gives you information about the encryption and digital signature
about the message.<!-- fixme: more -->
With <guilabel>Display message sizes</guilabel> selected there will be another 
column in the header pane that shows the messages' size.
<guilabel>Thread list of message headers</guilabel> will put all the messages 
in the header pane in a kind of tree list, so that the replies to a message are 
directly below that message.</para>

<para>With <guilabel>Message header threading options</guilabel> you can select
under which conditions threads should appear open by default (&ie; not
collapsed). You can still open/close threads using the 
<guilabel>+</guilabel>/<guilabel>-</guilabel> buttons if you don't disable
that here.</para>

<para>With <guilabel>Display of Date</guilabel> you can choose between several
date formats. The <guilabel>Localized Format</guilabel> is the one you can
specify in &kcontrol;.</para>

</sect2>

<sect2 id="configure-appearance-profiles">
<title>Profiles</title>

<para>This section offers several default settings.</para>

</sect2>

<!--
<sect2 id="configure-appearance-scoring">
<title>Messages Scoring</title>

<para>In this section you can manage rules that define a message's score.
If at least one rule is defined for a folder, a <guilabel>Score</guilabel>
column will appear in the Headers pane of that folder. Each rule has a
name, a list of folders where it is active, one or more conditions that
decide whether the rule matches a message, and one or more actions that get
triggered if a condition is matched. This concept is very similar to that
of <link linkend="filters">message filters</link>.</para>

<para>The most useful action is <guilabel>adjust score</guilabel>. It will
increase or decrease the score of a message. The idea is that important
messages have a high score and you can then use the
<guilabel>Score</guilabel> column to sort your messages.</para>

<para>The <guilabel>display message</guilabel> action will display
a dialog when you enter a folder with a matching message.</para>

</sect2>
-->

<!-- fixme?: date + less than/greater than broken in kmail -->
<!-- fixme?: "group" wording in program -->


</sect1>

<sect1 id="configure-composer">
<title>Composer Tab</title>

<sect2 id="configure-composer-general">
<title>General</title>

<para><guilabel>Automatically append signature</guilabel> lets you toggle
whether to automatically include your signature as defined in the 
<link linkend="setting-your-identity">identity tab</link>.</para>

<para><guilabel>Use smart quoting</guilabel> will break long lines but will try
to keep the correct quoting (&eg; the <quote>&gt; </quote> will always be at the
start of the line).</para>

<para><guilabel>Automatically sign messages using OpenPGP</guilabel> lets you toggle
whether to automatically sign your messages by default. Of course you can still
deselect the icon in the composer window for each message if necessary.</para>

<para><guilabel>Automatically encrypt messages whenever possible</guilabel> will
encrypt every message you send, unless there's no trusted key for the recipient
or you turned off using the recipient's key in the <guilabel>Encryption Preference</guilabel>
setting of the <guilabel>Encryption Key Approval</guilabel> dialog.</para>

<para><guilabel>Word wrap at column</guilabel> lets you turn word wrapping on
and off in the composer window and lets you set the column
at which words will be wrapped (you probably should not need to change
the default value, which is <userinput>78</userinput>).</para>

<para>If you don't like the Composer you can use a
different editor. Note that the composer window will still open and
the external editor will open as soon as you type just one character in the body
of the message. If you're done, save the text and exit the editor. The text will
now appear in the composer window, where you can send
it. Note that your editor may not return immediately, &eg; you have to
use <userinput>gvim -f %f</userinput> for <application>gvim</application>.</para>

</sect2>

<sect2 id="configure-composer-phrases">
<title>Phrases</title>

<para>The <guilabel>Phrases</guilabel> tab lets you define the automatically
generated lines that are added to message replies, forwarded messages, and the
character that's added in front of quoted text. 
There are special &percnt;-denoted characters that will insert certain
values. These are also shown at the top of the <guilabel>Phrases</guilabel> section:
<symbol>%D</symbol> to insert the date, <symbol>%S</symbol> to insert the
subject, <symbol>%F</symbol> to insert the sender, <symbol>%%</symbol> to insert
a percent sign, <symbol>%_</symbol> to insert a space, and <symbol>%L</symbol> 
to insert a line break. You can add reply phrases in languages other than
your default &kde; language using the <guilabel>Language</guilabel> button.
This will only work for languages whose i18n package you have installed.</para>

</sect2>

<sect2 id="configure-composer-subject">
<title>Subject</title>

<para>This section contains a list of prefixes for <quote>Reply</quote> and
<quote>Forward</quote>. If you receive messages that use prefixes different
to the standard ones, you can add them here so &kmail; will recognize 
them. This way &kmail; can ignore them for sorting messages and
when setting the subject of a reply, and optionally replace them 
with <quote>Re:</quote>.</para>

</sect2>

<sect2 id="configure-composer-charset">
<title>Charset</title>

<para>Here you can manage the default charsets used for your own messages. 
Every message you send will be checked if it's written in one of the listed
charsets, starting at the top of the list. If it is, this charset will be used.
If it isn't, a dialog will show up and tell you that you manually have to choose
a charset using 
<menuchoice><guimenu>Options</guimenu><guisubmenu>Set Encoding</guisubmenu></menuchoice>.
</para>

<para>If you select <guilabel>Keep original charset when replying
or forwarding</guilabel>, the original message's charset
will be kept, unless there are now characters that cannot be
represented using that charset.</para>

</sect2>

<sect2 id="configure-composer-headers">
<title>Headers</title>

<para>Check the <guilabel>Use custom Message-Id suffix</guilabel>
checkbox if you want &kmail; to generate Message-Id's with a custom
suffix. Enter the desired suffix in the <guilabel>Custom Message-Id
suffix</guilabel> field. Please make sure that the suffix that you
specify is world-wide unique. The best thing is to use the name of a
domain which you are the owner of. If you don't check <guilabel>Use
custom Message-Id suffix</guilabel> then &kmail; will automatically
generate the complete Message-Id. If you don't know what this is all
about don't check this option.</para>

<para>The <guilabel>Define custom mime header fields</guilabel> list
sets the headers that &kmail; will use for its outgoing messages. You
can both invent new fields and overwrite existing ones. This feature
is only useful for advanced users.</para>

</sect2>

</sect1>

<sect1 id="configure-security">
<title>Security Tab</title>

<sect2 id="configure-security-general">
<title>General</title>

<para><guilabel>Prefer HTML to plain text</guilabel> will show
<acronym>HTML</acronym> messages with their <acronym>HTML</acronym>
formatting and layout. We strongly recommend to leave this option off, as
security problems with <acronym>HTML</acronym> might show up. When
this option is off, you can still read <acronym>HTML</acronym>
messages, but only as plain text.</para>

<para>With <guilabel>Allow mails to load external references from the net</guilabel>
turned on, &kmail; can load external images, style sheets &etc; from the Internet when
you look at an <acronym>HTML</acronym> message. We strongly recommend
to leave this option off (although it has no effect if you only view 
plain text messages). By
adding external references to their messages, people sending spam can
detect that and when you have looked at their message. Note that this option
has no effect on &Java;, JavaScript and Plugins - these are disabled
anyway and cannot be enabled at all.</para>

<para><guilabel>Automatically send receive and read
confirmations</guilabel> will automatically send a confirmation (in
form of a new message) to the sender of a message if he requested
that. If you leave this option off, no confirmation will be sent. We
recommend to leave this option off. If you want to send confirmations
to certain people you can do so by using the <guilabel>confirm
delivery</guilabel> filter action.</para>

</sect2>

<sect2 id="configure-security-pgp">
<title>OpenPGP</title>

<para id="configure-security-pgp-encrypttoself">For the
<guilabel>OpenPGP</guilabel> tab please see the <link
linkend="pgp-settings"><application>OpenPGP</application>
section</link>.</para>

</sect2>

</sect1>

<sect1 id="configure-misc">
<title>Miscellaneous Tab</title>

<sect2 id="configure-misc-folders">
<title>Folders</title>


<variablelist>

<varlistentry>
<term><guilabel>Confirm before emptying folders</guilabel></term>
<listitem>
<para>To empty a folder means that its messages get transferred to the
<guilabel>trash</guilabel> folder (and only get deleted if they are already in the
<guilabel>trash</guilabel> folder).  So although you normally won't lose any
mail, you can still activate a confirmation dialog that will ask you if you
really want to empty the folder.</para>
</listitem>
</varlistentry>

<varlistentry>
<term><guilabel>Warn before expiring messages</guilabel></term>
<listitem>
<para>This will pop up a confirmation dialog before messages are expired
(&eg; on exit).</para>
</listitem>
</varlistentry>

<varlistentry>
<term><guilabel>Loop in the current folder when trying to find unread mail</guilabel></term>
<listitem>
<para>When you press one of the shortcuts to find new messages (&eg; <keycap>Space</keycap>)
and this option is activated, &kmail; will not jump to the next folder, but instead
try to find new messages at the top of the current folder.</para>
</listitem>
</varlistentry>

<varlistentry>
<term><guilabel>By default, mail folders on disk are...</guilabel></term>
<listitem>
<para>Here you can set the default format for new folders. You can still
change it for each new folder in the <link linkend="reader-folder-menu">Create 
Folder</link> dialog.</para>
</listitem>
</varlistentry>

</variablelist>

<para><guilabel>On program exit, perform the following tasks</guilabel>:</para>

<variablelist>

<varlistentry>
<term><guilabel>Compact all folders</guilabel></term>
<listitem>
<para>This will compact all folders every time you exit &kmail;. Compacting
folders means that the messages you deleted will really be
removed.</para>
</listitem>
</varlistentry>

<varlistentry>
<term><guilabel>Empty trash</guilabel></term>
<listitem>
<para>The trash folder is cleared of messages when you quit &kmail; if this
option is selected. The following two options are disabled, if this one
is enabled.</para> 
</listitem>
</varlistentry>

<varlistentry>
<term><guilabel>Expire old messages</guilabel></term>
<listitem>
<para>Delete old messages from all folders, according to the rules in
each folder's <guilabel>Properties</guilabel> dialog (the default is
not to delete old messages at all).</para>
</listitem>
</varlistentry>

</variablelist>

</sect2>

<sect2 id="configure-misc-addressbook">
<title>Addressbook</title>

<para>An address book lets you store your commonly used email
addresses. You can call up the address book via
<menuchoice><guimenu>File</guimenu><guimenuitem>Address Book</guimenuitem></menuchoice>,
the <guiicon>Address Book</guiicon> button in the main window, 
or the <guiicon>Address Book</guiicon> button in the
composer window.</para>
<!-- fixme in kmail: address book vs addressbook -->

<para>You can choose between two different address books:</para>

<variablelist>

<varlistentry>
<term><guilabel>KAdressbook</guilabel></term>
<listitem>
<para>This is the default address book, which has <ulink
url="/kaddressbook/">its own documentation</ulink>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term><guilabel>KAB</guilabel></term>
<listitem>
<para>If the kdeutils package is installed on your system you
can also choose this address book. See the <ulink
url="/kab/">&kab; documentation</ulink>.</para>
</listitem>
</varlistentry>

</variablelist>

</sect2>

</sect1>

</chapter>

<chapter id="menus">
<title>Menu Entries</title>

<para>Each menu item is discussed below. When there is a keyboard shortcut that
performs a menu item function, the default shortcut is listed with the menu item.</para>

<sect1 id="main-mail-reader-window">
<title>The Main Window</title>

<sect2 id="reader-file-menu">
<title><guimenu>File</guimenu> Menu</title>

<variablelist>
<varlistentry>
<term>
<menuchoice>
<guimenu>File</guimenu>
<guimenuitem>New Mail Client...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Creates a new main window.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycombo action="simul">&Ctrl;<keycap>S</keycap></keycombo></shortcut>
<guimenu>File</guimenu>
<guimenuitem>Save As...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Saves the currently displayed message to a text file, including all the headers
and attachments.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycombo action="simul">&Ctrl;<keycap>P</keycap></keycombo></shortcut>
<guimenu>File</guimenu>
<guimenuitem>Print...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Prints the currently displayed message.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>File</guimenu>
<guimenuitem>Compact All folders</guimenuitem>
</menuchoice></term>
<listitem>
<para>Will compact all folders, &ie; it will really move and delete the messages
on disk according to how you have moved and deleted them in &kmail;.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>File</guimenu>
<guimenuitem>Expire All folders</guimenuitem>
</menuchoice></term>
<listitem>
<para>Delete old messages from all folders, according to the rules in
each folder's <guilabel>Properties</guilabel> dialog (the default is
not to delete old messages at all).</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycombo action="simul">&Ctrl;<keycap>L</keycap></keycombo></shortcut>
<guimenu>File</guimenu>
<guimenuitem>Check Mail</guimenuitem>
</menuchoice>
</term>
<listitem><para>Checks for new messages in all your accounts, except those that
have <guilabel>Exclude from &quot;Check Mail&quot;</guilabel> enabled.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>File</guimenu>
<guisubmenu>Check Mail In</guisubmenu>
</menuchoice>
</term>
<listitem>
<para>Submenu that lets you check for new messages from a particular account.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>File</guimenu>
<guimenuitem>Send Queued</guimenuitem>
</menuchoice></term>
<listitem>
<para>Sends the messages that are in your outbox.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>File</guimenu>
<guimenuitem>Address Book...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens up the <link linkend="configure-misc-addressbook">Address Book</link>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>File</guimenu>
<guimenuitem>Import...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Starts up <application>kmailcvt</application> (which is part of kdenetwork).
This application lets you import messages from several proprietary mail clients to
&kmail;.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycombo action="simul">&Ctrl;<keycap>W</keycap></keycombo></shortcut>
<guimenu>File</guimenu>
<guimenuitem>Close</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Closes the current main window or exits
&kmail; if there's only this one window.</para>
</listitem>
</varlistentry>

</variablelist>

</sect2>

<sect2 id="reader-edit-menu">
<title><guimenu>Edit</guimenu> Menu</title>

<variablelist>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycombo action="simul">&Ctrl;<keycap>Z</keycap></keycombo></shortcut>
<guimenu>Edit</guimenu>
<guimenuitem>Undo</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Revoke you last move or delete action. Note that you cannot undo a deletion
in the trash.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycombo action="simul">&Ctrl;<keycap>C</keycap></keycombo></shortcut>
<guimenu>Edit</guimenu>
<guimenuitem>Copy Text</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Copies selected text to the clipboard.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycap>D</keycap></shortcut>
<guimenu>Edit</guimenu>
<guimenuitem>Delete</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Moves the selected messages in the trash folder. If the selected
messages are already in the trash folder, they will really be deleted.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycap>S</keycap></shortcut>
<guimenu>Edit</guimenu>
<guimenuitem>Search Messages...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens up a search window that lets you search for messages with
certain characteristics, &eg; a certain subject. Start the search by entering
some values and press <guibutton>Search</guibutton>. Click on one of the
resulting messages and it will appear in the <guilabel>Message
pane</guilabel>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycombo action="simul">&Ctrl;<keycap>F</keycap></keycombo></shortcut>
<guimenu>Edit</guimenu>
<guimenuitem>Find In Message...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Lets you search for a string in the current message.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Edit</guimenu>
<guimenuitem>Select All Messages</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Selects all messages in the current folder.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycombo action="simul">&Ctrl;<keycap>A</keycap></keycombo></shortcut>
<guimenu>Edit</guimenu>
<guimenuitem>Select Message Text</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Selects the text of the currently displayed message.</para>
</listitem>
</varlistentry>

</variablelist>

</sect2>


<sect2 id="reader-view-menu">
<title><guimenu>View</guimenu> Menu</title>

<!-- LW: This really needs to be broken up to one varlistentry per menu item, fixme -->

<variablelist>

<varlistentry>
<term>
<menuchoice>
<guimenu>View</guimenu>
<guimenuitem>Brief Headers</guimenuitem>
</menuchoice>
<menuchoice>
<guimenu>View</guimenu>
<guimenuitem>Fancy Headers</guimenuitem>
</menuchoice>
<menuchoice>
<guimenu>View</guimenu>
<guimenuitem>Standard Headers</guimenuitem>
</menuchoice>
<menuchoice>
<guimenu>View</guimenu>
<guimenuitem>Long Headers</guimenuitem>
</menuchoice>
<menuchoice>
<guimenu>View</guimenu>
<guimenuitem>All Headers</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Changes the number of headers that are displayed and the format of the
headers in the <guilabel>Message pane</guilabel>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>View</guimenu>
<guimenuitem>Iconic Attachments</guimenuitem>
</menuchoice>
<menuchoice>
<guimenu>View</guimenu>
<guimenuitem>Smart Attachments</guimenuitem>
</menuchoice>
<menuchoice>
<guimenu>View</guimenu>
<guimenuitem>Inlined Attachments</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Changes the way that attachments appear in the <guilabel>Message
pane</guilabel>. With <guimenuitem>Iconic Attachments</guimenuitem>
all attachments appear as icons at the bottom of the message.
<guimenuitem>Inlined Attachments</guimenuitem> shows the attachments
at the bottom of the message. Attachments that cannot be displayed, &eg;
compressed files, will still be shown as an icon.
<guimenuitem>Smart Attachments</guimenuitem> will show attachments as
icons, unless they are so-called inline attachments.</para>
<!-- fixme: what's that? -->
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>View</guimenu>
<guimenuitem>Fixed Font Widths</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Uses a fixed width (monospace) font to display the messages
in the current folder. The font to be used can be configured in the
<guilabel>Appearance</guilabel> section of &kmail;'s configuration
dialog.</para>
</listitem>
</varlistentry>

</variablelist>

</sect2>

<sect2 id="reader-folder-menu">
<title><guimenu>Folder</guimenu> Menu</title>

<variablelist>

<varlistentry>
<term>
<menuchoice>
<guimenu>Folder</guimenu>
<guimenuitem>Create...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens the <guilabel>Create Folder</guilabel> dialog which lets you create
a new folder. You can make this new folder a sub folder if you choose a parent
folder using the <guilabel>Belongs to</guilabel> selection. The folder
can be either in <guilabel>mbox</guilabel> or in <guilabel>maildir</guilabel>
format. <guilabel>mbox</guilabel> saves all messages of one folder to a file,
whereas <guilabel>maildir</guilabel> saves each message to its own file. 
<guilabel>maildir</guilabel> can be considered more robust, but it can be
slower on some file systems. Note that there's currently no feature in &kmail; that
allows to convert between both formats automatically.</para>
<para>If you're going to use the folder for a mailing list you may want to add 
the mailing list address
in the <guilabel>Associated Mailing List</guilabel> section. You will then be able to use
the <menuchoice><guimenu>Message</guimenu><guimenuitem>Reply
list...</guimenuitem></menuchoice> menu item. It will open a reply with the
mailing list address in the <guilabel>To:</guilabel> field (&ie; it will ignore
the <token>Reply-To</token> of the message). You can also click the
<mousebutton>middle</mousebutton> mousebutton in the Folders pane to post to a
mailing list that is associated with that folder.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Folder</guimenu>
<guimenuitem>Properties...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens up the <guilabel>Modify Folder</guilabel> dialog which lets you
change the settings for the selected folder.</para> 
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Folder</guimenu>
<guimenuitem>Mark All Messages as Read</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Sets the status of all new and unread messages in the current folder to read.</para> 
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Folder</guimenu>
<guimenuitem>Compact</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Compacts the folder file to reduce its disk space usage. Use this command
if your mailboxes seem to be much larger than they ought to be.
<!-- TODO: explain? --></para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Folder</guimenu>
<guimenuitem>Expire</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Delete old messages from the current folder, according to the rules in
the folder's <guilabel>Properties</guilabel> dialog (the default is
not to delete old messages at all).</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Folder</guimenu>
<guimenuitem>Empty</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Moves all of the messages in the selected folder into the trash folder.
If the selected folder is the trash folder, the messages are permanently
deleted.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Folder</guimenu>
<guimenuitem>Remove</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Removes the selected folder and all its contents.</para>
<para><warning><para>Note that there's no way to access the contents
of a folder after it has been removed.</para></warning></para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Folder</guimenu>
<guimenuitem>Prefer HTML to Plain Text</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>This will show <acronym>HTML</acronym> messages using
<acronym>HTML</acronym> rendering. For security reasons, we recommend to only
activate this for trusted messages.</para> 
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Folder</guimenu>
<guimenuitem>Thread messages</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Shows the messages in the <guilabel>Header pane</guilabel>
in a tree-like list, with replies showing up directly under the message
they reply to.</para>
</listitem>
</varlistentry>

</variablelist>

</sect2>

<sect2 id="reader-message-menu">
<title><guimenu>Message</guimenu> Menu</title>

<variablelist>
<varlistentry>
<term>
<menuchoice>
<shortcut><keycombo action="simul">&Ctrl;<keycap>N</keycap></keycombo></shortcut>
<guimenu>Message</guimenu>
<guimenuitem>New Message...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens the composer window so you can write a new
mail. If the current folder holds a mailing list and has a <guilabel>Post 
Address</guilabel> defined, this address will be default <guilabel>To:</guilabel>
address.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycap>N</keycap></shortcut>
<guimenu>Message</guimenu>
<guimenuitem>Next</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Selects the next message in the Headers pane. The keyboard shortcut
<keycap>Right Arrow</keycap> also performs this action.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycap>+</keycap></shortcut>
<guimenu>Message</guimenu>
<guimenuitem>Next Unread</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Selects the next unread message in the Headers pane.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycap>P</keycap></shortcut>
<guimenu>Message</guimenu>
<guimenuitem>Previous</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Selects the previous message in the Headers pane.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycap>-</keycap></shortcut>
<guimenu>Message</guimenu>
<guimenuitem>Previous Unread</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Selects the previous unread message in the Headers pane.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycap>R</keycap></shortcut>
<guimenu>Message</guimenu>
<guimenuitem>Reply...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens up the composer window with the contents of the
selected message's <guilabel>Reply-To</guilabel> field in the
<guilabel>To:</guilabel> field. By default this will automatically
set your identity to the one which this message was sent to.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycap>A</keycap></shortcut>
<guimenu>Message</guimenu>
<guimenuitem>Reply All...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens up the composer window and copies the contents
of the selected message's <guilabel>Reply-To:</guilabel> and
<guilabel>To:</guilabel> fields into the <guilabel>To:</guilabel> field, and the
<guilabel>Cc:</guilabel> field into the <guilabel>Cc:</guilabel> field of the
composer window.</para> 
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycap>L</keycap></shortcut>
<guimenu>Message</guimenu>
<guimenuitem>Reply List...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens up the composer with the <guilabel>To:</guilabel>
field set to the mailing list address. Of course this will only work
if you configured the current folder to be associated with a mailing list.
Otherwise the <guilabel>To:</guilabel> field will be empty.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycombo action="simul">&Alt;<keycap>R</keycap></keycombo></shortcut>
<guimenu>Message</guimenu>
<guimenuitem>Reply Without Quote...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens up the composer to reply but does not quote the
text of the original message.</para>
</listitem>
</varlistentry>

<varlistentry>
<term><menuchoice>
<shortcut><keycap>F</keycap></shortcut>
<guimenu>Message</guimenu>
<guimenuitem>Forward...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Forwards the message to a new recipient. The message's text will be copied
into the body of the new message with a text marking the forwarded part. Attachments
will be forwarded, too.</para>
</listitem>
</varlistentry>

<varlistentry>
<term><menuchoice>
<shortcut><keycombo action="simul">&Shift;<keycap>F</keycap></keycombo><keycap>F</keycap>
</shortcut>
<guimenu>Message</guimenu>
<!-- fixme in kmail: "f" twice as accel -->
<guimenuitem>Forward as Attachment</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Forwards the message to a new recipient as an attachment. Attachments
in the original message will also be in the forwarded message's attachment.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycap>E</keycap></shortcut>
<guimenu>Message</guimenu>
<guimenuitem>Redirect...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Works like forward, except that the message stays the same (even
the <guilabel>From</guilabel> field). The user who redirected the message is
added in special header fields (<literal>Redirect-From</literal>,
<literal>Redirect-Date</literal>, <literal>Redirect-To</literal>,
&etc;).</para> 
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Message</guimenu>
<guimenuitem>Bounce...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Sends the message back to the sender with a notice that it cannot be
delivered. This is nearly exactly the message you get from a mail relay if the
user does not exist. Some people use this option to <quote>reply</quote> to spam.</para> 
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Message</guimenu>
<guimenuitem>Send again...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens a composer window with this message so it can be sent again.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Message</guimenu>
<guisubmenu>Set Encoding</guisubmenu>
</menuchoice>
</term>
<listitem>
<para>Lets you choose the character encoding to be used in the Message
Pane. The default, <guilabel>Auto</guilabel>, should work in almost all cases.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycap>T</keycap></shortcut>
<guimenu>Message</guimenu>
<guimenuitem>Edit</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Edits the selected message if it is editable. Only messages in the
<guilabel>outbox</guilabel> and <guilabel>drafts</guilabel> folder can be edited.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Message</guimenu>
<guisubmenu>Create filter</guisubmenu>
</menuchoice>
</term>
<listitem>
<para>Opens up the <link linkend="filter-dialog-id">Filter dialog</link> with a new filter added.
This new filter is based on fields of the current mail, depending on which
sub menu you select.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Message</guimenu>
<guisubmenu>Mark Message</guisubmenu>
</menuchoice>
</term>
<listitem>
<para>Allows you to change the status of the selected message to one of the
following states (more than one status per message is currently not supported):</para>
<!-- fixme: more than one somewhen supported? -->

<!-- TODO: I think it's worth adding inline images here, at some -->
<!-- point. LW. -->
<informaltable>
<tgroup cols="2">
<thead>
<row>
<entry>Status</entry>
<entry>Symbol</entry>
<entry>Meaning</entry>
</row>
</thead>
<tbody>
<row>
<entry><guimenuitem>New</guimenuitem></entry>
<entry>Red dot</entry>
<entry>The message has been received for the first time, and is unread.</entry>
</row>
<row>
<entry><guimenuitem>Unread</guimenuitem></entry>
<entry>Green dot</entry>
<entry>The message has already been retrieved off the server at least once, but
has not yet been read.</entry>
</row>
<row>
<entry><guimenuitem>Read</guimenuitem></entry>
<entry>Dash</entry>
<entry>The message has been read.</entry>
</row>
<row>
<entry><guimenuitem>Replied</guimenuitem></entry>
<entry>Blue u-turn arrow</entry>
<entry>A reply to this message has been sent.</entry>
</row>
<row>
<entry><guimenuitem>Queued</guimenuitem></entry>
<entry>Envelope</entry>
<entry>The message has been queued in the outbox to be sent later.</entry>
</row>
<row>
<entry><guimenuitem>Sent</guimenuitem></entry>
<entry>Angled envelope</entry>
<entry>The message has been sent.</entry>
</row>
<row>
<entry><guimenuitem>Important</guimenuitem></entry>
<entry>Flag</entry>
<entry>This status will not automatically be set by &kmail;. You can use it freely to mark 
messages that are in some way important to you.</entry>
</row>
</tbody>
</tgroup>
</informaltable>

</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Message</guimenu>
<guisubmenu>Mark Thread</guisubmenu>
</menuchoice>
</term>
<listitem>
<para>Allows you to change the status of all messages in a thread. The possible
states are the same as for <menuchoice><guimenu>Message</guimenu>
<guimenuitem>Mark Message</guimenuitem></menuchoice>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Message</guimenu>
<guisubmenu>Move To</guisubmenu>
</menuchoice>
</term>
<listitem>
<para>Moves all of the selected messages to a certain folder.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Message</guimenu>
<!-- fixme in kmail: "c" is accel twice -->
<guisubmenu>Copy To</guisubmenu>
</menuchoice>
</term>
<listitem>
<para>Copies all of the the selected messages to a certain folder.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycombo action="simul">&Ctrl;<keycap>J</keycap></keycombo></shortcut>
<guimenu>Message</guimenu>
<guimenuitem>Apply Filters</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Applies your filters to the selected messages.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycap>V</keycap></shortcut>
<guimenu>Message</guimenu>
<guimenuitem>View Source...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Shows the message and its complete headers in plain text format in a new
window. This can be useful to find out the origin of a mail. You should know
that it's easy to fake the <literal>From:</literal> header of a mail, but
one can still find out which mail servers have been used by looking
at the <literal>Received:</literal> lines in the header.</para>
</listitem>
</varlistentry>

</variablelist>
</sect2>


<sect2 id="reader-settings-menu">
<title><guimenu>Settings</guimenu> Menu</title>

<variablelist>

<varlistentry>
<term>
<menuchoice>
<guimenu>Settings</guimenu>
<guimenuitem>Show Toolbar</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>If enabled, the Toolbar is visible (the Toolbar is the one with the icon
to compose a new message &etc;).</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Settings</guimenu>
<guimenuitem>Show Statusbar</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>If enabled, the Statusbar is visible (the Statusbar is the small one on
the bottom which shows useful short messages and link targets).</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Settings</guimenu>
<guimenuitem>Configure Shortcuts...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens a window that lets you configure the keyboard shortcuts for many
menu commands.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Settings</guimenu>
<guimenuitem>Configure Toolbars...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens a window that lets you choose which icons are visible in the
toolbar.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Settings</guimenu>
<guimenuitem>Configure &kmail;...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens the <link linkend="configure">Configure</link> window.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Settings</guimenu>
<guimenuitem>Configure Filters...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens the <link linkend="filters">Message Filters</link> window.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Settings</guimenu>
<guimenuitem>Configure Pop Filters...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens the <link linkend="popfilters">Configure Pop Filters</link> window.</para>
</listitem>
</varlistentry>

</variablelist>

</sect2>

<sect2 id="reader-help-menu">
<title><guimenu>Help</guimenu> Menu</title>

&help.menu.documentation;

</sect2>
</sect1>


<sect1 id="composer-window-menus">
<title>The Composer Window</title>

<sect2 id="composer-file-menu">
<title><guimenu>Message</guimenu> Menu</title>

<variablelist>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycombo action="simul">&Ctrl;<keycap>Return</keycap></keycombo></shortcut>
<guimenu>Message</guimenu>
<guimenuitem>Send</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Sends the message immediately.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Message</guimenu>
<guimenuitem>Queue</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Queues the message in the outbox for sending it later.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Message</guimenu>
<guimenuitem>Save in Drafts Folder</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Save the message in the <guilabel>drafts</guilabel> folder so you can edit
and send it later.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Messages</guimenu>
<guimenuitem>Insert File...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Inserts a text file into the message, starting at the cursor
position.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycombo action="simul">&Ctrl;<keycap>P</keycap></keycombo></shortcut>
<guimenu>Message</guimenu>
<guimenuitem>Print...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Prints the current text.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Message</guimenu>
<guimenuitem>Addressbook...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens up the address book.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycombo action="simul">&Ctrl;<keycap>N</keycap></keycombo></shortcut>
<guimenu>Message</guimenu>
<guimenuitem>New Composer...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens up a new composer window.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycombo action="simul">&Ctrl;<keycap>W</keycap></keycombo></shortcut>
<guimenu>Message</guimenu>
<guimenuitem>Close</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Closes this composer window.</para>
</listitem>
</varlistentry>

</variablelist>

</sect2>


<sect2 id="composer-edit-menu">
<title><guimenu>Edit</guimenu> Menu</title>

<variablelist>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycombo action="simul">&Ctrl;<keycap>Z</keycap></keycombo></shortcut>
<guimenu>Edit</guimenu>
<guimenuitem>Undo</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Undo your steps in editing the current mail.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycombo action="simul">&Ctrl;&Shift;<keycap>Z</keycap></keycombo></shortcut>
<guimenu>Edit</guimenu>
<guimenuitem>Redo</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Redo your steps in editing the current mail.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycombo action="simul">&Ctrl;<keycap>X</keycap></keycombo></shortcut>
<guimenu>Edit</guimenu>
<guimenuitem>Cut</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Cutting text works as with most editors.  You can also select text and
drag it to a new position.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycombo action="simul">&Ctrl;<keycap>C</keycap></keycombo>
</shortcut>
<guimenu>Edit</guimenu>
<guimenuitem>Copy</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Copying text works as with most editors. You can also select text while
holding the &Ctrl; key, and drag it to a new position, to have it copied and not
cut.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycombo action="simul">&Ctrl;<keycap>V</keycap></keycombo></shortcut>
<guimenu>Edit</guimenu>
<guimenuitem>Paste</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Pasting works the same as for most editors.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycombo action="simul">&Ctrl;<keycap>A</keycap></keycombo></shortcut>
<guimenu>Edit</guimenu>
<guimenuitem>Select All</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Selects all of the text in your message.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycombo action="simul">&Ctrl;<keycap>F</keycap></keycombo></shortcut>
<guimenu>Edit</guimenu>
<guimenuitem>Find...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Finds strings in the message.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<shortcut><keycombo action="simul">&Ctrl;<keycap>R</keycap></keycombo></shortcut>
<guimenu>Edit</guimenu>
<guimenuitem>Replace...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Lets you replace strings in your message with other strings.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Edit</guimenu>
<guimenuitem>Clean Spaces</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>This replaces multiple spaces with single spaces in the current
selection or in the complete message if there is no selection.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Edit</guimenu>
<guimenuitem>Spelling...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Uses &kspell; to check the spelling in the body of your message. Note that
you have to configure &kspell; with <menuchoice><guimenu>Settings</guimenu>
<guimenuitem>Spellchecker...</guimenuitem></menuchoice> if you use it for the
first time.</para>
</listitem>
</varlistentry>

</variablelist>

</sect2>

<sect2 id="composer-view-menu">
<title><guimenu>View</guimenu> Menu</title>

<para>This menu lets you toggle the display of the header fields and other
options in this composer window.</para>

<para>Options available are:</para>

<itemizedlist>
<listitem>
<para><guimenuitem>All Fields</guimenuitem></para>
</listitem>
<listitem>
<para><guimenuitem>Identity</guimenuitem></para>
</listitem>
<listitem>
<para><guimenuitem>Sent-Mail folder</guimenuitem></para>
</listitem>
<listitem>
<para><guimenuitem>Mail Transport</guimenuitem></para>
</listitem>
<listitem>
<para><guimenuitem>From</guimenuitem></para>
</listitem>
<listitem>
<para><guimenuitem>Reply To</guimenuitem></para>
</listitem>
<listitem>
<para><guimenuitem>To</guimenuitem></para>
</listitem>
<listitem>
<para><guimenuitem>Cc</guimenuitem></para>
</listitem>
<listitem>
<para><guimenuitem>Bcc</guimenuitem></para>
</listitem>
<listitem>
<para><guimenuitem>Subject</guimenuitem></para>
</listitem>
</itemizedlist>

<para>Currently visible items have a checkmark shown next to their name in the
menu.</para>

<variablelist>
<varlistentry>
<term>
<menuchoice>
<guimenu>Edit</guimenu>
<guimenuitem>Fixed Font Widths</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Uses a fixed width (monospace) font to display the messages
in the current folder. The font to be used can be configured in the
<guilabel>Appearance</guilabel> section of &kmail;'s configuration
dialog.</para>
</listitem>
</varlistentry>
</variablelist>

</sect2>

<sect2 id="composer-options-menu">
<title><guimenu>Options</guimenu> Menu</title>

<variablelist>

<varlistentry>
<term>
<menuchoice>
<guimenu>Options</guimenu>
<guimenuitem>Urgent</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Sets the priority of the message to Urgent. The receiver's mail client has to support
this or it will have no effect. &kmail; itself does not support priorities for
incoming messages.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Options</guimenu>
<guimenuitem>Confirm Delivery</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>If you choose this option, you request a confirmation email once your
message is successfully delivered to its destination mail server. This has to be
also supported from the receiver's side in order to work.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Options</guimenu>
<guimenuitem>Confirm Read</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>If you choose this option, you request a confirmation email once your
message is downloaded and read by its recipient. This has to be supported and
enabled by the receiver's mail client in order to work.
<!-- TODO: kmail... --></para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Options</guimenu>
<guisubmenu>Sign Message</guisubmenu>
</menuchoice>
</term>
<listitem>
<para>Digitally sign the message using <application>OpenPGP</application>.
You can learn more about this in the <link linkend="pgp">chapter on OpenPGP</link>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Options</guimenu>
<guisubmenu>Encrypt Message</guisubmenu>
</menuchoice>
</term>
<listitem>
<para>Encrypt the message using <application>OpenPGP</application>.
You can learn more about this in the <link linkend="pgp">chapter on OpenPGP</link>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Options</guimenu>
<guisubmenu>Set Encoding</guisubmenu>
</menuchoice>
</term>
<listitem>
<para>Set the charset encoding of this message. The chosen encoding will appear in the header of
the outgoing mail. You can use <guilabel>Auto</guilabel> for almost all
cases, &kmail; will tell you if you need to select a different encoding manually.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Options</guimenu>
<guimenuitem>Wordwrap</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Toggle the automatic wordwrap. It may be useful to turn it off if you want
to paste long lines that shouldn't wrap.</para>
</listitem>
</varlistentry>

</variablelist>

</sect2>


<sect2 id="composer-attach-menu">
<title><guimenu>Attach</guimenu> Menu</title>

<para>This menu lets you select attachment options.</para>

<variablelist>

<varlistentry>
<term>
<menuchoice>
<guimenu>Attach</guimenu>
<guimenuitem>Append Signature</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Appends your signature (<quote>footer</quote>) to the end of the message.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Attach</guimenu>
<!-- fixme in kmail: "P" used twice -->
<guimenuitem>Attach Public Key...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Attaches the corresponding <application>PGP</application>/<application>GnuPG</application>
key to your message using the default encoding.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Attach</guimenu>
<guimenuitem>Attach My Public Key</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Attaches your <application>PGP</application>/<application>GnuPG</application>
public key to your message using the default encoding.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Attach</guimenu>
<guimenuitem>Attach File...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Attaches a file to the message using the encoding you select in the
dialog. The dialog allows to select more than one file using the &Ctrl; key.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Attach</guimenu>
<guimenuitem>Remove</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Removes the attachment that is selected in the attachment window.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Attach</guimenu>
<guimenuitem>Save...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Saves the attachment that is selected in the attachment window to a
file.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Attach</guimenu>
<guimenuitem>Properties...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Displays the properties of the attachment that is selected in the
attachment window.</para>
</listitem>
</varlistentry>

</variablelist>

</sect2>

<sect2 id="composer-settings-menu">
<title><guimenu>Settings</guimenu> Menu</title>

<variablelist>

<varlistentry>
<term>
<menuchoice>
<guimenu>Settings</guimenu>
<guimenuitem>Show Toolbar</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>If enabled, the Toolbar is visible (the Toolbar is the one with the icon
to send the message &etc;).</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Settings</guimenu>
<guimenuitem>Show Statusbar</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>If enabled, the Statusbar is visible (the Statusbar is the small one at
the bottom which shows useful short messages).</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Settings</guimenu>
<guimenuitem>Configure Shortcuts...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens a window that lets you configure the keyboard shortcuts for many
menu command.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Settings</guimenu>
<guimenuitem>Configure Toolbars...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Opens a window that allows you to decide which icons appear in the
toolbar.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>
<menuchoice>
<guimenu>Settings</guimenu>
<guimenuitem>Spellchecker...</guimenuitem>
</menuchoice>
</term>
<listitem>
<para>Allows you to configure &kspell;, &kde;'s spellchecker.</para>
</listitem>
</varlistentry>

</variablelist>
</sect2>


<sect2 id="composer-help-menu">
<title><guimenu>Help</guimenu> Menu</title>

<para>The entries in this menu have the same meaning as <link
linkend="reader-help-menu">the entries in the Mailreader's help
menu</link>.</para>

</sect2>
</sect1>
</chapter>

<chapter id="faq">
<title>Frequently Asked Questions (&FAQ;)</title>

<qandaset id="faq-set">

<qandaentry>
<question><para>Can I use &kmail; together with a different mail client, &eg;
<application>mutt</application>?</para></question>
<answer>
<para>If you're using the mbox format for your folders it's not
possible to use a different mail client while &kmail; is running.
With <application>mutt</application> there may also be problems
even if both programs are not running at the same time. We recommend to 
use the maildir format in this case, this should solve all problems.</para>
</answer>
</qandaentry>

<qandaentry>
<question><para>How can I convert my mailboxes from mbox to maildir?</para></question>
<answer>
<para>There's no automatic way to do that. You'll have to create a new folder
in maildir format and copy the messages from the mbox folder into this
new folder. Remember to adapt any filter rules connected with the old folder before
you delete it.</para>
</answer>
</qandaentry>

<qandaentry>
<question><para>How can I use a different browser than Konqueror to
open links in messages?</para></question>
<answer>
<para>Change the <guilabel>File Associations</guilabel> for HTML files
using &kcontrol;.</para>
</answer>
</qandaentry>

<qandaentry>
<question><para>How can I remove attachments from messages without removing
the message itself?</para></question>
<answer>
<para>This is currently not supported. As a workaround, move the
message to the drafts folder, double click on it in order to open
it in the composer, remove the attachments, save the message again to the
drafts folder, move it back to its folder. The disadvantage of
this workaround is that the date will be changed to the current date.
Some other headers might also be changed.</para>
</answer>
</qandaentry>

<qandaentry>
<question><para>How can I make &kmail; to check for new messages at startup?</para></question>
<answer>
<para>Start &kmail; with <command>kmail <option>--check</option></command>.</para>
</answer>
</qandaentry>

<qandaentry>
<question><para>Why does &kmail; get slow / stop working when I try to
send big attachments?</para></question>
<answer>
<!-- fixme: update for 3.1 -->
<para>&kmail; is known to have problems with large attachments. We are working
on a solution for this problem for &kde; 3.1 but currently it temporarily consumes
virtual memory of about 10-15 times the size of the attachment. That
means that if you attach a 2MB file &kmail; might temporarily need about
20-30 MB of virtual memory (= RAM + swap space). If you don't have
enough virtual memory this will lead to problems.</para>
</answer>
</qandaentry>

<qandaentry>
<question><para>Where does &kmail; save my settings?</para></question>
<answer>
<para>All &kmail; settings are stored in <filename>$KDEHOME/share/config/kmailrc</filename>,
where <filename>$KDEHOME</filename> is typically 
<filename class="directory">~/.kde</filename>.</para>
</answer>
</qandaentry>

<qandaentry>
<question><para>Where can I get a list of changes between the versions of &kmail;?</para></question>
<answer>
<para>The welcome screen lists all important changes for your version. It is displayed when you
start a new version of &kmail; the first time. You can always look at it again
by selecting the root element of the folder list, &ie; <guilabel>Mail</guilabel>.</para>
</answer>
</qandaentry>

<qandaentry>
<question><para>Can I configure the location of my mail directory?</para></question>
<answer>
<para>Exit &kmail;, make a backup of <filename>~/.kde/share/config/kmailrc</filename>,
then open it with an editor and add &eg; <userinput>folders=/home/username/.mail</userinput>
to the <quote>[General]</quote> section. Then move all your existing folders (including
the hidden index files) to the new location. The next time you start &kmail; it will use
<filename class="directory">/home/username/.mail</filename> instead of
<filename class="directory">/home/username/Mail</filename>. Note that &kmail;
will lose its filters if you change the mail directory's location but forget
to move your existing folders.</para>
</answer>
</qandaentry>

<qandaentry>
<question><para>How can I use mail folders that are not in <filename
class="directory">~/Mail/</filename>?</para></question>

<answer><para>Simply create a symlink in your <filename
class="directory">~/Mail</filename> directory using
<userinput><command>ln</command> <option>-s</option>
<filename>/somewhere/Mail/mymailboxfile</filename>
<filename class="symlink">~/Mail/remote</filename></userinput>. When you start
&kmail; you will see a new folder with the name <guilabel>remote</guilabel> that
contains the messages in your remote folder. If you want to add a whole remote mail
directory use <userinput><command>ln</command> <option>-s</option>
<filename>/somewhere/Mail/.remotedir.directory</filename> <filename
class="symlink">~/Mail/.mymailboxfile.directory</filename></userinput>.</para></answer>
</qandaentry>

<qandaentry>
<question><para>The button to sign messages is not enabled anymore, it was enabled 
some time ago.</para></question>
<answer><para>Select your <guilabel>OpenPGP Key</guilabel> in the
<guilabel>Identity</guilabel> section of &kmail;'s configuration dialog.
Otherwise &kmail; can't know which key should be used to sign your messages.</para>
</answer>
</qandaentry>

<qandaentry>
<question><para>I'm one of those people whose mails consist of 100 quoted lines
and one line written by myself. For some reason this annoys other people. Can
&kmail; help me and make everyone's life better?</para></question>
<answer><para>Sure. Just select a short relevant part of the original mail
with the mouse before you reply. Only this part will then be quoted in your 
reply.</para></answer>
</qandaentry>

<qandaentry>
<question><para>For some messages the value in the <guilabel>Date</guilabel> field
is <guilabel>unknown</guilabel> or it's not correct.</para></question>
<answer><para>Probably the <quote>Date:</quote> header of these messages is broken,
maybe it lacks the time zone information. For this case we've added
a workaround to mimelib. Mimelib is part of the kdenetwork
package, you should make sure that &kde;'s mimelib is used and not a different
one on your system. If that doesn't help, the <quote>Date:</quote> field is
really broken and &kmail; cannot interpret it. That's not a bug in &kmail;
but in the software that sent the mail.</para></answer>
</qandaentry>

<qandaentry>
<question><para>My signature has two dashes above it. What's up?</para></question>
<answer>
<para>
Separating the signature from the message body with two dashes and a space
on a single line is a common standard. If your signature does not already have 
this separator, &kmail; will automatically add it.</para>
</answer>
</qandaentry>

<!-- TODO: kmail can beep, but how to add an icon to the taskbar
<qandaentry>
<question><para>How do I get a notification if new mail arrives?</para></question>
<answer><para>fixme</para></answer>
</qandaentry>
-->

<qandaentry>
<!-- TODO: still up-to-date? -->
<question><para>&kmail; fetches the same messages over and over again.</para></question>
<answer><para>This happens if you have <guilabel>Delete mail from server</guilabel>
deselected and your POP3 server doesn't support the UIDL command. There's currently
no workaround besides selecting <guilabel>Delete mail from server</guilabel>.
A more detailed explanation can be found 
<ulink url="http://lists.kde.org/?l=kmail&amp;m=99220697415300&amp;w=2">in this
mailing list post</ulink>.</para></answer>
</qandaentry>

<qandaentry>
<question><para>Are there any known bugs in &kmail;?</para></question>
<answer>
<para>You can find a list of submitted bugs at <ulink
url="http://bugs.kde.org/db/pa/lkmail.html">bugs.kde.org</ulink>. Note that not all
these bugs are valid. All in all we think that &kmail; is now a very robust piece
of software.</para>
<para><warning><para>However, you should not run &kmail; while another mail client is already
accessing the files in <filename class="directory">~/Mail</filename>. If you try to do so,
you might lose messages. Note that you should make backups of your messages anyway.</para></warning></para>
</answer>
</qandaentry>

<qandaentry>
<question><para>My folders keep growing even when I delete
messages.</para></question>
<answer><para>
To really remove deleted messages from disk, you have to compact
your folders using <menuchoice><guimenu>File</guimenu><guimenuitem>Compact all 
folders</guimenuitem></menuchoice> (by default this will also happen every time you exit
&kmail; - note that it does not work when leaving &kmail; via &kde;'s session
management).</para>
</answer>
</qandaentry>

<qandaentry>
<question><para>&kmail; doesn't display <acronym>HTML</acronym> mail as
<acronym>HTML</acronym>, I can only see plain text.</para></question>
<answer><para>Select <menuchoice><guimenu>Folder</guimenu><guimenuitem>Prefer
HTML to plain text</guimenuitem></menuchoice>. For security reasons you should
only do so for trusted messages. Note that plugins (like <trademark
class="registered">Macromedia</trademark> <application>Flash</application>),
&Java; and JavaScript will not be displayed in &kmail; for security reasons
and there's no way to activate them.</para></answer>
</qandaentry>

<qandaentry>
<question><para>Can I use two different versions of &kmail; at the same time? Can I go
back from a current version of &kmail; to an older one?</para></question>
<answer><para>You can only run one instance of &kmail; at once. We also recommend
to stick to a certain version and not switch back and forth between different versions.
Downgrading to an older version will probably cause problems, &eg; because the index file
formats might have changed. Upgrading should never be a problem.</para></answer>
</qandaentry>

<qandaentry>
<question><para>Does &kmail; support uuencoded files?</para></question>
<answer><para>No. However, you can handle them using a filter, which is
described in <ulink url="http://lists.kde.org/?l=kmail&amp;m=98908576320145&amp;w=2">this 
posting</ulink> to the mailing list.</para></answer>
</qandaentry>

<qandaentry>
<question><para>&kmail; crashed while I was writing a mail. So this mail is lost now?</para></question>
<answer><para>&kmail; tries to save your mail to 
<filename>~/dead.letter</filename> in case of a crash. The next time you start
&kmail; the mail composer should appear with your mail again. If it doesn't,
try to open <filename>~/dead.letter</filename> with an editor. If it doesn't
exist, the crash was so bad that &kmail; couldn't save your mail.</para></answer>
</qandaentry>

<qandaentry>
<question><para>When I try to set a folder to be mailing list-aware, it does not do
anything when receiving an email from the list.</para></question>
<answer><para>Associating a folder with a mailing list has nothing to do with
filtering the mailing list messages. You have to add a new filter rule manually.
However, once you associated a folder with a mailing list you can use <menuchoice>
<guimenu>Message</guimenu><guimenuitem>Reply List...</guimenuitem></menuchoice> or 
<menuchoice><guimenu>Message</guimenu><guimenuitem>New Message...</guimenuitem></menuchoice>
and the mailing list address will be set in the <guilabel>To:</guilabel> field.
</para></answer>
</qandaentry>

<qandaentry>
<question><para>My SMTP server requires authentication. Does &kmail; support it?</para></question>
<answer><para>There are two common techniques used for <acronym>SMTP</acronym> authentication:
<quote>SMTP after POP3</quote> and <quote>SMTP Auth</quote>. 
<quote>SMTP Auth</quote> can be set in the <guilabel>General</guilabel> tab
of the SMTP configuration dialog.
To use <quote>SMTP after POP3</quote> you have to collect all your messages in the
<guilabel>outbox</guilabel> and send them just after you have fetched new mail.
<!-- fixme: how to make it more simple? -->
</para></answer>
</qandaentry>

<qandaentry>
<question><para>Can I use &kmail; and <application>procmail</application>?</para></question>
<answer><para>Yes, but it's important to do it the right way or you might lose
mail. In order to use <application>procmail</application> and &kmail; you need 
to set up &kmail; so that it will fetch new
mail from the spoolfiles in which <application>procmail</application>
drops your mail. Do <emphasis>not</emphasis> set up procmail to deliver
mail in a &kmail; folder, this  cannot work.</para>
          
<para>For each procmail spoolfile, you then need to create an account
from which &kmail; will fetch new mail. You also need to make sure you
specify the right lockfile name for this account. When setting up an
account, &kmail; will do some minimal parsing on your
<filename>.procmail</filename> file, and will try to list every
spoolfile it has found, and also the lockfiles next to the
<guilabel>procmail lockfile</guilabel> item. procmail lets the user
specify lockfiles in three different ways, so there's no way to
establish a correspondence between the spoolfiles and lockfiles. So it's
really up to you to make sure you specify the right lockfile for each
spoolfile.</para>
</answer>
</qandaentry>

<qandaentry id="pgp-faq">
<question><para>What should I know if I want to use
<application>PGP</application>/<application>GnuPG</application> with
&kmail;?</para></question>

<answer><para>&kmail; provides a simple and easy to use interface for basic
 functions of these programs. Still you should understand how these programs
 work and what might make their use insecure. Some important issues:</para>

<itemizedlist>
<listitem>
<para>You <emphasis>really</emphasis> should test if encryption works
before you use it. &kmail; partly relies on
<application>PGP</application>/<application>GnuPG</application>'s error strings,
which often change between different versions.</para>
</listitem>
<listitem>
<para>&kmail; will not encrypt messages with an untrusted (unsigned) public key.
In fact, it will not even display untrusted keys. If you want to encrypt to such a 
key you should check the identity of the key owner and only then sign the key
with your secret key. If you don't want to or can't check the identity
of the key owner but nevertheless want to encrypt the message then
please sign the key locally with <userinput><command>gpg</command>
<option>--lsign</option> <replaceable>keyID</replaceable></userinput>.</para>
</listitem>
<listitem>
<para>Trusting a foreign public key without checking it is no good idea.</para>
</listitem>
<listitem>
<para>As most other mail clients, &kmail; can encrypt your messages, but
<emphasis>not</emphasis> your attachments. You have to encrypt them manually
before you attach them.</para>
</listitem>
</itemizedlist>
</answer>
</qandaentry>

<qandaentry>
<question><para>Spellchecking doesn't recognize non-English
characters.</para></question>
<answer><para>Before you can use spellchecking the first time, you have to
configure it. You can do so in the composer window's menu
under <menuchoice><guimenu>Settings</guimenu>
<guimenuitem>Spellchecker...</guimenuitem></menuchoice>. You can set
the dictionary and the encoding there.</para></answer>
</qandaentry>

<qandaentry>
<question><para>How do I use my
<application>Eudora</application>/&Netscape;/<application>Outlook</application>/...
mail folders in  &kmail;?</para></question> 
<answer><para>See the section <link linkend="importing">Using other Mailbox
files With &kmail;</link>.</para></answer>
</qandaentry>

<qandaentry>
<question><para>Can I use encryption with my normal (non-<acronym>SSL</acronym>)
<acronym>POP3</acronym> account?</para></question>
<answer><para>If your <acronym>POP3</acronym> server runs an
<application>ssh</application> daemon, you can use ssh to tunnel your
<acronym>POP3</acronym> connection using the following command:</para>

<para><userinput><command>ssh</command> <option>-L 11000:127.0.0.1:110
user@host</option></userinput></para>

<para>Modify your &kmail; configuration to fetch the mail via
<acronym>POP3</acronym> from <userinput>localhost</userinput> and ssh will tunnel
the connection for you.

<note><para>If non-encrypted messages have already been sent
via Internet, the only advantage of using <application>ssh</application> is
that your <emphasis>password</emphasis> will be sent encrypted to the <acronym>POP3</acronym>
server.</para></note>

<!-- fixme: add link to http://www.linuxdoc.org/HOWTO/mini/Secure-POP+SSH.html -->

</para>
</answer>
</qandaentry>

<qandaentry id="faq-file-locking">
<question><para>Does &kmail; lock the folders it uses?</para></question>
<answer><para>&kmail; does not lock the files in <filename
class="directory">~/Mail</filename>.</para>
<para>To avoid the risk of losing mail <emphasis>if using a local
account</emphasis> it is necessary to ensure that &kmail; uses the same type of
locking as your mail delivery agent.</para>

<para>There are five different locking options you can use:</para>

<itemizedlist>
<listitem><para><guilabel>Procmail lockfile</guilabel></para></listitem>
<listitem><para><guilabel>Mutt dotlock</guilabel></para></listitem>
<listitem><para><guilabel>Mutt dotlock privileged</guilabel></para></listitem>
<listitem><para><guilabel>FCNTL</guilabel> (default)</para></listitem>
<listitem><para><guilabel>none (use with care)</guilabel></para></listitem>
</itemizedlist>

<para><guilabel>Procmail lockfile</guilabel> will use a small utility that comes
with <application>procmail</application> called <command>lockfile</command>. You
can use this if your mail folder is in a directory where you have write
permission.  This will not work on your <filename
class="directory">/var/spool/mail/user</filename> file in most cases.  It will
create <filename>.lock</filename> files on your account when &kmail; is checking
for new mail. Please note that this will only work if
<application>procmail</application> is installed on your system.</para>

<para><guilabel>Mutt dotlock</guilabel> and <guilabel>Mutt dotlock
privileged</guilabel> will both use a small utility that comes with 
<application>mutt</application>
called <command>mutt_dotlock</command>. <guilabel>Mutt dotlock</guilabel>
can be used in the same way as the <guilabel>Procmail lockfile</guilabel>
option, with the same limitation with regards to the <filename
class="directory">/var/spool/mail/</filename> folders. However, the
<guilabel>Mutt dotlock privileged</guilabel> option can create lock files
in the <filename class="directory">/var/spool/mail</filename> directory. 
<command>mutt_dotlock</command> is a setgid program and this option will
run it in setgid mode. Please note that these options will only work if
<application>mutt</application> is installed on your system.</para>

<para><guilabel>FCNTL</guilabel> will use the
<function>fcntl()</function> system call.</para>

<para>If you don't want to use any locking, the <guilabel>none</guilabel> option
is what you want. However, there are risks of losing mail when no locking is
used.</para>

</answer>
</qandaentry>

<qandaentry>
<question><para>How do I leave messages on the server?</para></question>
<answer><para>See the <link linkend="popfilters">Download filters</link> chapter.
If you want to leave all messages on the server: open up the
<menuchoice><guimenu>Settings</guimenu><guimenuitem>Configure &kmail;...</guimenuitem>
</menuchoice> window. Click on the <guilabel>Network</guilabel> tab. Select your
account from the account list and click the <guilabel>Modify...</guilabel>
button. This dialog contains the <guilabel>Delete mail from server</guilabel>
setting which you must not select.</para></answer>
</qandaentry>

<qandaentry>
<question><para>How do I automatically insert a text footer within my
messages?</para></question>
<answer><para>The text footer is called a signature file. Select
<menuchoice><guimenu>Settings</guimenu>
<guimenuitem>Configure &kmail;...</guimenuitem></menuchoice>
Look in the <guilabel>Identity</guilabel> tab for the <guilabel>Signature</guilabel>
tab and add your signature there.</para></answer> 
</qandaentry>

<qandaentry>
<question><para>Why does &kmail; keep asking me for the location of my signature
file?</para></question>
<answer><para>&kmail; will ask you for the location of your signature file if you
have checked the option <guilabel>Automatically append signature</guilabel> in the
<guilabel>Composer</guilabel> tab of the <guilabel>Configure &kmail;...</guilabel> dialog,
but you have not specified a signature file in the <guilabel>Identity</guilabel>
tab. You should either specify a signature file
or deselect <guilabel>Automatically append signature</guilabel>.</para></answer>
</qandaentry>

<qandaentry>
<question><para>How do I set up &Sendmail; to work with
&kmail; if I have a  dial-up connection?</para></question> 

<answer><para>First you should check if your &Linux;/BSD/whatever distribution
can do this for you. It probably has already been set up during
installation.</para>

<para>If that's not the case, you may want to have a look at <ulink
url="http://www.linuxdoc.org/HOWTO/mini/Mail-Queue.html">the Mail Queue
HOWTO</ulink> or at <ulink
url="http://www.leg.uct.ac.za/Articles/sendmail_dialup.html">UCT Linux User's
group page on configuring sendmail for Dial-up
connections</ulink>.</para></answer>
</qandaentry>

<qandaentry>
<question><para>I've seen demonstrations of remote control behavior with &kmail;.
Is there any documentation on the available interfaces?</para></question>
<answer><para>You can get a list of functions by using this command in a shell:
<userinput><command>dcop</command> 
<option>kmail  KMailIface</option></userinput>. Some documentation is also
available in <filename>kdenetwork/kmail/kmailIface.h</filename> and
<filename>kdenetwork/kmail/mailcomposerIface.h</filename>.</para></answer>
</qandaentry>

</qandaset>

</chapter>

<chapter id="importing">
<title>Using other Mailbox Files with &kmail;</title>

<para>&kmail; offers an import tool for the messages and address books of some
other mail clients. You can access it
using <menuchoice><guimenu>File</guimenu><guimenuitem>Import...</guimenuitem></menuchoice>.
You only need to read this chapter if this tool does not work for you.</para>

<para>This section is for all of the users who need to move email messages from
their previous email client over to &kmail;. &kmail; can store its mail using the
<literal>mbox</literal> format, one of the most widely used mailbox formats on
&UNIX; systems. Mbox mailboxes store messages in one file, identifying where
messages start and end with a <literal>From</literal> line (do not mix this up
with the <literal>From:</literal> header that contains the message's sender).
For many &UNIX; mail programs, all you must do is move your mailboxes to <filename
class="directory">~/Mail</filename> (or make <filename
class="symlink">Mail</filename> a symbolic link to the folder containing your
mailboxes), make sure they are writable by your user, and launch &kmail;. The
mailboxes should now show up correctly in &kmail;.</para>

<para>Please have a look at the
<ulink url="http://kmail.kde.org/download.html">Download section of &kmail;'s
homepage</ulink> first, to see if there's a tool that imports your mailbox
and maybe even address book.</para>

<warning><para>Do not use a second mail client that accesses the files in
<filename class="directory">~/Mail</filename> while &kmail; is running or
you might lose messages. This section only explains how to import mailboxes
to &kmail; once, it's not useful to you if you're planning to use several
mail clients for your mailboxes in the future.</para></warning>

<variablelist>

<varlistentry>
<term><application>Eudora Lite</application>/<application>Eudora
Pro</application></term>
<listitem>
<para><application>Eudora</application> uses the mbox format in its mail
files. To use them with &kmail;, make sure that your
<application>Eudora</application> mailboxes have been compacted, then copy the
<literal role="extension">.mbx</literal> files (&Windows;
<application>Eudora</application>) or <application>Eudora</application> mailbox
files (&Mac; <application>Eudora</application>) to your <filename
class="directory">~/Mail</filename> directory. You don't need to copy the
<filename>index</filename> files. Once you start &kmail;, the mailboxes should
appear in the Folders pane and the messages should be accessible in the Headers
pane.</para>
<para>If messages do not appear in the Headers pane, your mailbox files may
still contain &Windows; or &Mac; line feed characters. Use your favorite
text editor, the <application>recode</application> command or a scripting
language to change the &Windows; or &Mac; line feeds to &UNIX; line
feeds.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>MMDF</term>
<listitem>
<para>This format is close enough to the mailbox format that &kmail; should be
able to use these mailboxes if you just copy them to your
<filename class="directory">~/Mail</filename> directory. However, MMDF mailboxes
have not been tested with &kmail;, so your results may vary.  If you can get
this format to work with &kmail;, please let us know so we can include more
specific directions in the next documentation release.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>MH mailboxes</term>
<listitem>
<para>MH mailboxes are directories containing files that correspond to each
message in that mailbox.  A shell script to convert MH mailboxes to mbox
mailboxes, <command>mh2kmail</command>, is included at least in the source
releases of &kmail;, but maybe not in the packaged releases. Running this script
on a MH folder will convert it to an mbox file.  We strongly suggest that you
back up your MH mail folders before you use this script.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>Forte <application>Agent</application></term>
<listitem>
<para>In <application>Agent</application>:</para>
<procedure>
<step>
<para>Select the messages to export</para>
</step>
<step>
<para>Select <menuchoice><guimenu>FILE</guimenu><guimenuitem>SAVE MESSAGES
AS</guimenuitem></menuchoice></para>
</step>
<step>
<para>Mark the <guilabel>UNIX FORMAT</guilabel> and <guilabel>SAVE
RAW</guilabel> boxes</para>
</step>
<step>
<para>Give File a  <literal role="extension">.txt</literal> extension and
save.</para>
</step>
</procedure>

<para>In &kde;:</para>

<procedure>
<step>
<para>Move previously saves file to correct <filename
class="directory">~/Mail</filename> folder</para>
</step>
<step>
<para>Rename file without <literal role="extension">.txt</literal>
extension</para>
</step>
</procedure>
<para>When you open &kmail; the new folder with appropriate messages will be
there.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>&Netscape; Mail</term>
<listitem>

<para>If you are using &Netscape; 4.x, the mail files should be found
in <filename class="directory">~/nsmail</filename>. If you are using
&Netscape; 6.x, they're buried in a directory deep in the <filename
class="directory">~/.mozilla</filename> subdirectory, something like:
<filename
class="directory">/home/user_name/.mozilla/user_name/2ts1ixha.slt/Mail/Mail/server_name</filename>
(The <filename class="directory">2ts1ixha.slt</filename> string will
probably vary, so check it on your own system.)  The <filename
class="directory">[...]/Mail/Mail</filename> directory contains one
subdirectory for each account from which you receive mail through
Netscape (&eg; <filename
class="directory">[...]/Mail/Mail/math.university.edu</filename>);
you'll need to copy files from each of them if you want everything to
be accessible under &kmail;.</para>

<para>If you have no subfolders, just copy all of the &Netscape;
files to <filename class="directory">~/Mail</filename>, make sure
that they are writable (only by your user, of course), and restart
&kmail;: all of the messages will now appear in &kmail; folders.
(Note that if you use a command like <command>cp
<parameter>*</parameter> <parameter>~/Mail</parameter></command>, you
should follow it with <command>rm <option>-f</option>
<parameter>~/Mail/*.msf</parameter></command>; every &Netscape; 6
folder has a corresponding <filename>.msf</filename> file, and if you
don't get rid of them you'll have a bunch of spurious empty
folders.)</para>

<para>If you were using subfolders under &Netscape; (&eg; a main
folder called <replaceable>Work</replaceable> with subfolders called
<replaceable>Jim</replaceable> and <replaceable>Nancy</replaceable>),
there are additional steps required. First, create the main folder
(<replaceable>Work</replaceable>) in &kmail; and create a temporary
child folder under it (by right-clicking on the folder name and
selecting <guilabel>Create child folder</guilabel>); it doesn't
matter what you call this folder -- <replaceable>dummy</replaceable>
or the default <replaceable>unnamed</replaceable>, for example. Once
a child folder has been requested, &kmail; creates a hidden directory
in <filename class="directory">~/Mail</filename> called (in this
example) <filename class="directory">.Work.directory</filename>. You
can then copy your &Netscape; subfolder files
(<replaceable>Jim</replaceable> and <replaceable>Nancy</replaceable>)
into <filename class="directory">~/Mail/.Work.directory</filename>,
and restart &kmail;; the child folders will appear under the main
folder <replaceable>Work</replaceable>. Of course, this procedure may
be extended for sub-subfolders, to any depth. (You can remove the
temporary child folders afterwards, unless it amuses you to have a
<replaceable>Work</replaceable> subfolder called
<replaceable>dummy</replaceable>.)</para>

</listitem>
</varlistentry>

<varlistentry>
<term><application>Pegasus Mail</application></term>
<listitem>
<para><application>Pegasus</application> for win32 uses single files for Mail
folders similar to &kmail;. <application>Pegasus mail</application> folder files
have the extension <literal role="extension">.pmm</literal> but they are the same format as mbox except the messages
do not start with the <literal>From</literal> header, but with a control character. To work around
this, replace each instance of the control character with <literal>From
aaa@aaa Mon Jan 01 00:00:00 1997</literal>. This <literal>From</literal>
line should be the first line of every message, before the
<literal>Received:</literal> and other headers. Make sure to use a text editor
that lets you save the files in &UNIX; format or create new folders in
<application>Pegasus</application> that are in &UNIX; format and copy your messages
there.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>Maildir / Outlook Express / xfmail</term>
<listitem>
<para>Tools to convert these formats are available at the
<ulink url="http://kmail.kde.org/download.html">Download section of &kmail;'s
homepage</ulink>.</para>
</listitem>
</varlistentry>

<varlistentry>
<term>Lotus <application>Notes</application>, BeOS Mail files, <application>cc:
Mail</application>, &etc;...</term>
<listitem>
<para>First you should have a look at <ulink
url="http://kmail.kde.org/download.html">Download section of &kmail;'s homepage</ulink> if 
there are tools to convert your messages.</para>
<para>Mail programs not listed here or on the homepage probably do not work with &kmail; as they use
proprietary mail formats that &kmail; cannot understand. However, there is no
harm in trying! If the mailbox file looks similar to the mbox format, try
copying the mailbox file (remember, the index file is not needed) to your
<filename>~/Mail</filename> directory and see what happens if you start
&kmail;. If you get mailboxes from your favorite mail client to work in &kmail;,
please tell us how you did it so that we can include directions in a future
revision of this documentation. </para>
</listitem>
</varlistentry>

</variablelist>
</chapter>


<chapter id="credits-and-licenses">
<title>Credits and Licenses</title>

<para>&kmail;: Copyright the &kmail; developers, 1997-2002</para>

&underGPL;
&underFDL;

<sect1 id="team">
<title>Development Team and Contributors</title>
<!-- please keep in sync with the authors list on the webpage -->

<!-- This is generated with "authors2xml.pl kmail/main.cpp"
 (except the "maintainer" comment): -->
<itemizedlist>
<listitem><para>Michael H&auml;ckel <email>haeckel@kde.org</email> (current maintainer)</para></listitem>
<listitem><para>Don Sanders <email>sanders@kde.org</email></para></listitem>
<listitem><para>Stefan Taferner  <email>taferner@kde.org</email></para></listitem>
<listitem><para>Ingo Kl&ouml;cker <email>ingo.kloecker@epost.de</email></para></listitem>
<listitem><para>Marc Mutz <email>mutz@kde.org</email></para></listitem>
<listitem><para>Daniel Naber <email>daniel.naber@t-online.de</email></para></listitem>
<listitem><para>Andreas Gungl <email>a.gungl@gmx.de</email></para></listitem>
<listitem><para>Toyohiro Asukai <email>toyohiro@ksmplus.com</email></para></listitem>
<listitem><para>Waldo Bastian <email>bastian@kde.org</email></para></listitem>
<listitem><para>Carsten Burghardt <email>carsten.burghardt@web.de</email></para></listitem>
<listitem><para>Steven Brown <email>swbrown@ucsd.edu</email></para></listitem>
<listitem><para>Cristi Dumitrescu <email>cristid@chip.ro</email></para></listitem>
<listitem><para>Philippe Fremy <email>pfremy@chez.com</email></para></listitem>
<listitem><para>Kurt Granroth <email>granroth@kde.org</email></para></listitem>
<listitem><para>Heiko Hund <email>heiko@ist.eigentlich.net</email></para></listitem>
<listitem><para>Igor Janssen <email>rm@linux.ru.net</email></para></listitem>
<listitem><para>Matt Johnston <email>matt@caifex.org</email></para></listitem>
<listitem><para>Christer Kaivo-oja <email>whizkid@telia.com</email></para></listitem>
<listitem><para>Lars Knoll <email>knoll@kde.org</email></para></listitem>
<listitem><para>J. Nick Koston <email>bdraco@darkorb.net</email></para></listitem>
<listitem><para>Stephan Kulow <email>coolo@kde.org</email></para></listitem>
<listitem><para>Guillaume Laurent <email>glaurent@telegraph-road.org</email></para></listitem>
<listitem><para>Sam Magnuson <email>sam@trolltech.com</email></para></listitem>
<listitem><para>Laurent Montel <email>lmontel@mandrakesoft.com</email></para></listitem>
<listitem><para>Matt Newell <email>newellm@proaxis.com</email></para></listitem>
<listitem><para>Denis Perchine <email>dyp@perchine.com</email></para></listitem>
<listitem><para>Samuel Penn <email>sam@bifrost.demon.co.uk</email></para></listitem>
<listitem><para>Carsten Pfeiffer <email>pfeiffer@kde.org</email></para></listitem>
<listitem><para>Sven Radej <email>radej@kde.org</email></para></listitem>
<listitem><para>Mark Roberts <email>mark@taurine.demon.co.uk</email></para></listitem>
<listitem><para>Wolfgang Rohdewald <email>wrohdewald@dplanet.ch</email></para></listitem>
<listitem><para>Espen Sand <email>espen@kde.org</email></para></listitem>
<listitem><para>George Staikos <email>staikos@kde.org</email></para></listitem>
<listitem><para>Jason Stephenson <email>panda@mis.net</email></para></listitem>
<listitem><para>Jacek Stolarczyk <email>jacek@mer.chemia.polsl.gliwice.pl</email></para></listitem>
<listitem><para>Roberto S. Teixeira <email>maragato@kde.org</email></para></listitem>
<listitem><para>Ronen Tzur <email>rtzur@shani.net</email></para></listitem>
<listitem><para>Mario Weilguni <email>mweilguni@sime.com</email></para></listitem>
<listitem><para>Wynn Wilkes <email>wynnw@calderasystems.com</email></para></listitem>
<listitem><para>Robert D. Williams <email>rwilliams@kde.org</email></para></listitem>
<listitem><para>Markus Wuebben <email>markus.wuebben@kde.org</email></para></listitem>
<listitem><para>Thorsten Zachmann <email>t.zachmann@zagge.de</email></para></listitem>
<listitem><para>Karl-Heinz Zimmer <email>khz@kde.org</email></para></listitem>
</itemizedlist>

</sect1>

<sect1 id="documentation">
<title>Documentation</title>

<para>Update for &kmail; 1.2 to 1.4 by Daniel Naber
<email>daniel.naber@t-online.de</email>,
<application>OpenPGP</application> chapter by Andreas Gungl
<email>a.gungl@gmx.de</email>, message filter chapter by Marc Mutz
<email>mutz@kde.org</email>, download filter chapter by Thorsten
Zachmann <email>T.Zachmann@zagge.de</email>. Other parts have been
contributed by various &kmail; developers.</para>

<para>&kmail; 1.0
documentation by David Rugge <email>davidrugge@mediaone.net</email>.
Original documentation by Markus Wuebben
<email>markus.wuebben@kde.org</email>, Robert Williams
<email>rwilliams@kde.org</email> (Editor).</para>

<para>Thanks to Michael Elkins <email>me@cs.hmc.edu</email> for his excellent
description of the different &UNIX; mail formats in the <application>Mutt</application> 
documentation.</para>

<para>Thanks to the following people for providing directions on using other
mail client mailboxes with &kmail;:</para>

<itemizedlist>
<listitem><para>David McMillen <email>mcmillen@math.bu.edu</email> and 
Mendel Mobach <email>mendel@mobach.nl</email> (&Netscape; mail)</para></listitem>
<listitem><para>Ed Shapard <email>shapard@bigfoot.com</email>
(<application>Pegasus</application> Mail)</para></listitem>
<listitem><para>Ray Muir <email>rjmuir@ibm.net</email> (Forte
<application>Agent</application>)</para></listitem>
</itemizedlist>
<!-- TRANS:CREDIT_FOR_TRANSLATORS -->

</sect1>

</chapter>

<appendix id="installation">
<title>Installation</title>

<sect1 id="getting-kmail">
<title>How to obtain &kmail;</title>

&install.intro.documentation;

</sect1>

<sect1 id="compilation">
<title>Compilation and Installation</title>

&install.compile.documentation;

</sect1>

</appendix>

</book>

<!--
Local Variables:
mode: sgml
sgml-minimize-attributes:nil
sgml-general-insert-case:lower
sgml-indent-step:0
sgml-indent-data:nil
End:

// vim:ts=0:sw=2:tw=78:noet
-->
