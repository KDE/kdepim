SUBDIRS = versit tests . calendarimap

INCLUDES = -I$(top_srcdir)/libical/src/libical \
  -I$(top_srcdir)/libical/src/libicalss -I$(top_builddir)/libical/src/libical \
  -I$(top_builddir)/libical/src/libicalss -I$(srcdir)/versit $(all_includes)

lib_LTLIBRARIES   = libkcal.la
libkcal_la_LDFLAGS = $(all_libraries) -no-undefined -version-info 2:0:0 -module
libkcal_la_LIBADD  = $(LIB_QT) versit/libversit.la $(LIB_KFILE) \
                     $(top_builddir)/libical/src/libical/libical.la \
                     $(top_builddir)/libical/src/libicalss/libicalss.la \
                     -lkderesources

libkcal_la_SOURCES = \
        incidencebase.cpp incidence.cpp journal.cpp todo.cpp event.cpp \
        freebusy.cpp attendee.cpp recurrence.cpp alarm.cpp \
        customproperties.cpp calendar.cpp calendarlocal.cpp \
        calformat.cpp vcalformat.cpp icalformat.cpp icalformatimpl.cpp \
	vcaldrag.cpp icaldrag.cpp \
        exceptions.cpp \
        scheduler.cpp imipscheduler.cpp dummyscheduler.cpp \
        calfilter.cpp \
        person.cpp period.cpp duration.cpp \
        dndfactory.cpp \
        filestorage.cpp calendarimap.cpp \
        compat.cpp \
	resourcecalendar.cpp resourcelocal.cpp resourcelocalconfig.cpp \
	calendarresources.cpp

kde_module_LTLIBRARIES = libkcm_kcalendars.la 

libkcm_kcalendars_la_SOURCES = kcmcalendars.cpp
libkcm_kcalendars_la_LDFLAGS = $(all_libraries) -module -avoid-version -no-undefined
libkcm_kcalendars_la_LIBADD = libkcal.la -lkderesources

datadir = $(kde_appsdir)/Settings/Components
data_DATA = kcalendars.desktop

linkdir= $(kde_datadir)/resources/calendar
link_DATA = local.desktop

METASOURCES = AUTO

messages:
	$(XGETTEXT) *.cpp -o $(podir)/libkcal.pot

include ../admin/Doxyfile.am
