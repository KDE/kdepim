<HTML>
<HEAD>
<TITLE>KABII Protocol</TITLE>
</HEAD>
<BODY>
<CENTER>
<H1>KABII Protocol</H1>
<H2>Rik Hemsley &lt;<A HREF="mailto:rik@kde.org">rik@kde.org</A>&gt;</H2>
<H3>20th August 1999</H3>
</CENTER>
<H4>NOTES:</H4>
<P>This is a binary protocol - you can't talk to it with telnet !</P>
<P>All size/length values are sent as 4 octets, which represent a single
32 bit value. The values are converted like this:</P>
<PRE>
number = (byte[0] &lt;&lt; 24) | (byte[1] &lt;&lt; 16) | (byte[2] &lt;&lt; 8) | byte[3];
</PRE>
<P>A value called 'type of entity' is one octet, which may be 'e' or 'g'</P>
<P>There are no spaces - those shown in the syntax are for clarity only. </P>

<H4>Command set</H4>
<TABLE ROWS=7 COLS=4 BORDER=1>
<TR>
  <TD><EM>Name</EM></TD>
  <TD><EM>Command</EM></TD>
  <TD><EM>Return value</EM></TD>
  <TD><EM>Notes</EM></TD>
</TR>
<TR>
  <TD>Quit</TD>
  <TD>q</TD>
  <TD>Nothing</TD>
  <TD>Signals that all transactions are complete. The connection will be terminated.</TD>
</TR>
<TR>
  <TD>Find entity</TD>
  <TD>f [total] [key]</TD>
  <TD>[total] [entity]</TD>
  <TD>[total] will be 0 if not found.</TD>
</TR>
<TR>
  <TD>Search</TD>
  <TD>s [total] [size of val] [name] [val]</TD>
  <TD>[length of list] [[size of key] [key]]*</TD>
  <TD>[length of list] will be 0 if not found</TD>
</TR>
<TR>
  <TD>Add entity</TD>
  <TD>a [total] [type of entity] [entity]</TD>
  <TD>On success: '0'<BR>On failure: '1'</TD>
  <TD></TD>
</TR>  
<TR>
  <TD>Erase entity</TD>
  <TD>e [total] [key]</TD>
  <TD>On success: '0'<BR>On failure: '1'</TD>
  <TD></TD>
</TR>
<TR>
  <TD>Replace entity</TD>
  <TD>r [total] [size of entity] [key] [entity]</TD>
  <TD>On success: '0'<BR>On failure: '1'</TD>
  <TD></TD>
</TR>
<TR>
  <TD>List all keys</TD>
  <TD>l</TD>
  <TD>[length of list] [[size of key] [key]]*</TD>
  <TD>[length of list] will be 0 if there are no keys.</TD>
</TR>
</TABLE>
</BODY>
</HTML>
