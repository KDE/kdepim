*************** bool TreeWidget::saveLayout( KConfigGroup &group, const QString &keyName ) const
*** 73,79 ****
  {
    group.writeEntry(
        keyName.isEmpty() ? QString( KPIM_TREEWIDGET_DEFAULT_CONFIG_KEY ) : keyName,
-       QVariant( header()->saveState() )
      );
  
    return true;
--- 73,79 ----
  {
    group.writeEntry(
        keyName.isEmpty() ? QString( KPIM_TREEWIDGET_DEFAULT_CONFIG_KEY ) : keyName,
+       QVariant( header()->saveState().toHex() )
      );
  
    return true;
*************** bool TreeWidget::restoreLayout( KConfigGroup &group, const QString &keyName )
*** 95,100 ****
                               keyName.isEmpty() ? QString( KPIM_TREEWIDGET_DEFAULT_CONFIG_KEY ) : keyName,
                               QVariant( QVariant::ByteArray )
                           ).toByteArray();
  
    if( state.isEmpty() )
      return false;
--- 95,101 ----
                               keyName.isEmpty() ? QString( KPIM_TREEWIDGET_DEFAULT_CONFIG_KEY ) : keyName,
                               QVariant( QVariant::ByteArray )
                           ).toByteArray();
+   state = QByteArray::fromHex( state );
  
    if( state.isEmpty() )
      return false;
